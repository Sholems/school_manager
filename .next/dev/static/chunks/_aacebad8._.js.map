{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/card.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface CardProps {\r\n    children?: React.ReactNode;\r\n    title?: string;\r\n    className?: string;\r\n    action?: React.ReactNode;\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({ children, title, className, action }) => (\r\n    <div className={`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${className || ''}`}>\r\n        {(title || action) && (\r\n            <div className=\"flex flex-col space-y-1.5 p-6 pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    {title && <h3 className=\"font-semibold leading-none tracking-tight\">{title}</h3>}\r\n                    {action && <div>{action}</div>}\r\n                </div>\r\n            </div>\r\n        )}\r\n        <div className=\"p-6 pt-2\">{children}</div>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AASO,MAAM,OAA4B,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,iBAC5E,6LAAC;QAAI,WAAW,CAAC,kGAAkG,EAAE,aAAa,IAAI;;YACjI,CAAC,SAAS,MAAM,mBACb,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;wBACV,uBAAS,6LAAC;4BAAG,WAAU;sCAA6C;;;;;;wBACpE,wBAAU,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAI7B,6LAAC;gBAAI,WAAU;0BAAY;;;;;;;;;;;;KAVtB"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/button.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'danger' | 'ghost' | 'outline';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({ className, variant = 'primary', size = 'md', ...props }) => {\r\n    const base = \"inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none\";\r\n    const variants = {\r\n        primary: \"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm\",\r\n        secondary: \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500\",\r\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm\",\r\n        ghost: \"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500\",\r\n        outline: \"bg-transparent text-brand-600 border border-brand-600 hover:bg-brand-50 focus:ring-brand-500\"\r\n    };\r\n    const sizes = {\r\n        sm: \"h-8 px-3 text-sm\",\r\n        md: \"h-10 px-4 py-2\"\r\n    };\r\n    return <button className={`${base} ${variants[variant]} ${sizes[size]} ${className || ''}`} {...props} />;\r\n};\r\n"],"names":[],"mappings":";;;;;;AAOO,MAAM,SAAgC,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,GAAG,OAAO;IACnG,MAAM,OAAO;IACb,MAAM,WAAW;QACb,SAAS;QACT,WAAW;QACX,QAAQ;QACR,OAAO;QACP,SAAS;IACb;IACA,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;IACR;IACA,qBAAO,6LAAC;QAAO,WAAW,GAAG,KAAK,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,IAAI;QAAG,GAAG,KAAK;;;;;;AACzG;KAda"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/select.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Select: React.FC<SelectProps> = ({ label, className, children, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <select className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props}>\r\n            {children}\r\n        </select>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,SAAgC,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,iBAClF,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAO,WAAW,CAAC,mLAAmL,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;0BAChO;;;;;;;;;;;;KAJA"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/bursary/FeeManagement.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Plus, Printer, Trash2, User } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface FeeManagementProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    settings: Types.Settings;\r\n    selectedClass: string;\r\n    setSelectedClass: (id: string) => void;\r\n    selectedStudent: string | null;\r\n    setSelectedStudent: (id: string | null) => void;\r\n    onRecordPayment: () => void;\r\n    onPrintReceipt: (p: Types.Payment) => void;\r\n    onDeletePayment: (id: string) => void;\r\n}\r\n\r\nexport const FeeManagement: React.FC<FeeManagementProps> = ({\r\n    students, classes, fees, payments, settings, selectedClass, setSelectedClass, selectedStudent, setSelectedStudent, onRecordPayment, onPrintReceipt, onDeletePayment\r\n}) => {\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const student = students.find(s => s.id === selectedStudent);\r\n    const studentPayments = selectedStudent ? payments.filter(p => p.student_id === selectedStudent) : [];\r\n    const applicableFees = student ? fees.filter(f => f.session === settings.current_session && f.term === settings.current_term && (f.class_id === null || f.class_id === student.class_id)) : [];\r\n    const { totalBill, totalPaid, balance } = student ? Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term) : { totalBill: 0, totalPaid: 0, balance: 0 };\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"md:col-span-1 space-y-4\">\r\n                <Card className=\"h-full\">\r\n                    <div className=\"mb-4\"><Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select></div>\r\n                    <div className=\"space-y-1 h-[600px] overflow-y-auto\">\r\n                        {activeStudents.map(s => {\r\n                            const bal = Utils.getStudentBalance(s, fees, payments, settings.current_session, settings.current_term).balance;\r\n                            return (\r\n                                <div key={s.id} onClick={() => setSelectedStudent(s.id)} className={`p-3 rounded-md cursor-pointer flex justify-between items-center text-sm ${selectedStudent === s.id ? 'bg-brand-50 border-brand-200 border' : 'hover:bg-gray-50'}`}>\r\n                                    <div><div className=\"font-medium\">{s.names}</div><div className=\"text-xs text-gray-500\">{s.student_no}</div></div>\r\n                                    <div className={`font-mono ${bal > 0 ? 'text-red-600' : 'text-green-600'}`}>{bal > 0 ? `-${Utils.formatCurrency(bal)}` : 'Paid'}</div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n                {selectedStudent && student ? (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-3 gap-4\">\r\n                            <Card className=\"bg-blue-50 border-blue-100 p-4\"><div className=\"text-sm text-blue-600\">Total Bill</div><div className=\"text-xl font-bold text-blue-900\">{Utils.formatCurrency(totalBill)}</div></Card>\r\n                            <Card className=\"bg-green-50 border-green-100 p-4\"><div className=\"text-sm text-green-600\">Total Paid</div><div className=\"text-xl font-bold text-green-900\">{Utils.formatCurrency(totalPaid)}</div></Card>\r\n                            <Card className=\"bg-red-50 border-red-100 p-4\"><div className=\"text-sm text-red-600\">Outstanding</div><div className=\"text-xl font-bold text-red-900\">{Utils.formatCurrency(balance)}</div></Card>\r\n                        </div>\r\n                        <Card title=\"Bill Breakdown\">\r\n                            <table className=\"w-full text-sm text-left\">\r\n                                <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-2\">Fee Head</th><th className=\"px-4 py-2 text-right\">Amount</th></tr></thead>\r\n                                <tbody className=\"divide-y divide-gray-100\">\r\n                                    {applicableFees.map(fee => <tr key={fee.id}><td className=\"px-4 py-2\">{fee.name}</td><td className=\"px-4 py-2 text-right font-mono\">{Utils.formatCurrency(fee.amount)}</td></tr>)}\r\n                                    <tr className=\"bg-gray-50 font-bold\"><td className=\"px-4 py-2\">Total Billed</td><td className=\"px-4 py-2 text-right\">{Utils.formatCurrency(totalBill)}</td></tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </Card>\r\n                        <Card title=\"Payment History\" action={<Button size=\"sm\" onClick={onRecordPayment}><Plus className=\"h-4 w-4 mr-2\" /> Record Payment</Button>}>\r\n                            <div className=\"space-y-3 mt-2\">\r\n                                {studentPayments.length === 0 && <div className=\"text-center py-4 text-gray-500\">No payments recorded.</div>}\r\n                                {studentPayments.map(p => (\r\n                                    <div key={p.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100\">\r\n                                        <div><div className=\"font-medium text-gray-900\">{Utils.formatCurrency(p.amount)}</div><div className=\"text-xs text-gray-500\">{p.date} â€¢ {p.method}</div>{p.remark && <div className=\"text-xs text-gray-500 italic\">\"{p.remark}\"</div>}</div>\r\n                                        <div className=\"flex gap-2\"><button onClick={() => onPrintReceipt(p)} title=\"Print Receipt\" className=\"p-1 text-gray-400 hover:text-blue-600\"><Printer className=\"h-4 w-4\" /></button><button onClick={() => onDeletePayment(p.id)} title=\"Delete\" className=\"p-1 text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                ) : <div className=\"h-full flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-200 rounded-lg p-12\"><User className=\"h-12 w-12 mb-4 opacity-50\" /><p>Select a student to view fees and payments</p></div>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 648, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/bursary/ExpenseManagement.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Plus } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface ExpenseManagementProps {\r\n    expenses: Types.Expense[];\r\n    onAddExpense: () => void;\r\n}\r\n\r\nexport const ExpenseManagement: React.FC<ExpenseManagementProps> = ({ expenses, onAddExpense }) => {\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex justify-end\"><Button onClick={onAddExpense}><Plus className=\"h-4 w-4 mr-2\" /> Record Expense</Button></div>\r\n            <Card>\r\n                <table className=\"w-full text-sm text-left\">\r\n                    <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Date</th><th className=\"px-4 py-3\">Title</th><th className=\"px-4 py-3\">Category</th><th className=\"px-4 py-3 text-right\">Amount</th></tr></thead>\r\n                    <tbody className=\"divide-y divide-gray-100\">\r\n                        {expenses.map(e => (\r\n                            <tr key={e.id}>\r\n                                <td className=\"px-4 py-3\">{e.date}</td><td className=\"px-4 py-3\">{e.title}</td><td className=\"px-4 py-3 capitalize\"><span className=\"px-2 py-1 bg-gray-100 rounded text-xs\">{e.category}</span></td><td className=\"px-4 py-3 text-right font-mono text-red-600\">-{Utils.formatCurrency(e.amount)}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;;;;AAOO,MAAM,oBAAsD,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE;IAC1F,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BAAmB,cAAA,6LAAC,wIAAM;oBAAC,SAAS;;sCAAc,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;0BAClG,6LAAC,oIAAI;0BACD,cAAA,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;4BAAM,WAAU;sCAA2B,cAAA,6LAAC;;kDAAG,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAS,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAU,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAa,6LAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCACnM,6LAAC;4BAAM,WAAU;sCACZ,SAAS,GAAG,CAAC,CAAA,kBACV,6LAAC;;sDACG,6LAAC;4CAAG,WAAU;sDAAa,EAAE,IAAI;;;;;;sDAAM,6LAAC;4CAAG,WAAU;sDAAa,EAAE,KAAK;;;;;;sDAAM,6LAAC;4CAAG,WAAU;sDAAuB,cAAA,6LAAC;gDAAK,WAAU;0DAAyC,EAAE,QAAQ;;;;;;;;;;;sDAAa,6LAAC;4CAAG,WAAU;;gDAA8C;gDAAE,iIAAoB,CAAC,EAAE,MAAM;;;;;;;;mCAD1R,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AASzC;KAlBa"}},
    {"offset": {"line": 826, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/bursary/FeeStructureManagement.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Plus, Trash2 } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface FeeStructureManagementProps {\r\n    fees: Types.FeeStructure[];\r\n    classes: Types.Class[];\r\n    settings: Types.Settings;\r\n    onAddFeeHead: () => void;\r\n    onDeleteFee: (id: string) => void;\r\n}\r\n\r\nexport const FeeStructureManagement: React.FC<FeeStructureManagementProps> = ({\r\n    fees, classes, settings, onAddFeeHead, onDeleteFee\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex justify-end\"><Button onClick={onAddFeeHead}><Plus className=\"h-4 w-4 mr-2\" /> Add Fee Head</Button></div>\r\n            <Card title=\"Current Session Fee Structure\">\r\n                <table className=\"w-full text-sm text-left\">\r\n                    <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Fee Name</th><th className=\"px-4 py-3\">Class Scope</th><th className=\"px-4 py-3 text-right\">Amount</th><th className=\"px-4 py-3\"></th></tr></thead>\r\n                    <tbody className=\"divide-y divide-gray-100\">\r\n                        {fees.filter(f => f.session === settings.current_session && f.term === settings.current_term).map(f => {\r\n                            const clsName = f.class_id ? classes.find(c => c.id === f.class_id)?.name : 'All Classes';\r\n                            return (\r\n                                <tr key={f.id}>\r\n                                    <td className=\"px-4 py-3 font-medium\">{f.name}</td>\r\n                                    <td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs\">{clsName}</span></td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono\">{Utils.formatCurrency(f.amount)}</td>\r\n                                    <td className=\"px-4 py-3 text-right\"><button onClick={() => onDeleteFee(f.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AACA;AACA;AAEA;;;;;;AAUO,MAAM,yBAAgE,CAAC,EAC1E,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EACrD;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BAAmB,cAAA,6LAAC,wIAAM;oBAAC,SAAS;;sCAAc,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;0BAClG,6LAAC,oIAAI;gBAAC,OAAM;0BACR,cAAA,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;4BAAM,WAAU;sCAA2B,cAAA,6LAAC;;kDAAG,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAa,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAgB,6LAAC;wCAAG,WAAU;kDAAuB;;;;;;kDAAW,6LAAC;wCAAG,WAAU;;;;;;;;;;;;;;;;;sCAC/L,6LAAC;4BAAM,WAAU;sCACZ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,SAAS,eAAe,IAAI,EAAE,IAAI,KAAK,SAAS,YAAY,EAAE,GAAG,CAAC,CAAA;gCAC9F,MAAM,UAAU,EAAE,QAAQ,GAAG,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE,QAAQ,GAAG,OAAO;gCAC5E,qBACI,6LAAC;;sDACG,6LAAC;4CAAG,WAAU;sDAAyB,EAAE,IAAI;;;;;;sDAC7C,6LAAC;4CAAG,WAAU;sDAAY,cAAA,6LAAC;gDAAK,WAAU;0DAAsD;;;;;;;;;;;sDAChG,6LAAC;4CAAG,WAAU;sDAAkC,iIAAoB,CAAC,EAAE,MAAM;;;;;;sDAC7E,6LAAC;4CAAG,WAAU;sDAAuB,cAAA,6LAAC;gDAAO,SAAS,IAAM,YAAY,EAAE,EAAE;gDAAG,WAAU;0DAAmC,cAAA,6LAAC,uNAAM;oDAAC,WAAU;;;;;;;;;;;;;;;;;mCAJzI,EAAE,EAAE;;;;;4BAOrB;;;;;;;;;;;;;;;;;;;;;;;AAMxB;KA1Ba"}},
    {"offset": {"line": 1019, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/modal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    children?: React.ReactNode;\r\n    size?: 'sm' | 'md' | 'lg' | 'xl';\r\n}\r\n\r\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children, size = 'md' }) => {\r\n    if (!isOpen) return null;\r\n    const sizes = {\r\n        sm: \"max-w-md\",\r\n        md: \"max-w-lg sm:max-w-2xl\",\r\n        lg: \"max-w-4xl\",\r\n        xl: \"max-w-6xl\"\r\n    };\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200 overflow-y-auto backdrop-blur-sm\">\r\n            <div className={`relative w-full ${sizes[size]} rounded-xl bg-white shadow-2xl my-8 flex flex-col max-h-[90vh]`}>\r\n                <div className=\"flex items-center justify-between border-b p-4 bg-gray-50 rounded-t-xl shrink-0\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n                    <button onClick={onClose} className=\"rounded-full p-1 hover:bg-gray-200 transition-colors\">\r\n                        <X className=\"h-5 w-5 text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n                <div className=\"p-6 overflow-y-auto\">{children}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;;;AAUO,MAAM,QAA8B,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,IAAI,EAAE;IACzF,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;IACR;IACA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAW,CAAC,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,+DAA+D,CAAC;;8BAC3G,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAGrB,6LAAC;oBAAI,WAAU;8BAAuB;;;;;;;;;;;;;;;;;AAItD;KArBa"}},
    {"offset": {"line": 1102, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/input.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Input: React.FC<InputProps> = ({ label, className, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <input className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props} />\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,QAA8B,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,OAAO,iBACtE,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAM,WAAW,CAAC,6MAA6M,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;;;;;;;;;;;;KAHzP"}},
    {"offset": {"line": 1143, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/bursary/ReceiptTemplate.tsx"],"sourcesContent":["import React from 'react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface ReceiptTemplateProps {\r\n    payment: Types.Payment;\r\n    student: Types.Student;\r\n    cls?: Types.Class;\r\n    settings: Types.Settings;\r\n    balance: number;\r\n}\r\n\r\nexport const ReceiptTemplate: React.FC<ReceiptTemplateProps> = ({ payment, student, cls, settings, balance }) => {\r\n    return (\r\n        <div className=\"bg-white p-8 max-w-2xl mx-auto border border-gray-200 text-sm\" id=\"receipt-print\">\r\n            <div className=\"text-center mb-8 border-b pb-4\">\r\n                {settings.logo_media && <img src={settings.logo_media} alt=\"Logo\" className=\"h-16 mx-auto mb-2\" />}\r\n                <h1 className=\"text-2xl font-bold uppercase\">{settings.school_name}</h1>\r\n                <p>{settings.school_address}</p>\r\n                <p>{settings.school_email} | {settings.school_phone}</p>\r\n            </div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div><h2 className=\"text-lg font-bold\">PAYMENT RECEIPT</h2><p>Receipt No: #{payment.id.substring(0, 8).toUpperCase()}</p><p>Date: {payment.date}</p></div>\r\n                <div className=\"text-right\"><p>Session: {payment.session}</p><p>Term: {payment.term}</p></div>\r\n            </div>\r\n            <div className=\"mb-6\"><p><strong>Received From:</strong> {student.names} ({student.student_no})</p><p><strong>Class:</strong> {cls?.name || 'N/A'}</p></div>\r\n            <div className=\"mb-6\">\r\n                <table className=\"w-full border-collapse border border-gray-300\">\r\n                    <thead><tr className=\"bg-gray-100\"><th className=\"border border-gray-300 p-2 text-left\">Description</th><th className=\"border border-gray-300 p-2 text-right\">Amount</th></tr></thead>\r\n                    <tbody><tr><td className=\"border border-gray-300 p-2\">School Fees Payment {payment.method && ` via ${payment.method}`} {payment.remark && ` (${payment.remark})`}</td><td className=\"border border-gray-300 p-2 text-right\">{Utils.formatCurrency(payment.amount)}</td></tr></tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"flex justify-end mb-12\">\r\n                <div className=\"text-right\"><p className=\"text-lg font-bold\">Total Paid: {Utils.formatCurrency(payment.amount)}</p><p className=\"text-sm text-gray-500\">Balance Remaining: {Utils.formatCurrency(balance)}</p></div>\r\n            </div>\r\n            <div className=\"flex justify-between mt-12 pt-4 border-t\"><div className=\"text-center\"><p className=\"border-t border-black px-8 mt-8 pt-2\">Bursar's Signature</p></div><div className=\"text-center\"><p className=\"italic text-xs\">Thank you for your business.</p></div></div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAUO,MAAM,kBAAkD,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE;IACxG,qBACI,6LAAC;QAAI,WAAU;QAAgE,IAAG;;0BAC9E,6LAAC;gBAAI,WAAU;;oBACV,SAAS,UAAU,kBAAI,6LAAC;wBAAI,KAAK,SAAS,UAAU;wBAAE,KAAI;wBAAO,WAAU;;;;;;kCAC5E,6LAAC;wBAAG,WAAU;kCAAgC,SAAS,WAAW;;;;;;kCAClE,6LAAC;kCAAG,SAAS,cAAc;;;;;;kCAC3B,6LAAC;;4BAAG,SAAS,YAAY;4BAAC;4BAAI,SAAS,YAAY;;;;;;;;;;;;;0BAEvD,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CAAI,6LAAC;gCAAG,WAAU;0CAAoB;;;;;;0CAAoB,6LAAC;;oCAAE;oCAAc,QAAQ,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW;;;;;;;0CAAO,6LAAC;;oCAAE;oCAAO,QAAQ,IAAI;;;;;;;;;;;;;kCAC/I,6LAAC;wBAAI,WAAU;;0CAAa,6LAAC;;oCAAE;oCAAU,QAAQ,OAAO;;;;;;;0CAAK,6LAAC;;oCAAE;oCAAO,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;0BAEvF,6LAAC;gBAAI,WAAU;;kCAAO,6LAAC;;0CAAE,6LAAC;0CAAO;;;;;;4BAAuB;4BAAE,QAAQ,KAAK;4BAAC;4BAAG,QAAQ,UAAU;4BAAC;;;;;;;kCAAK,6LAAC;;0CAAE,6LAAC;0CAAO;;;;;;4BAAe;4BAAE,KAAK,QAAQ;;;;;;;;;;;;;0BAC5I,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;sCAAM,cAAA,6LAAC;gCAAG,WAAU;;kDAAc,6LAAC;wCAAG,WAAU;kDAAuC;;;;;;kDAAgB,6LAAC;wCAAG,WAAU;kDAAwC;;;;;;;;;;;;;;;;;sCAC9J,6LAAC;sCAAM,cAAA,6LAAC;;kDAAG,6LAAC;wCAAG,WAAU;;4CAA6B;4CAAqB,QAAQ,MAAM,IAAI,CAAC,KAAK,EAAE,QAAQ,MAAM,EAAE;4CAAC;4CAAE,QAAQ,MAAM,IAAI,CAAC,EAAE,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;;;;;;;kDAAM,6LAAC;wCAAG,WAAU;kDAAyC,iIAAoB,CAAC,QAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAGxQ,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCAAa,6LAAC;4BAAE,WAAU;;gCAAoB;gCAAa,iIAAoB,CAAC,QAAQ,MAAM;;;;;;;sCAAM,6LAAC;4BAAE,WAAU;;gCAAwB;gCAAoB,iIAAoB,CAAC;;;;;;;;;;;;;;;;;;0BAErM,6LAAC;gBAAI,WAAU;;kCAA2C,6LAAC;wBAAI,WAAU;kCAAc,cAAA,6LAAC;4BAAE,WAAU;sCAAuC;;;;;;;;;;;kCAA4B,6LAAC;wBAAI,WAAU;kCAAc,cAAA,6LAAC;4BAAE,WAAU;sCAAiB;;;;;;;;;;;;;;;;;;;;;;;AAG9O;KA1Ba"}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/bursary/BursaryModals.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Printer } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { ReceiptTemplate } from './ReceiptTemplate';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface BursaryModalsProps {\r\n    settings: Types.Settings;\r\n    classes: Types.Class[];\r\n    students: Types.Student[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n\r\n    showPayModal: boolean;\r\n    setShowPayModal: (show: boolean) => void;\r\n    showExpenseModal: boolean;\r\n    setShowExpenseModal: (show: boolean) => void;\r\n    showFeeModal: boolean;\r\n    setShowFeeModal: (show: boolean) => void;\r\n    receiptPayment: Types.Payment | null;\r\n    setReceiptPayment: (p: Types.Payment | null) => void;\r\n\r\n    selectedStudent: string | null;\r\n    onAddPayment: (p: Types.Payment) => void;\r\n    onAddExpense: (e: Types.Expense) => void;\r\n    onAddFee: (f: Types.FeeStructure) => void;\r\n    addToast: (msg: string, type: 'success' | 'error') => void;\r\n}\r\n\r\nexport const BursaryModals: React.FC<BursaryModalsProps> = ({\r\n    settings, classes, students, fees, payments,\r\n    showPayModal, setShowPayModal, showExpenseModal, setShowExpenseModal, showFeeModal, setShowFeeModal, receiptPayment, setReceiptPayment,\r\n    selectedStudent, onAddPayment, onAddExpense, onAddFee, addToast\r\n}) => {\r\n    // Forms\r\n    const [payAmount, setPayAmount] = useState('');\r\n    const [payMethod, setPayMethod] = useState('cash');\r\n    const [payRemark, setPayRemark] = useState('');\r\n\r\n    const [expTitle, setExpTitle] = useState('');\r\n    const [expAmount, setExpAmount] = useState('');\r\n    const [expCat, setExpCat] = useState('supplies');\r\n    const [expDate, setExpDate] = useState(Utils.getTodayString());\r\n\r\n    const [feeName, setFeeName] = useState('');\r\n    const [feeAmount, setFeeAmount] = useState('');\r\n    const [feeClass, setFeeClass] = useState('');\r\n\r\n    const handlePaymentSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedStudent) return;\r\n        onAddPayment({\r\n            id: Utils.generateId(), student_id: selectedStudent, amount: Number(payAmount), method: payMethod as any, remark: payRemark, date: Utils.getTodayString(), session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Payment recorded successfully', 'success'); setShowPayModal(false); setPayAmount(''); setPayRemark('');\r\n    };\r\n\r\n    const handleExpenseSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddExpense({\r\n            id: Utils.generateId(), title: expTitle, amount: Number(expAmount), category: expCat as any, date: expDate, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Expense recorded', 'success'); setShowExpenseModal(false); setExpTitle(''); setExpAmount('');\r\n    };\r\n\r\n    const handleFeeSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddFee({\r\n            id: Utils.generateId(), name: feeName, amount: Number(feeAmount), class_id: feeClass || null, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Fee structure added', 'success'); setShowFeeModal(false); setFeeName(''); setFeeAmount(''); setFeeClass('');\r\n    };\r\n\r\n    const student = students.find(s => s.id === selectedStudent);\r\n    const { balance } = student ? Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term) : { balance: 0 };\r\n\r\n    return (\r\n        <>\r\n            <Modal isOpen={showPayModal} onClose={() => setShowPayModal(false)} title=\"Record Payment\">\r\n                <form onSubmit={handlePaymentSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Amount (NGN)\" type=\"number\" required value={payAmount} onChange={e => setPayAmount(e.target.value)} />\r\n                    <Select label=\"Payment Method\" value={payMethod} onChange={e => setPayMethod(e.target.value)}><option value=\"cash\">Cash</option><option value=\"transfer\">Bank Transfer</option><option value=\"pos\">POS</option></Select>\r\n                    <Input label=\"Remark/Note\" value={payRemark} onChange={e => setPayRemark(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Payment</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={!!receiptPayment} onClose={() => setReceiptPayment(null)} title=\"Print Receipt\">\r\n                {receiptPayment && student && (\r\n                    <div className=\"overflow-y-auto max-h-[80vh]\">\r\n                        <ReceiptTemplate payment={receiptPayment} student={student} cls={classes.find(c => c.id === student.class_id)} settings={settings} balance={balance} />\r\n                        <div className=\"mt-4 flex justify-end gap-2\"><Button variant=\"secondary\" onClick={() => setReceiptPayment(null)}>Close</Button><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print</Button></div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            <Modal isOpen={showExpenseModal} onClose={() => setShowExpenseModal(false)} title=\"Record Expense\">\r\n                <form onSubmit={handleExpenseSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Title\" required value={expTitle} onChange={e => setExpTitle(e.target.value)} />\r\n                    <Input label=\"Amount\" type=\"number\" required value={expAmount} onChange={e => setExpAmount(e.target.value)} />\r\n                    <Select label=\"Category\" value={expCat} onChange={e => setExpCat(e.target.value)}><option value=\"supplies\">Supplies</option><option value=\"maintenance\">Maintenance</option><option value=\"salary\">Salary</option><option value=\"utilities\">Utilities</option><option value=\"other\">Other</option></Select>\r\n                    <Input label=\"Date\" type=\"date\" value={expDate} onChange={e => setExpDate(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Expense</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={showFeeModal} onClose={() => setShowFeeModal(false)} title=\"Add Fee Structure\">\r\n                <form onSubmit={handleFeeSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Fee Name\" required value={feeName} onChange={e => setFeeName(e.target.value)} placeholder=\"e.g. Tuition Fee\" />\r\n                    <Input label=\"Amount\" type=\"number\" required value={feeAmount} onChange={e => setFeeAmount(e.target.value)} />\r\n                    <Select label=\"Applicable Class\" value={feeClass} onChange={e => setFeeClass(e.target.value)}><option value=\"\">All Classes</option>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select>\r\n                    <Button type=\"submit\" className=\"w-full\">Create Fee</Button>\r\n                </form>\r\n            </Modal>\r\n        </>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1942, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/BursaryView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport * as Types from '@/lib/types';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\n// Bursary sub-components\r\nimport { FeeManagement } from './bursary/FeeManagement';\r\nimport { ExpenseManagement } from './bursary/ExpenseManagement';\r\nimport { FeeStructureManagement } from './bursary/FeeStructureManagement';\r\nimport { BursaryModals } from './bursary/BursaryModals';\r\n\r\ninterface BursaryViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    expenses: Types.Expense[];\r\n    settings: Types.Settings;\r\n    onAddPayment: (p: Types.Payment) => void;\r\n    onAddFee: (f: Types.FeeStructure) => void;\r\n    onAddExpense: (e: Types.Expense) => void;\r\n    onDeletePayment: (id: string) => void;\r\n    onDeleteFee: (id: string) => void;\r\n}\r\n\r\nexport const BursaryView: React.FC<BursaryViewProps> = ({\r\n    students, classes, fees, payments, expenses, settings, onAddPayment, onAddFee, onAddExpense, onDeletePayment, onDeleteFee\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'fees' | 'expenses' | 'structure'>('fees');\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedStudent, setSelectedStudent] = useState<string | null>(null);\r\n\r\n    // Modal Visibility State\r\n    const [showPayModal, setShowPayModal] = useState(false);\r\n    const [showExpenseModal, setShowExpenseModal] = useState(false);\r\n    const [showFeeModal, setShowFeeModal] = useState(false);\r\n    const [receiptPayment, setReceiptPayment] = useState<Types.Payment | null>(null);\r\n    const { addToast } = useToast();\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Bursary & Finance</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    {(['fees', 'expenses', 'structure'] as const).map(tab => (\r\n                        <button key={tab} onClick={() => setActiveTab(tab)} className={`px-4 py-2 text-sm font-medium rounded-md capitalize ${activeTab === tab ? 'bg-white shadow-sm text-brand-700' : 'text-gray-600 hover:text-gray-900'}`}>{tab}</button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {activeTab === 'fees' && (\r\n                <FeeManagement\r\n                    students={students}\r\n                    classes={classes}\r\n                    fees={fees}\r\n                    payments={payments}\r\n                    settings={settings}\r\n                    selectedClass={selectedClass}\r\n                    setSelectedClass={setSelectedClass}\r\n                    selectedStudent={selectedStudent}\r\n                    setSelectedStudent={setSelectedStudent}\r\n                    onRecordPayment={() => setShowPayModal(true)}\r\n                    onPrintReceipt={(p) => setReceiptPayment(p)}\r\n                    onDeletePayment={onDeletePayment}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'expenses' && (\r\n                <ExpenseManagement\r\n                    expenses={expenses}\r\n                    onAddExpense={() => setShowExpenseModal(true)}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'structure' && (\r\n                <FeeStructureManagement\r\n                    fees={fees}\r\n                    classes={classes}\r\n                    settings={settings}\r\n                    onAddFeeHead={() => setShowFeeModal(true)}\r\n                    onDeleteFee={onDeleteFee}\r\n                />\r\n            )}\r\n\r\n            <BursaryModals\r\n                settings={settings}\r\n                classes={classes}\r\n                students={students}\r\n                fees={fees}\r\n                payments={payments}\r\n                showPayModal={showPayModal}\r\n                setShowPayModal={setShowPayModal}\r\n                showExpenseModal={showExpenseModal}\r\n                setShowExpenseModal={setShowExpenseModal}\r\n                showFeeModal={showFeeModal}\r\n                setShowFeeModal={setShowFeeModal}\r\n                receiptPayment={receiptPayment}\r\n                setReceiptPayment={setReceiptPayment}\r\n                selectedStudent={selectedStudent}\r\n                onAddPayment={onAddPayment}\r\n                onAddExpense={onAddExpense}\r\n                onAddFee={onAddFee}\r\n                addToast={addToast}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;;;;;;;;;AAgBO,MAAM,cAA0C,CAAC,EACpD,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE,eAAe,EAAE,WAAW,EAC5H;;IACG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAoC;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC,OAAO,CAAC,EAAE,EAAE,MAAM;IACrE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IAEtE,yBAAyB;IACzB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAuB;IAC3E,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAQ;IAE7B,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBAAI,WAAU;kCACV,AAAC;4BAAC;4BAAQ;4BAAY;yBAAY,CAAW,GAAG,CAAC,CAAA,oBAC9C,6LAAC;gCAAiB,SAAS,IAAM,aAAa;gCAAM,WAAW,CAAC,oDAAoD,EAAE,cAAc,MAAM,sCAAsC,qCAAqC;0CAAG;+BAA3M;;;;;;;;;;;;;;;;YAKxB,cAAc,wBACX,6LAAC,uKAAa;gBACV,UAAU;gBACV,SAAS;gBACT,MAAM;gBACN,UAAU;gBACV,UAAU;gBACV,eAAe;gBACf,kBAAkB;gBAClB,iBAAiB;gBACjB,oBAAoB;gBACpB,iBAAiB,IAAM,gBAAgB;gBACvC,gBAAgB,CAAC,IAAM,kBAAkB;gBACzC,iBAAiB;;;;;;YAIxB,cAAc,4BACX,6LAAC,+KAAiB;gBACd,UAAU;gBACV,cAAc,IAAM,oBAAoB;;;;;;YAI/C,cAAc,6BACX,6LAAC,yLAAsB;gBACnB,MAAM;gBACN,SAAS;gBACT,UAAU;gBACV,cAAc,IAAM,gBAAgB;gBACpC,aAAa;;;;;;0BAIrB,6LAAC,uKAAa;gBACV,UAAU;gBACV,SAAS;gBACT,UAAU;gBACV,MAAM;gBACN,UAAU;gBACV,cAAc;gBACd,iBAAiB;gBACjB,kBAAkB;gBAClB,qBAAqB;gBACrB,cAAc;gBACd,iBAAiB;gBACjB,gBAAgB;gBAChB,mBAAmB;gBACnB,iBAAiB;gBACjB,cAAc;gBACd,cAAc;gBACd,UAAU;gBACV,UAAU;;;;;;;;;;;;AAI1B;GAjFa;;QAYY,4JAAQ;;;KAZpB"}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/app/%28dashboard%29/bursary/page.tsx"],"sourcesContent":["'use client';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { BursaryView } from '@/components/features/BursaryView';\r\n\r\nexport default function BursaryPage() {\r\n    const {\r\n        students, classes, fees, payments, expenses, settings,\r\n        addPayment, addFee, addExpense, deletePayment, deleteFee, deleteExpense\r\n    } = useSchoolStore();\r\n\r\n    return (\r\n        <BursaryView\r\n            students={students} classes={classes} fees={fees} payments={payments}\r\n            expenses={expenses} settings={settings}\r\n            onAddPayment={addPayment} onAddFee={addFee} onAddExpense={addExpense}\r\n            onDeletePayment={deletePayment} onDeleteFee={deleteFee}\r\n        />\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS;;IACpB,MAAM,EACF,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EACrD,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,SAAS,EAAE,aAAa,EAC1E,GAAG,IAAA,iIAAc;IAElB,qBACI,6LAAC,wJAAW;QACR,UAAU;QAAU,SAAS;QAAS,MAAM;QAAM,UAAU;QAC5D,UAAU;QAAU,UAAU;QAC9B,cAAc;QAAY,UAAU;QAAQ,cAAc;QAC1D,iBAAiB;QAAe,aAAa;;;;;;AAGzD;GAdwB;;QAIhB,iIAAc;;;KAJE"}}]
}