{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/lib/utils.ts"],"sourcesContent":["\nimport { ScoreRow, Settings, Class, Subject, Student, Teacher, Staff, FeeStructure, Payment, Score, Attendance } from './types';\n\nexport const calculateGrade = (total: number) => {\n  if (total >= 75) return { grade: 'A', comment: 'Excellent' };\n  if (total >= 65) return { grade: 'B', comment: 'Very Good' };\n  if (total >= 50) return { grade: 'C', comment: 'Good' };\n  if (total >= 40) return { grade: 'D', comment: 'Fair' };\n  return { grade: 'F', comment: 'Fail' };\n};\n\nexport const generateId = () => crypto.randomUUID();\n\nexport const getCurrentTimestamp = () => Date.now();\n\nexport const getTodayString = () => new Date().toISOString().split('T')[0];\n\n// --- STORAGE KEYS ---\nexport const STORAGE_KEYS = {\n  SETTINGS: 'ng_school_settings',\n  STUDENTS: 'ng_school_students',\n  TEACHERS: 'ng_school_teachers',\n  STAFF: 'ng_school_staff',\n  CLASSES: 'ng_school_classes',\n  FEES: 'ng_school_fees',\n  PAYMENTS: 'ng_school_payments',\n  EXPENSES: 'ng_school_expenses',\n  SCORES: 'ng_school_scores',\n  ATTENDANCE: 'ng_school_attendance'\n};\n\n// Generic Load/Save\nexport const loadFromStorage = <T>(key: string, fallback: T): T => {\n  try {\n    const item = localStorage.getItem(key);\n    return item ? JSON.parse(item) : fallback;\n  } catch (e) {\n    console.error(`Error loading ${key}`, e);\n    return fallback;\n  }\n};\n\nexport const saveToStorage = (key: string, data: any) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n  } catch (e) {\n    console.error(`Error saving ${key}`, e);\n  }\n};\n\nexport const INITIAL_SETTINGS: Settings = {\n  id: 'singleton',\n  created_at: Date.now(),\n  updated_at: Date.now(),\n  school_name: 'Bright Future Academy',\n  school_address: '123 Education Lane, Lagos, Nigeria',\n  school_email: 'info@brightfuture.ng',\n  school_phone: '08012345678',\n  school_tagline: 'Knowledge for a brighter tomorrow',\n  current_session: '2025/2026',\n  current_term: 'First Term',\n  \n  logo_media: null,\n  watermark_media: null,\n  \n  director_name: 'Godspower Arthur',\n  director_signature: null,\n  head_of_school_name: 'Oluwaseun Arthur',\n  head_of_school_signature: null,\n\n  subjects_global: ['Mathematics', 'English', 'Science'],\n  terms: ['First Term', 'Second Term', 'Third Term']\n};\n\nexport const PRESET_PRESCHOOL_SUBJECTS = [\n  'Language',\n  'Numeracy',\n  'Sensorial',\n  'Practical Life',\n  'Cultural Studies',\n  'Art',\n  'Story Telling',\n  'C.R.S'\n];\n\nexport const PRESET_PRIMARY_SUBJECTS = [\n  'Mathematics',\n  'English Language',\n  'Basic Science',\n  'Social Studies',\n  'Civic Education',\n  'C.R.S',\n  'Verbal Reasoning',\n  'Quantitative Reasoning',\n  'ICT',\n  'Creative Art',\n  'Vocational Aptitude',\n  'Writing'\n];\n\nexport const getSubjectsForClass = (cls: Class | undefined) => {\n  if (!cls) return [];\n  if (cls.subjects && cls.subjects.length > 0) return cls.subjects;\n  \n  const lowerName = cls.name.toLowerCase();\n  if (lowerName.includes('play') || lowerName.includes('reception') || lowerName.includes('nursery') || lowerName.includes('kinder')) {\n    return PRESET_PRESCHOOL_SUBJECTS;\n  }\n  return PRESET_PRIMARY_SUBJECTS;\n};\n\nexport const PRESET_CLASSES = [\n  'Playschool', 'Reception', 'Kindergarten', \n  'Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5', 'Year 6'\n];\n\nexport const DOMAINS_AFFECTIVE = [\n  'Punctuality', 'Attentiveness', 'Neatness', 'Honesty', 'Self Control', 'Politeness', 'Leadership'\n];\n\nexport const DOMAINS_PSYCHOMOTOR = [\n  'Handwriting', 'Verbal Fluency', 'Sports/Games', 'Handling Tools', 'Drawing/Painting', 'Music/Dance'\n];\n\n// Mock Initial Data (Seeds)\nexport const SEED_TEACHERS: Teacher[] = [\n  { id: 't1', name: 'Mr. John Doe', address: 'Lagos', email: 'john@school.ng', phone: '08012345678', created_at: Date.now(), updated_at: Date.now() },\n  { id: 't2', name: 'Mrs. Jane Smith', address: 'Abuja', email: 'jane@school.ng', phone: '08087654321', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const SEED_STAFF: Staff[] = [\n  { id: 'st1', name: 'Mrs. Grace Okoro', role: 'Bursar', tasks: 'Collect fees, manage accounts', email: 'bursar@school.ng', phone: '08099999999', address: 'Lagos', created_at: Date.now(), updated_at: Date.now() },\n  { id: 'st2', name: 'Mr. Ahmed Musa', role: 'Security', tasks: 'Gate security, patrol', email: '', phone: '08088888888', address: 'Lagos', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const SEED_CLASSES: Class[] = PRESET_CLASSES.map((name, i) => ({\n  id: `c-${i}`,\n  name,\n  class_teacher_id: i === 0 ? 't1' : (i === 3 ? 't2' : null),\n  subjects: null,\n  created_at: Date.now(),\n  updated_at: Date.now(),\n}));\n\nexport const SEED_STUDENTS: Student[] = [\n  { id: 's1', student_no: 'ST001', names: 'Chinedu Eze', gender: 'Male', class_id: 'c-3', dob: '2015-05-12', parent_name: 'Mr. Eze', parent_phone: '08000000001', address: 'Ikeja', created_at: Date.now(), updated_at: Date.now() },\n  { id: 's2', student_no: 'ST002', names: 'Amina Bello', gender: 'Female', class_id: 'c-3', dob: '2015-08-23', parent_name: 'Mrs. Bello', parent_phone: '08000000002', address: 'Lekki', created_at: Date.now(), updated_at: Date.now() },\n  { id: 's3', student_no: 'ST003', names: 'Funke Akindele', gender: 'Female', class_id: 'c-0', dob: '2019-02-10', parent_name: 'Mr. Akindele', parent_phone: '08000000003', address: 'Yaba', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(amount);\n};\n\nexport const getStudentBalance = (student: Student, fees: FeeStructure[], payments: Payment[], session: string, term: string) => {\n  // Calculate total bill for this session/term\n  const classFees = fees.filter(f => \n    f.session === session && \n    f.term === term && \n    (f.class_id === null || f.class_id === student.class_id)\n  );\n  const totalBill = classFees.reduce((acc, f) => acc + f.amount, 0);\n  \n  // Calculate total paid\n  const studentPayments = payments.filter(p => \n    p.student_id === student.id && \n    p.session === session && \n    p.term === term\n  );\n  const totalPaid = studentPayments.reduce((acc, p) => acc + p.amount, 0);\n\n  return { totalBill, totalPaid, balance: totalBill - totalPaid };\n};\n\n// Helper to ordinalize numbers (1st, 2nd, 3rd)\nexport const ordinalSuffix = (i: number) => {\n  const j = i % 10, k = i % 100;\n  if (j === 1 && k !== 11) return i + \"st\";\n  if (j === 2 && k !== 12) return i + \"nd\";\n  if (j === 3 && k !== 13) return i + \"rd\";\n  return i + \"th\";\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/providers/toast-provider.tsx"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\r\nimport { X, CheckCircle, XCircle, AlertTriangle, Info } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\n\r\ninterface ToastContextType {\r\n    addToast: (message: string, type: Types.ToastType) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport const useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error('useToast must be used within a ToastProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nconst ToastItem = ({ id, message, type, onClose }: { id: string; message: string; type: Types.ToastType; onClose: (id: string) => void }) => {\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => onClose(id), 4000);\r\n        return () => clearTimeout(timer);\r\n    }, [id, onClose]);\r\n\r\n    const icons = {\r\n        success: <CheckCircle className=\"h-5 w-5 text-green-500\" />,\r\n        error: <XCircle className=\"h-5 w-5 text-red-500\" />,\r\n        warning: <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />,\r\n        info: <Info className=\"h-5 w-5 text-blue-500\" />\r\n    };\r\n\r\n    const styles = {\r\n        success: 'bg-green-50 border-green-200 text-green-800',\r\n        error: 'bg-red-50 border-red-200 text-red-800',\r\n        warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\r\n        info: 'bg-blue-50 border-blue-200 text-blue-800'\r\n    };\r\n\r\n    return (\r\n        <div className={`flex items-center w-80 p-4 mb-3 rounded-lg border shadow-lg transition-all transform animate-in slide-in-from-top-5 duration-300 ${styles[type]}`}>\r\n            <div className=\"inline-flex items-center justify-center flex-shrink-0 w-8 h-8\">\r\n                {icons[type]}\r\n            </div>\r\n            <div className=\"ml-3 text-sm font-medium\">{message}</div>\r\n            <button onClick={() => onClose(id)} className=\"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8 opacity-50 hover:opacity-100 hover:bg-black/5 transition-opacity\">\r\n                <X className=\"w-4 h-4\" />\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const ToastProvider = ({ children }: { children?: React.ReactNode }) => {\r\n    const [toasts, setToasts] = useState<Types.ToastNotification[]>([]);\r\n\r\n    const addToast = (message: string, type: Types.ToastType) => {\r\n        const id = Math.random().toString(36).substring(2, 9);\r\n        setToasts((prev) => [...prev, { id, message, type }]);\r\n    };\r\n\r\n    const removeToast = (id: string) => {\r\n        setToasts((prev) => prev.filter((t) => t.id !== id));\r\n    };\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ addToast }}>\r\n            {children}\r\n            <div className=\"fixed top-4 right-4 z-50 flex flex-col items-end pointer-events-none\">\r\n                <div className=\"pointer-events-auto\">\r\n                    {toasts.map((toast) => (\r\n                        <ToastItem key={toast.id} {...toast} onClose={removeToast} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;;;AAOA,MAAM,6BAAe,IAAA,8KAAa,EAA+B;AAE1D,MAAM,WAAW;;IACpB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;GANa;AAQb,MAAM,YAAY,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAyF;;IACpI,IAAA,0KAAS;+BAAC;YACN,MAAM,QAAQ;6CAAW,IAAM,QAAQ;4CAAK;YAC5C;uCAAO,IAAM,aAAa;;QAC9B;8BAAG;QAAC;QAAI;KAAQ;IAEhB,MAAM,QAAQ;QACV,uBAAS,6LAAC,6OAAW;YAAC,WAAU;;;;;;QAChC,qBAAO,6LAAC,0NAAO;YAAC,WAAU;;;;;;QAC1B,uBAAS,6LAAC,4OAAa;YAAC,WAAU;;;;;;QAClC,oBAAM,6LAAC,6MAAI;YAAC,WAAU;;;;;;IAC1B;IAEA,MAAM,SAAS;QACX,SAAS;QACT,OAAO;QACP,SAAS;QACT,MAAM;IACV;IAEA,qBACI,6LAAC;QAAI,WAAW,CAAC,iIAAiI,EAAE,MAAM,CAAC,KAAK,EAAE;;0BAC9J,6LAAC;gBAAI,WAAU;0BACV,KAAK,CAAC,KAAK;;;;;;0BAEhB,6LAAC;gBAAI,WAAU;0BAA4B;;;;;;0BAC3C,6LAAC;gBAAO,SAAS,IAAM,QAAQ;gBAAK,WAAU;0BAC1C,cAAA,6LAAC,oMAAC;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B;IA/BM;KAAA;AAiCC,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAkC;;IACtE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA4B,EAAE;IAElE,MAAM,WAAW,CAAC,SAAiB;QAC/B,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;QACnD,UAAU,CAAC,OAAS;mBAAI;gBAAM;oBAAE;oBAAI;oBAAS;gBAAK;aAAE;IACxD;IAEA,MAAM,cAAc,CAAC;QACjB,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACpD;IAEA,qBACI,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;QAAS;;YACpC;0BACD,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACV,OAAO,GAAG,CAAC,CAAC,sBACT,6LAAC;4BAA0B,GAAG,KAAK;4BAAE,SAAS;2BAA9B,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;AAMhD;IAxBa;MAAA"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/card.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface CardProps {\r\n    children?: React.ReactNode;\r\n    title?: string;\r\n    className?: string;\r\n    action?: React.ReactNode;\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({ children, title, className, action }) => (\r\n    <div className={`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${className || ''}`}>\r\n        {(title || action) && (\r\n            <div className=\"flex flex-col space-y-1.5 p-6 pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    {title && <h3 className=\"font-semibold leading-none tracking-tight\">{title}</h3>}\r\n                    {action && <div>{action}</div>}\r\n                </div>\r\n            </div>\r\n        )}\r\n        <div className=\"p-6 pt-2\">{children}</div>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AASO,MAAM,OAA4B,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,iBAC5E,6LAAC;QAAI,WAAW,CAAC,kGAAkG,EAAE,aAAa,IAAI;;YACjI,CAAC,SAAS,MAAM,mBACb,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;wBACV,uBAAS,6LAAC;4BAAG,WAAU;sCAA6C;;;;;;wBACpE,wBAAU,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAI7B,6LAAC;gBAAI,WAAU;0BAAY;;;;;;;;;;;;KAVtB"}},
    {"offset": {"line": 569, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/DashboardView.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n    GraduationCap, Users, TrendingUp, TrendingDown,\r\n    CreditCard, Calendar as CalendarIcon, BadgeCheck, DollarSign, Plus\r\n} from 'lucide-react';\r\nimport {\r\n    BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend,\r\n    PieChart, Pie, Cell\r\n} from 'recharts';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Card } from '@/components/ui/card';\r\n\r\ninterface DashboardViewProps {\r\n    students: Types.Student[];\r\n    teachers: Types.Teacher[];\r\n    staff: Types.Staff[];\r\n    payments: Types.Payment[];\r\n    expenses: Types.Expense[];\r\n    fees: Types.FeeStructure[];\r\n    classes: Types.Class[];\r\n    settings: Types.Settings;\r\n    onChangeView: (view: Types.ViewState) => void;\r\n}\r\n\r\nexport const DashboardView: React.FC<DashboardViewProps> = ({\r\n    students, teachers, staff, payments, expenses, fees, classes, settings, onChangeView\r\n}) => {\r\n    // Calculations\r\n    const totalStudents = students.length;\r\n    const totalTeachers = teachers.length;\r\n    const totalStaff = staff.length;\r\n\r\n    // Financials (Current Session/Term context)\r\n    const currentSessionPayments = payments.filter(p => p.session === settings.current_session && p.term === settings.current_term);\r\n    const totalRevenue = currentSessionPayments.reduce((acc, p) => acc + p.amount, 0);\r\n\r\n    const currentSessionExpenses = expenses.filter(e => e.session === settings.current_session && e.term === settings.current_term);\r\n    const totalExpenses = currentSessionExpenses.reduce((acc, e) => acc + e.amount, 0);\r\n\r\n    // Expected Revenue calculation\r\n    let totalExpectedRevenue = 0;\r\n    students.forEach(s => {\r\n        const { totalBill } = Utils.getStudentBalance(s, fees, [], settings.current_session, settings.current_term); // Pass empty payments to just get bill\r\n        totalExpectedRevenue += totalBill;\r\n    });\r\n\r\n    const financeData = [\r\n        { name: 'Income', amount: totalRevenue, fill: '#10b981' }, // emerald-500\r\n        { name: 'Expenses', amount: totalExpenses, fill: '#ef4444' }, // red-500\r\n    ];\r\n    const genderData = [\r\n        { name: 'Male', value: students.filter(s => s.gender === 'Male').length, color: '#3b82f6' },\r\n        { name: 'Female', value: students.filter(s => s.gender === 'Female').length, color: '#ec4899' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Welcome */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Executive Dashboard</h1>\r\n                    <p className=\"text-gray-500 font-medium mt-1\">Overview for {settings.current_session} • {settings.current_term}</p>\r\n                </div>\r\n                <div className=\"bg-white px-5 py-3 rounded-xl shadow-sm border border-gray-100 hidden md:block\">\r\n                    <span className=\"text-xs text-gray-400 uppercase font-bold tracking-wider\">Net Position</span>\r\n                    <div className={`text-2xl font-bold ${totalRevenue - totalExpenses >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>\r\n                        {Utils.formatCurrency(totalRevenue - totalExpenses)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Colorful Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-blue-100 text-sm font-medium\">Total Students</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{totalStudents}</h3>\r\n                            <p className=\"text-xs text-blue-200 mt-1\">Active Enrollment</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><GraduationCap className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-purple-100 text-sm font-medium\">Total Staff</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{totalTeachers + totalStaff}</h3>\r\n                            <p className=\"text-xs text-purple-200 mt-1\">{totalTeachers} Teachers, {totalStaff} Non-Academic</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><Users className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-emerald-100 text-sm font-medium\">Revenue (Term)</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{Utils.formatCurrency(totalRevenue)}</h3>\r\n                            <p className=\"text-xs text-emerald-200 mt-1\">Target: {Utils.formatCurrency(totalExpectedRevenue)}</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><TrendingUp className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-500 to-rose-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-rose-100 text-sm font-medium\">Expenses (Term)</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{Utils.formatCurrency(totalExpenses)}</h3>\r\n                            <p className=\"text-xs text-rose-200 mt-1\">{currentSessionExpenses.length} Transactions</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><TrendingDown className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Charts & Actions */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <Card title=\"Financial Overview\">\r\n                        <div className=\"h-72 w-full min-h-[300px]\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <BarChart data={financeData}>\r\n                                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e5e7eb\" />\r\n                                    <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#6b7280', fontSize: 12 }} dy={10} />\r\n                                    <YAxis axisLine={false} tickLine={false} tickFormatter={(val) => `₦${val / 1000}k`} tick={{ fill: '#6b7280', fontSize: 12 }} />\r\n                                    <Tooltip formatter={(value) => [Utils.formatCurrency(value as number), 'Amount']} />\r\n                                    <Bar dataKey=\"amount\" radius={[6, 6, 0, 0]} barSize={60}>\r\n                                        {financeData.map((entry, index) => <Cell key={`cell-${index}`} fill={entry.fill} />)}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <Card title=\"Quick Actions\">\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            <button onClick={() => onChangeView('students')} className=\"group p-4 bg-white border border-blue-100 hover:border-blue-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-blue-100 text-blue-600 rounded-full group-hover:scale-110 transition-transform\"><Plus className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-blue-700\">New Student</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('fees')} className=\"group p-4 bg-white border border-emerald-100 hover:border-emerald-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-emerald-100 text-emerald-600 rounded-full group-hover:scale-110 transition-transform\"><CreditCard className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-emerald-700\">Record Fee</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('attendance')} className=\"group p-4 bg-white border border-rose-100 hover:border-rose-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-rose-100 text-rose-600 rounded-full group-hover:scale-110 transition-transform\"><CalendarIcon className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-rose-700\">Attendance</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('id_cards')} className=\"group p-4 bg-white border border-orange-100 hover:border-orange-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-orange-100 text-orange-600 rounded-full group-hover:scale-110 transition-transform\"><BadgeCheck className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-orange-700\">ID Cards</span>\r\n                            </button>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n                <div className=\"space-y-6\">\r\n                    <Card title=\"Student Population\">\r\n                        <div className=\"h-56 w-full relative min-h-[224px]\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie data={genderData} cx=\"50%\" cy=\"50%\" innerRadius={60} outerRadius={80} paddingAngle={5} dataKey=\"value\">\r\n                                        {genderData.map((entry, index) => <Cell key={`cell-${index}`} fill={entry.color} strokeWidth={0} />)}\r\n                                    </Pie>\r\n                                    <Tooltip />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                            <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\r\n                                <span className=\"text-3xl font-bold text-gray-900\">{totalStudents}</span>\r\n                                <span className=\"text-xs text-gray-500 font-medium uppercase\">Students</span>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                    <Card title=\"Recent Transactions\">\r\n                        <div className=\"space-y-4 mt-2\">\r\n                            {payments.slice(-4).reverse().map(p => {\r\n                                const s = students.find(std => std.id === p.student_id);\r\n                                return (\r\n                                    <div key={p.id} className=\"flex items-center gap-3 pb-3 border-b border-gray-100 last:border-0 last:pb-0\">\r\n                                        <div className=\"h-10 w-10 rounded-full bg-emerald-50 text-emerald-600 flex items-center justify-center flex-shrink-0 border border-emerald-100\"><DollarSign className=\"h-5 w-5\" /></div>\r\n                                        <div className=\"min-w-0 flex-1\">\r\n                                            <p className=\"text-sm font-semibold text-gray-900 truncate\">{s?.names || 'Unknown Student'}</p>\r\n                                            <p className=\"text-xs text-gray-500\">School Fees Payment</p>\r\n                                        </div>\r\n                                        <div className=\"text-sm font-bold text-emerald-600\">+{Utils.formatCurrency(p.amount)}</div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            {payments.length === 0 && <p className=\"text-gray-400 text-sm text-center py-4 italic\">No recent payments recorded.</p>}\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/button.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({ className, variant = 'primary', size = 'md', ...props }) => {\r\n    const base = \"inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none\";\r\n    const variants = {\r\n        primary: \"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm\",\r\n        secondary: \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500\",\r\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm\",\r\n        ghost: \"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500\"\r\n    };\r\n    const sizes = {\r\n        sm: \"h-8 px-3 text-sm\",\r\n        md: \"h-10 px-4 py-2\"\r\n    };\r\n    return <button className={`${base} ${variants[variant]} ${sizes[size]} ${className || ''}`} {...props} />;\r\n};\r\n"],"names":[],"mappings":";;;;;;AAOO,MAAM,SAAgC,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,GAAG,OAAO;IACnG,MAAM,OAAO;IACb,MAAM,WAAW;QACb,SAAS;QACT,WAAW;QACX,QAAQ;QACR,OAAO;IACX;IACA,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;IACR;IACA,qBAAO,6LAAC;QAAO,WAAW,GAAG,KAAK,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,IAAI;QAAG,GAAG,KAAK;;;;;;AACzG;KAba"}},
    {"offset": {"line": 1502, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/input.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Input: React.FC<InputProps> = ({ label, className, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <input className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props} />\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,QAA8B,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,OAAO,iBACtE,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAM,WAAW,CAAC,6MAA6M,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;;;;;;;;;;;;KAHzP"}},
    {"offset": {"line": 1543, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/select.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Select: React.FC<SelectProps> = ({ label, className, children, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <select className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props}>\r\n            {children}\r\n        </select>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,SAAgC,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,iBAClF,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAO,WAAW,CAAC,mLAAmL,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;0BAChO;;;;;;;;;;;;KAJA"}},
    {"offset": {"line": 1585, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/modal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    children?: React.ReactNode;\r\n    size?: 'sm' | 'md' | 'lg' | 'xl';\r\n}\r\n\r\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children, size = 'md' }) => {\r\n    if (!isOpen) return null;\r\n    const sizes = {\r\n        sm: \"max-w-md\",\r\n        md: \"max-w-lg sm:max-w-2xl\",\r\n        lg: \"max-w-4xl\",\r\n        xl: \"max-w-6xl\"\r\n    };\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200 overflow-y-auto backdrop-blur-sm\">\r\n            <div className={`relative w-full ${sizes[size]} rounded-xl bg-white shadow-2xl my-8 flex flex-col max-h-[90vh]`}>\r\n                <div className=\"flex items-center justify-between border-b p-4 bg-gray-50 rounded-t-xl shrink-0\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n                    <button onClick={onClose} className=\"rounded-full p-1 hover:bg-gray-200 transition-colors\">\r\n                        <X className=\"h-5 w-5 text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n                <div className=\"p-6 overflow-y-auto\">{children}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;;;AAUO,MAAM,QAA8B,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,IAAI,EAAE;IACzF,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;IACR;IACA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAW,CAAC,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,+DAA+D,CAAC;;8BAC3G,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAGrB,6LAAC;oBAAI,WAAU;8BAAuB;;;;;;;;;;;;;;;;;AAItD;KArBa"}},
    {"offset": {"line": 1668, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/StudentsView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus, Search, User, Edit, Trash2, UserCheck } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface StudentsViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    onAdd: (s: Types.Student) => void;\r\n    onUpdate: (s: Types.Student) => void;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport const StudentsView: React.FC<StudentsViewProps> = ({\r\n    students, classes, onAdd, onUpdate, onDelete\r\n}) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [filterClass, setFilterClass] = useState('all');\r\n    const [search, setSearch] = useState('');\r\n\r\n    const [formData, setFormData] = useState<Partial<Types.Student>>({});\r\n    const { addToast } = useToast();\r\n\r\n    const handleEdit = (s: Types.Student) => {\r\n        setFormData(s);\r\n        setEditingId(s.id);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        setFormData({\r\n            names: '', student_no: '', gender: 'Male', class_id: classes[0]?.id || '',\r\n            dob: '', parent_name: '', parent_phone: '', address: ''\r\n        });\r\n        setEditingId(null);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (editingId) {\r\n            onUpdate({ ...formData as Types.Student, updated_at: Date.now() });\r\n            addToast('Student updated successfully', 'success');\r\n        } else {\r\n            onAdd({\r\n                ...formData as Types.Student,\r\n                id: Utils.generateId(),\r\n                created_at: Date.now(),\r\n                updated_at: Date.now()\r\n            });\r\n            addToast('Student registered successfully', 'success');\r\n        }\r\n        setShowModal(false);\r\n    };\r\n\r\n    const filteredStudents = students.filter(s => {\r\n        const matchesClass = filterClass === 'all' || s.class_id === filterClass;\r\n        const matchesSearch = s.names.toLowerCase().includes(search.toLowerCase()) || s.student_no.toLowerCase().includes(search.toLowerCase());\r\n        return matchesClass && matchesSearch;\r\n    });\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Student Directory</h1>\r\n                    <p className=\"text-gray-500\">Manage student admissions and records</p>\r\n                </div>\r\n                <Button onClick={handleCreate}><Plus className=\"h-4 w-4 mr-2\" /> Register Student</Button>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col md:flex-row gap-4 bg-white p-4 rounded-lg border shadow-sm\">\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by name or admission no...\"\r\n                        className=\"pl-9 w-full h-10 rounded-md border border-gray-300 text-sm focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"w-full md:w-64\">\r\n                    <select\r\n                        className=\"w-full h-10 rounded-md border border-gray-300 text-sm px-3 focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                        value={filterClass}\r\n                        onChange={e => setFilterClass(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">All Classes</option>\r\n                        {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {filteredStudents.map(s => {\r\n                    const cls = classes.find(c => c.id === s.class_id)?.name || 'Unknown';\r\n                    return (\r\n                        <Card key={s.id} className=\"hover:border-brand-300 transition-colors group relative overflow-hidden\">\r\n                            <div className=\"flex flex-col items-center text-center p-2\">\r\n                                <div className=\"h-20 w-20 rounded-full bg-gray-200 mb-4 flex items-center justify-center overflow-hidden border-4 border-white shadow-sm\">\r\n                                    {s.passport_media ? (\r\n                                        <img src={s.passport_media} alt={s.names} className=\"h-full w-full object-cover\" />\r\n                                    ) : (\r\n                                        <User className=\"h-10 w-10 text-gray-400\" />\r\n                                    )}\r\n                                </div>\r\n                                <h3 className=\"font-bold text-gray-900 line-clamp-1\">{s.names}</h3>\r\n                                <span className=\"text-xs font-mono text-gray-500 mb-2\">{s.student_no}</span>\r\n                                <span className=\"px-2 py-1 rounded-full bg-brand-50 text-brand-700 text-xs font-medium mb-4\">{cls}</span>\r\n                                <div className=\"w-full border-t pt-3 flex justify-between items-center text-xs text-gray-500\">\r\n                                    <div className=\"flex flex-col items-start\"><span className=\"font-medium text-gray-700\">{s.gender}</span><span>{s.dob}</span></div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button onClick={() => handleEdit(s)} className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600\"><Edit className=\"h-4 w-4\" /></button>\r\n                                        <button onClick={() => onDelete(s.id)} className=\"p-1.5 hover:bg-red-50 rounded text-red-500\"><Trash2 className=\"h-4 w-4\" /></button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    );\r\n                })}\r\n                {filteredStudents.length === 0 && (\r\n                    <div className=\"col-span-full py-12 text-center text-gray-500 border-2 border-dashed rounded-xl\">\r\n                        <div className=\"mx-auto h-12 w-12 text-gray-300 mb-3\"><UserCheck className=\"h-full w-full\" /></div>\r\n                        <p>No students found matching your criteria.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title={editingId ? \"Edit Student\" : \"Register New Student\"}>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <Input label=\"Full Name\" required value={formData.names} onChange={e => setFormData({ ...formData, names: e.target.value })} placeholder=\"Surname Firstname\" />\r\n                        <Input label=\"Admission Number\" required value={formData.student_no} onChange={e => setFormData({ ...formData, student_no: e.target.value })} />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <Select label=\"Gender\" value={formData.gender} onChange={e => setFormData({ ...formData, gender: e.target.value as any })}>\r\n                            <option value=\"Male\">Male</option>\r\n                            <option value=\"Female\">Female</option>\r\n                        </Select>\r\n                        <Select label=\"Class\" value={formData.class_id} onChange={e => setFormData({ ...formData, class_id: e.target.value })}>\r\n                            <option value=\"\">Select Class</option>\r\n                            {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                        </Select>\r\n                    </div>\r\n                    <Input label=\"Date of Birth\" type=\"date\" value={formData.dob} onChange={e => setFormData({ ...formData, dob: e.target.value })} />\r\n                    <div className=\"border-t pt-4 mt-2\">\r\n                        <h4 className=\"text-sm font-bold text-gray-900 mb-3 uppercase tracking-wide\">Parent/Guardian Info</h4>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <Input label=\"Parent Name\" value={formData.parent_name} onChange={e => setFormData({ ...formData, parent_name: e.target.value })} />\r\n                            <Input label=\"Phone Number\" value={formData.parent_phone} onChange={e => setFormData({ ...formData, parent_phone: e.target.value })} />\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                            <Input label=\"Residential Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                        </div>\r\n                    </div>\r\n                    <Button type=\"submit\" className=\"w-full mt-4\">{editingId ? 'Update Record' : 'Complete Registration'}</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2285, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/ClassesView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { BookOpen, User, Library, Search } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Select } from '@/components/ui/select';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface ClassesViewProps {\r\n    classes: Types.Class[];\r\n    teachers: Types.Teacher[];\r\n    onUpdate: (c: Types.Class) => void;\r\n}\r\n\r\nexport const ClassesView: React.FC<ClassesViewProps> = ({ classes, teachers, onUpdate }) => {\r\n    const [editingClass, setEditingClass] = useState<Types.Class | null>(null);\r\n    const [searchSubject, setSearchSubject] = useState('');\r\n    const [newSubject, setNewSubject] = useState('');\r\n    const { addToast } = useToast();\r\n\r\n    const allKnownSubjects = Array.from(new Set([\r\n        ...Utils.PRESET_PRESCHOOL_SUBJECTS,\r\n        ...Utils.PRESET_PRIMARY_SUBJECTS,\r\n        'French', 'Music', 'Phonics', 'Handwriting', 'Diction', 'Home Economics', 'Agricultural Science',\r\n        'History', 'Geography', 'Literature', 'Coding/Robotics'\r\n    ])).sort();\r\n\r\n    const handleEdit = (cls: Types.Class) => {\r\n        const currentSubjects = cls.subjects ?? Utils.getSubjectsForClass(cls);\r\n        setEditingClass({ ...cls, subjects: currentSubjects });\r\n    };\r\n\r\n    const handleSave = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (editingClass) {\r\n            onUpdate({ ...editingClass, updated_at: Date.now() });\r\n            addToast('Class configuration updated', 'success');\r\n            setEditingClass(null);\r\n        }\r\n    };\r\n\r\n    const toggleSubject = (subj: string) => {\r\n        if (!editingClass) return;\r\n        const current = editingClass.subjects || [];\r\n        if (current.includes(subj)) {\r\n            setEditingClass({ ...editingClass, subjects: current.filter(s => s !== subj) });\r\n        } else {\r\n            setEditingClass({ ...editingClass, subjects: [...current, subj] });\r\n        }\r\n    };\r\n\r\n    const applyPreset = (type: 'nursery' | 'primary') => {\r\n        if (!editingClass) return;\r\n        const subjects = type === 'nursery' ? Utils.PRESET_PRESCHOOL_SUBJECTS : Utils.PRESET_PRIMARY_SUBJECTS;\r\n        setEditingClass({ ...editingClass, subjects: [...subjects] });\r\n    };\r\n\r\n    const addCustomSubject = () => {\r\n        if (!editingClass || !newSubject.trim()) return;\r\n        const subj = newSubject.trim();\r\n        const current = editingClass.subjects || [];\r\n        if (!current.includes(subj)) {\r\n            setEditingClass({ ...editingClass, subjects: [...current, subj] });\r\n            addToast(`Added ${subj}`, 'success');\r\n        }\r\n        setNewSubject('');\r\n    };\r\n\r\n    const activeSubjects = editingClass?.subjects || [];\r\n    const filteredPool = allKnownSubjects.filter(s => s.toLowerCase().includes(searchSubject.toLowerCase()));\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Class & Subject Configuration</h1>\r\n                <p className=\"text-gray-500\">Assign teachers and manage subjects for each class.</p>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {classes.map(c => {\r\n                    const teacher = teachers.find(t => t.id === c.class_teacher_id);\r\n                    const subjectCount = (c.subjects ?? Utils.getSubjectsForClass(c)).length;\r\n                    return (\r\n                        <Card key={c.id} className=\"hover:border-brand-400 transition-all cursor-pointer group\" >\r\n                            <div className=\"flex flex-col h-full justify-between\">\r\n                                <div>\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <h3 className=\"font-bold text-xl text-gray-800\">{c.name}</h3>\r\n                                        <div className=\"bg-gray-100 p-2 rounded-full group-hover:bg-brand-50 transition-colors\"><BookOpen className=\"h-5 w-5 text-gray-500 group-hover:text-brand-600\" /></div>\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600 mb-4 flex items-center gap-2\">\r\n                                        <User className=\"h-4 w-4 text-gray-400\" />\r\n                                        {teacher ? <span className=\"font-medium text-brand-700\">{teacher.name}</span> : <span className=\"italic text-gray-400\">No Class Teacher</span>}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"border-t pt-4 flex justify-between items-center\">\r\n                                    <span className=\"text-xs font-medium bg-gray-100 px-2 py-1 rounded text-gray-600\">{subjectCount} Subjects</span>\r\n                                    <Button size=\"sm\" variant=\"secondary\" onClick={() => handleEdit(c)}>Configure</Button>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <Modal isOpen={!!editingClass} onClose={() => setEditingClass(null)} title={`Configure ${editingClass?.name}`} size=\"lg\">\r\n                {editingClass && (\r\n                    <form onSubmit={handleSave} className=\"space-y-6\">\r\n                        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-100\">\r\n                            <Select label=\"Class Teacher\" value={editingClass.class_teacher_id || ''} onChange={e => setEditingClass({ ...editingClass, class_teacher_id: e.target.value || null })}>\r\n                                <option value=\"\">-- Select Teacher --</option>\r\n                                {teachers.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <h4 className=\"font-bold text-gray-900 flex items-center gap-2\"><Library className=\"h-4 w-4\" /> Assigned Subjects</h4>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button type=\"button\" onClick={() => applyPreset('nursery')} className=\"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200 font-medium\">Reset to Nursery</button>\r\n                                    <button type=\"button\" onClick={() => applyPreset('primary')} className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 font-medium\">Reset to Primary</button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2 mb-4\">\r\n                                <input className=\"flex-1 h-9 rounded-md border border-gray-300 px-3 text-sm focus:ring-brand-500 focus:outline-none\" placeholder=\"Add custom subject...\" value={newSubject} onChange={e => setNewSubject(e.target.value)} onKeyDown={e => { if (e.key === 'Enter') { e.preventDefault(); addCustomSubject(); } }} />\r\n                                <Button type=\"button\" size=\"sm\" onClick={addCustomSubject}>Add</Button>\r\n                            </div>\r\n                            <div className=\"mb-2 relative\">\r\n                                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400\" />\r\n                                <input className=\"w-full h-9 pl-9 rounded-md border border-gray-300 text-sm focus:ring-brand-500 focus:outline-none\" placeholder=\"Filter subjects...\" value={searchSubject} onChange={e => setSearchSubject(e.target.value)} />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-[300px] overflow-y-auto border rounded-md p-4 bg-gray-50/50\">\r\n                                {filteredPool.map(subj => {\r\n                                    const isActive = activeSubjects.includes(subj);\r\n                                    return (\r\n                                        <label key={subj} className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm ${isActive ? 'bg-brand-50 text-brand-900 font-medium border border-brand-200' : 'hover:bg-gray-100 text-gray-600 border border-transparent'}`}>\r\n                                            <input type=\"checkbox\" className=\"rounded text-brand-600 focus:ring-brand-500 h-4 w-4\" checked={isActive} onChange={() => toggleSubject(subj)} />\r\n                                            {subj}\r\n                                        </label>\r\n                                    );\r\n                                })}\r\n                                {activeSubjects.filter(s => !allKnownSubjects.includes(s) && !s.toLowerCase().includes(searchSubject.toLowerCase())).map(subj => (\r\n                                    <label key={subj} className=\"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm bg-brand-50 text-brand-900 font-medium border border-brand-200\">\r\n                                        <input type=\"checkbox\" className=\"rounded text-brand-600 focus:ring-brand-500 h-4 w-4\" checked={true} onChange={() => toggleSubject(subj)} />\r\n                                        {subj} (Custom)\r\n                                    </label>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"mt-2 text-right text-xs text-gray-500\">{activeSubjects.length} subjects selected</div>\r\n                        </div>\r\n                        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n                            <Button type=\"button\" variant=\"secondary\" onClick={() => setEditingClass(null)}>Cancel</Button>\r\n                            <Button type=\"submit\">Save Changes</Button>\r\n                        </div>\r\n                    </form>\r\n                )}\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2844, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/GradingView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ChevronRight, Save } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Select } from '@/components/ui/select';\r\n\r\nconst ScoreInput = ({ value, max, onChange, className }: { value: number, max: number, onChange: (val: number) => void, className?: string }) => (\r\n    <input type=\"number\" min=\"0\" max={max} value={value || ''} onChange={e => { const v = parseFloat(e.target.value); if (!isNaN(v) && v <= max) onChange(v); if (e.target.value === '') onChange(0); }} className={`w-16 h-8 text-center border rounded focus:ring-2 focus:ring-brand-500 focus:outline-none ${className}`} />\r\n);\r\n\r\ninterface GradingViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    scores: Types.Score[];\r\n    settings: Types.Settings;\r\n    onSaveScores: (scores: Types.Score[]) => void;\r\n}\r\n\r\nexport const GradingView: React.FC<GradingViewProps> = ({\r\n    students, classes, scores, settings, onSaveScores\r\n}) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const classSubjects = Utils.getSubjectsForClass(currentClass);\r\n    const [selectedSubject, setSelectedSubject] = useState(classSubjects[0] || '');\r\n    const [activeTab, setActiveTab] = useState<'broadsheet' | 'report'>('broadsheet');\r\n    const [reportStudentId, setReportStudentId] = useState('');\r\n    const [previewScore, setPreviewScore] = useState<Types.Score | null>(null);\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n\r\n    useEffect(() => {\r\n        if (classSubjects.length > 0 && !classSubjects.includes(selectedSubject)) {\r\n            setSelectedSubject(classSubjects[0]);\r\n        }\r\n    }, [selectedClass, classSubjects, selectedSubject]);\r\n\r\n    const handleScoreChange = (studentId: string, field: 'ca1' | 'ca2' | 'exam', value: number) => {\r\n        const newScores = [...scores];\r\n        let score = newScores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n\r\n        if (!score) {\r\n            score = {\r\n                id: Utils.generateId(),\r\n                student_id: studentId,\r\n                class_id: selectedClass,\r\n                session: settings.current_session,\r\n                term: settings.current_term,\r\n                rows: [],\r\n                average: 0,\r\n                created_at: Date.now(),\r\n                updated_at: Date.now(),\r\n                affective: {},\r\n                psychomotor: {}\r\n            };\r\n            newScores.push(score);\r\n        }\r\n\r\n        let rowIndex = score.rows.findIndex(r => r.subject === selectedSubject);\r\n        if (rowIndex === -1) {\r\n            score.rows.push({ subject: selectedSubject, ca1: 0, ca2: 0, exam: 0, total: 0, grade: 'F', comment: '' });\r\n            rowIndex = score.rows.length - 1;\r\n        }\r\n        const row = score.rows[rowIndex];\r\n        (row as any)[field] = value;\r\n        row.total = row.ca1 + row.ca2 + row.exam;\r\n        const { grade, comment } = Utils.calculateGrade(row.total);\r\n        row.grade = grade;\r\n        row.comment = comment;\r\n        const totalScore = score.rows.reduce((acc, r) => acc + r.total, 0);\r\n        score.average = totalScore / score.rows.length;\r\n        score.total_score = totalScore;\r\n        onSaveScores(newScores);\r\n    };\r\n\r\n    const getRow = (studentId: string) => {\r\n        const score = scores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        return score?.rows.find(r => r.subject === selectedSubject) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n    };\r\n\r\n    const generateReport = () => {\r\n        if (!reportStudentId) return;\r\n        const score = scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        setPreviewScore(score || null);\r\n    };\r\n    useEffect(() => { generateReport(); }, [reportStudentId, scores, settings]);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Academic Grading</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    <button onClick={() => setActiveTab('broadsheet')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'broadsheet' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Score Entry</button>\r\n                    <button onClick={() => setActiveTab('report')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'report' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Report Cards</button>\r\n                </div>\r\n            </div>\r\n            {activeTab === 'broadsheet' && (\r\n                <Card className=\"min-h-[600px] flex flex-col\">\r\n                    <div className=\"flex gap-4 mb-6 p-4 bg-gray-50 border-b\">\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>\r\n                                {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Subject\" value={selectedSubject} onChange={e => setSelectedSubject(e.target.value)}>\r\n                                {classSubjects.map(s => <option key={s} value={s}>{s}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto flex-1\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-100 text-gray-700 uppercase text-xs font-semibold\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-3 sticky left-0 bg-gray-100\">Student Name</th>\r\n                                    <th className=\"px-4 py-3 text-center\">CA 1 (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">CA 2 (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Exam (60)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Total (100)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Grade</th>\r\n                                    <th className=\"px-4 py-3\">Remark</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-200\">\r\n                                {activeStudents.map(s => {\r\n                                    const row = getRow(s.id);\r\n                                    return (\r\n                                        <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                            <td className=\"px-4 py-2 font-medium text-gray-900 sticky left-0 bg-white\">{s.names} <div className=\"text-xs text-gray-500 font-normal\">{s.student_no}</div></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca1} max={20} onChange={(v) => handleScoreChange(s.id, 'ca1', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca2} max={20} onChange={(v) => handleScoreChange(s.id, 'ca2', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.exam} max={60} onChange={(v) => handleScoreChange(s.id, 'exam', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center font-bold\"><span className={row.total < 40 ? 'text-red-600' : 'text-gray-900'}>{row.total}</span></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><span className={`px-2 py-1 rounded text-xs font-bold ${row.grade === 'A' ? 'bg-green-100 text-green-800' : row.grade === 'F' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'}`}>{row.grade}</span></td>\r\n                                            <td className=\"px-4 py-2 text-xs text-gray-500\">{row.comment}</td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                                {activeStudents.length === 0 && <tr><td colSpan={7} className=\"text-center py-8 text-gray-500\">No students in this class.</td></tr>}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </Card>\r\n            )}\r\n\r\n            {activeTab === 'report' && (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"lg:col-span-1 space-y-4\">\r\n                        <Card title=\"Selection\">\r\n                            <div className=\"space-y-4\">\r\n                                <Select label=\"Class\" value={selectedClass} onChange={e => { setSelectedClass(e.target.value); setReportStudentId(''); }}>\r\n                                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                                </Select>\r\n                                <div className=\"space-y-1 max-h-[400px] overflow-y-auto border rounded-md\">\r\n                                    {activeStudents.map(s => (\r\n                                        <button key={s.id} onClick={() => setReportStudentId(s.id)} className={`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex justify-between ${reportStudentId === s.id ? 'bg-brand-50 text-brand-700 font-medium' : 'text-gray-700'}`}>{s.names}<ChevronRight className=\"h-4 w-4 opacity-50\" /></button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"lg:col-span-3\">\r\n                        {previewScore && reportStudentId ? (\r\n                            <div className=\"bg-white border shadow-lg p-8 print:shadow-none print:border-none print:w-full\" id=\"report-card\">\r\n                                <div className=\"text-center border-b-2 border-brand-600 pb-4 mb-6\">\r\n                                    <h1 className=\"text-3xl font-bold text-brand-900 uppercase tracking-wider\">{settings.school_name}</h1>\r\n                                    <p className=\"text-gray-600\">{settings.school_address}</p>\r\n                                    <p className=\"text-gray-600 text-sm mt-1\">{settings.school_email} | {settings.school_phone}</p>\r\n                                </div>\r\n                                <table className=\"w-full border-collapse border border-gray-300 text-sm mb-6\">\r\n                                    <thead className=\"bg-brand-50 text-brand-900\">\r\n                                        <tr>\r\n                                            <th className=\"border border-gray-300 p-2 text-left\">Subject</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-center w-16\">Total</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-center w-16\">Grade</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-left\">Remark</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {classSubjects.map(subj => {\r\n                                            const row = previewScore.rows.find(r => r.subject === subj) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n                                            return (\r\n                                                <tr key={subj}>\r\n                                                    <td className=\"border border-gray-300 p-2 font-medium\">{subj}</td>\r\n                                                    <td className=\"border border-gray-300 p-2 text-center font-bold\">{row.total || '-'}</td>\r\n                                                    <td className={`border border-gray-300 p-2 text-center font-bold ${row.grade === 'F' ? 'text-red-600' : 'text-brand-700'}`}>{row.grade}</td>\r\n                                                    <td className=\"border border-gray-300 p-2 text-xs italic text-gray-500\">{row.comment}</td>\r\n                                                </tr>\r\n                                            );\r\n                                        })}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        ) : <div className=\"h-full border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center p-12 text-gray-400\">Select a student</div>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3579, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/AttendanceView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Save, Calendar as CalendarIcon } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface AttendanceViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    attendance: Types.Attendance[];\r\n    settings: Types.Settings;\r\n    onSave: (att: Types.Attendance[]) => void;\r\n}\r\n\r\nexport const AttendanceView: React.FC<AttendanceViewProps> = ({\r\n    students, classes, attendance, settings, onSave\r\n}) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [date, setDate] = useState(Utils.getTodayString());\r\n    const { addToast } = useToast();\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const existingRecord = attendance.find(a => a.class_id === selectedClass && a.date === date && a.session === settings.current_session && a.term === settings.current_term);\r\n    const [currentStatuses, setCurrentStatuses] = useState<Record<string, 'present' | 'absent' | 'late'>>({});\r\n\r\n    useEffect(() => {\r\n        const initial: Record<string, 'present' | 'absent' | 'late'> = {};\r\n        activeStudents.forEach(s => {\r\n            const rec = existingRecord?.records.find(r => r.student_id === s.id);\r\n            initial[s.id] = rec ? rec.status : 'present';\r\n        });\r\n        setCurrentStatuses(initial);\r\n    }, [selectedClass, date, existingRecord, activeStudents.length]);\r\n\r\n    const handleSave = () => {\r\n        const records = activeStudents.map(s => ({ student_id: s.id, status: currentStatuses[s.id] || 'present' }));\r\n        const newEntry: Types.Attendance = {\r\n            id: existingRecord?.id || Utils.generateId(), date, class_id: selectedClass, session: settings.current_session, term: settings.current_term, records, created_at: existingRecord?.created_at || Date.now(), updated_at: Date.now()\r\n        };\r\n        const others = attendance.filter(a => a.id !== newEntry.id);\r\n        onSave([...others, newEntry]);\r\n        addToast('Attendance saved successfully', 'success');\r\n    };\r\n\r\n    const markAll = (status: 'present' | 'absent') => {\r\n        const update = { ...currentStatuses };\r\n        activeStudents.forEach(s => update[s.id] = status);\r\n        setCurrentStatuses(update);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Attendance Register</h1><p className=\"text-gray-500\">Daily roll call management</p></div>\r\n                <Button onClick={handleSave}><Save className=\"h-4 w-4 mr-2\" /> Save Register</Button>\r\n            </div>\r\n            <Card>\r\n                <div className=\"flex gap-4 mb-6 items-end border-b pb-4\">\r\n                    <div className=\"w-64\"><Select label=\"Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select></div>\r\n                    <div className=\"w-64\"><Input label=\"Date\" type=\"date\" value={date} onChange={e => setDate(e.target.value)} /></div>\r\n                    <div className=\"flex-1 flex justify-end gap-2\"><Button size=\"sm\" variant=\"secondary\" onClick={() => markAll('present')}>Mark All Present</Button><Button size=\"sm\" variant=\"secondary\" onClick={() => markAll('absent')}>Mark All Absent</Button></div>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {activeStudents.map(s => (\r\n                        <div key={s.id} className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\">\r\n                            <div><div className=\"font-bold text-gray-900\">{s.names}</div><div className=\"text-xs text-gray-500\">{s.student_no}</div></div>\r\n                            <div className=\"flex bg-gray-100 rounded-md p-1\">\r\n                                {(['present', 'late', 'absent'] as const).map(status => (\r\n                                    <button key={status} onClick={() => setCurrentStatuses(prev => ({ ...prev, [s.id]: status }))} className={`px-3 py-1 text-xs font-medium rounded capitalize transition-colors ${currentStatuses[s.id] === status ? (status === 'present' ? 'bg-green-500 text-white' : status === 'late' ? 'bg-yellow-500 text-white' : 'bg-red-500 text-white') : 'text-gray-500 hover:bg-gray-200'}`}>{status}</button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    {activeStudents.length === 0 && <p className=\"text-gray-500 italic col-span-3 text-center py-8\">No students in this class.</p>}\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3893, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/BursaryView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus, Printer, Trash2, User } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\nconst ReceiptTemplate = ({ payment, student, cls, settings, balance }: { payment: Types.Payment, student: Types.Student, cls?: Types.Class, settings: Types.Settings, balance: number }) => {\r\n    return (\r\n        <div className=\"bg-white p-8 max-w-2xl mx-auto border border-gray-200 text-sm\" id=\"receipt-print\">\r\n            <div className=\"text-center mb-8 border-b pb-4\">\r\n                {settings.logo_media && <img src={settings.logo_media} alt=\"Logo\" className=\"h-16 mx-auto mb-2\" />}\r\n                <h1 className=\"text-2xl font-bold uppercase\">{settings.school_name}</h1>\r\n                <p>{settings.school_address}</p>\r\n                <p>{settings.school_email} | {settings.school_phone}</p>\r\n            </div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div><h2 className=\"text-lg font-bold\">PAYMENT RECEIPT</h2><p>Receipt No: #{payment.id.substring(0, 8).toUpperCase()}</p><p>Date: {payment.date}</p></div>\r\n                <div className=\"text-right\"><p>Session: {payment.session}</p><p>Term: {payment.term}</p></div>\r\n            </div>\r\n            <div className=\"mb-6\"><p><strong>Received From:</strong> {student.names} ({student.student_no})</p><p><strong>Class:</strong> {cls?.name || 'N/A'}</p></div>\r\n            <div className=\"mb-6\">\r\n                <table className=\"w-full border-collapse border border-gray-300\">\r\n                    <thead><tr className=\"bg-gray-100\"><th className=\"border border-gray-300 p-2 text-left\">Description</th><th className=\"border border-gray-300 p-2 text-right\">Amount</th></tr></thead>\r\n                    <tbody><tr><td className=\"border border-gray-300 p-2\">School Fees Payment {payment.method && ` via ${payment.method}`} {payment.remark && ` (${payment.remark})`}</td><td className=\"border border-gray-300 p-2 text-right\">{Utils.formatCurrency(payment.amount)}</td></tr></tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"flex justify-end mb-12\">\r\n                <div className=\"text-right\"><p className=\"text-lg font-bold\">Total Paid: {Utils.formatCurrency(payment.amount)}</p><p className=\"text-sm text-gray-500\">Balance Remaining: {Utils.formatCurrency(balance)}</p></div>\r\n            </div>\r\n            <div className=\"flex justify-between mt-12 pt-4 border-t\"><div className=\"text-center\"><p className=\"border-t border-black px-8 mt-8 pt-2\">Bursar's Signature</p></div><div className=\"text-center\"><p className=\"italic text-xs\">Thank you for your business.</p></div></div>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface BursaryViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    expenses: Types.Expense[];\r\n    settings: Types.Settings;\r\n    onAddPayment: (p: Types.Payment) => void;\r\n    onAddFee: (f: Types.FeeStructure) => void;\r\n    onAddExpense: (e: Types.Expense) => void;\r\n    onDeletePayment: (id: string) => void;\r\n    onDeleteFee: (id: string) => void;\r\n}\r\n\r\nexport const BursaryView: React.FC<BursaryViewProps> = ({\r\n    students, classes, fees, payments, expenses, settings, onAddPayment, onAddFee, onAddExpense, onDeletePayment, onDeleteFee\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'fees' | 'expenses' | 'structure'>('fees');\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedStudent, setSelectedStudent] = useState<string | null>(null);\r\n\r\n    // Modals\r\n    const [showPayModal, setShowPayModal] = useState(false);\r\n    const [showExpenseModal, setShowExpenseModal] = useState(false);\r\n    const [showFeeModal, setShowFeeModal] = useState(false);\r\n    const [receiptPayment, setReceiptPayment] = useState<Types.Payment | null>(null);\r\n    const { addToast } = useToast();\r\n\r\n    // Forms\r\n    const [payAmount, setPayAmount] = useState('');\r\n    const [payMethod, setPayMethod] = useState('cash');\r\n    const [payRemark, setPayRemark] = useState('');\r\n\r\n    const [expTitle, setExpTitle] = useState('');\r\n    const [expAmount, setExpAmount] = useState('');\r\n    const [expCat, setExpCat] = useState('supplies');\r\n    const [expDate, setExpDate] = useState(Utils.getTodayString());\r\n\r\n    const [feeName, setFeeName] = useState('');\r\n    const [feeAmount, setFeeAmount] = useState('');\r\n    const [feeClass, setFeeClass] = useState('');\r\n\r\n    const handlePaymentSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedStudent) return;\r\n        onAddPayment({\r\n            id: Utils.generateId(), student_id: selectedStudent, amount: Number(payAmount), method: payMethod as any, remark: payRemark, date: Utils.getTodayString(), session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Payment recorded successfully', 'success'); setShowPayModal(false); setPayAmount(''); setPayRemark('');\r\n    };\r\n\r\n    const handleExpenseSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddExpense({\r\n            id: Utils.generateId(), title: expTitle, amount: Number(expAmount), category: expCat as any, date: expDate, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Expense recorded', 'success'); setShowExpenseModal(false); setExpTitle(''); setExpAmount('');\r\n    };\r\n\r\n    const handleFeeSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddFee({\r\n            id: Utils.generateId(), name: feeName, amount: Number(feeAmount), class_id: feeClass || null, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Fee structure added', 'success'); setShowFeeModal(false); setFeeName(''); setFeeAmount(''); setFeeClass('');\r\n    };\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const student = students.find(s => s.id === selectedStudent);\r\n    const studentPayments = selectedStudent ? payments.filter(p => p.student_id === selectedStudent) : [];\r\n    const applicableFees = student ? fees.filter(f => f.session === settings.current_session && f.term === settings.current_term && (f.class_id === null || f.class_id === student.class_id)) : [];\r\n    const { totalBill, totalPaid, balance } = student ? Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term) : { totalBill: 0, totalPaid: 0, balance: 0 };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Bursary & Finance</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    {(['fees', 'expenses', 'structure'] as const).map(tab => (\r\n                        <button key={tab} onClick={() => setActiveTab(tab)} className={`px-4 py-2 text-sm font-medium rounded-md capitalize ${activeTab === tab ? 'bg-white shadow-sm text-brand-700' : 'text-gray-600 hover:text-gray-900'}`}>{tab}</button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {activeTab === 'fees' && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"md:col-span-1 space-y-4\">\r\n                        <Card className=\"h-full\">\r\n                            <div className=\"mb-4\"><Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select></div>\r\n                            <div className=\"space-y-1 h-[600px] overflow-y-auto\">\r\n                                {activeStudents.map(s => {\r\n                                    const bal = Utils.getStudentBalance(s, fees, payments, settings.current_session, settings.current_term).balance;\r\n                                    return (\r\n                                        <div key={s.id} onClick={() => setSelectedStudent(s.id)} className={`p-3 rounded-md cursor-pointer flex justify-between items-center text-sm ${selectedStudent === s.id ? 'bg-brand-50 border-brand-200 border' : 'hover:bg-gray-50'}`}>\r\n                                            <div><div className=\"font-medium\">{s.names}</div><div className=\"text-xs text-gray-500\">{s.student_no}</div></div>\r\n                                            <div className={`font-mono ${bal > 0 ? 'text-red-600' : 'text-green-600'}`}>{bal > 0 ? `-${Utils.formatCurrency(bal)}` : 'Paid'}</div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                        {selectedStudent && student ? (\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"grid grid-cols-3 gap-4\">\r\n                                    <Card className=\"bg-blue-50 border-blue-100 p-4\"><div className=\"text-sm text-blue-600\">Total Bill</div><div className=\"text-xl font-bold text-blue-900\">{Utils.formatCurrency(totalBill)}</div></Card>\r\n                                    <Card className=\"bg-green-50 border-green-100 p-4\"><div className=\"text-sm text-green-600\">Total Paid</div><div className=\"text-xl font-bold text-green-900\">{Utils.formatCurrency(totalPaid)}</div></Card>\r\n                                    <Card className=\"bg-red-50 border-red-100 p-4\"><div className=\"text-sm text-red-600\">Outstanding</div><div className=\"text-xl font-bold text-red-900\">{Utils.formatCurrency(balance)}</div></Card>\r\n                                </div>\r\n                                <Card title=\"Bill Breakdown\">\r\n                                    <table className=\"w-full text-sm text-left\">\r\n                                        <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-2\">Fee Head</th><th className=\"px-4 py-2 text-right\">Amount</th></tr></thead>\r\n                                        <tbody className=\"divide-y divide-gray-100\">\r\n                                            {applicableFees.map(fee => <tr key={fee.id}><td className=\"px-4 py-2\">{fee.name}</td><td className=\"px-4 py-2 text-right font-mono\">{Utils.formatCurrency(fee.amount)}</td></tr>)}\r\n                                            <tr className=\"bg-gray-50 font-bold\"><td className=\"px-4 py-2\">Total Billed</td><td className=\"px-4 py-2 text-right\">{Utils.formatCurrency(totalBill)}</td></tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </Card>\r\n                                <Card title=\"Payment History\" action={<Button size=\"sm\" onClick={() => setShowPayModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Record Payment</Button>}>\r\n                                    <div className=\"space-y-3 mt-2\">\r\n                                        {studentPayments.length === 0 && <div className=\"text-center py-4 text-gray-500\">No payments recorded.</div>}\r\n                                        {studentPayments.map(p => (\r\n                                            <div key={p.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100\">\r\n                                                <div><div className=\"font-medium text-gray-900\">{Utils.formatCurrency(p.amount)}</div><div className=\"text-xs text-gray-500\">{p.date} • {p.method}</div>{p.remark && <div className=\"text-xs text-gray-500 italic\">\"{p.remark}\"</div>}</div>\r\n                                                <div className=\"flex gap-2\"><button onClick={() => setReceiptPayment(p)} title=\"Print Receipt\" className=\"p-1 text-gray-400 hover:text-blue-600\"><Printer className=\"h-4 w-4\" /></button><button onClick={() => onDeletePayment(p.id)} title=\"Delete\" className=\"p-1 text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </Card>\r\n                            </div>\r\n                        ) : <div className=\"h-full flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-200 rounded-lg p-12\"><User className=\"h-12 w-12 mb-4 opacity-50\" /><p>Select a student to view fees and payments</p></div>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'expenses' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-end\"><Button onClick={() => setShowExpenseModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Record Expense</Button></div>\r\n                    <Card>\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Date</th><th className=\"px-4 py-3\">Title</th><th className=\"px-4 py-3\">Category</th><th className=\"px-4 py-3 text-right\">Amount</th></tr></thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {expenses.map(e => (\r\n                                    <tr key={e.id}>\r\n                                        <td className=\"px-4 py-3\">{e.date}</td><td className=\"px-4 py-3\">{e.title}</td><td className=\"px-4 py-3 capitalize\"><span className=\"px-2 py-1 bg-gray-100 rounded text-xs\">{e.category}</span></td><td className=\"px-4 py-3 text-right font-mono text-red-600\">-{Utils.formatCurrency(e.amount)}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'structure' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-end\"><Button onClick={() => setShowFeeModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Fee Head</Button></div>\r\n                    <Card title=\"Current Session Fee Structure\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Fee Name</th><th className=\"px-4 py-3\">Class Scope</th><th className=\"px-4 py-3 text-right\">Amount</th><th className=\"px-4 py-3\"></th></tr></thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {fees.filter(f => f.session === settings.current_session && f.term === settings.current_term).map(f => {\r\n                                    const clsName = f.class_id ? classes.find(c => c.id === f.class_id)?.name : 'All Classes';\r\n                                    return (\r\n                                        <tr key={f.id}>\r\n                                            <td className=\"px-4 py-3 font-medium\">{f.name}</td>\r\n                                            <td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs\">{clsName}</span></td>\r\n                                            <td className=\"px-4 py-3 text-right font-mono\">{Utils.formatCurrency(f.amount)}</td>\r\n                                            <td className=\"px-4 py-3 text-right\"><button onClick={() => onDeleteFee(f.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n\r\n            <Modal isOpen={showPayModal} onClose={() => setShowPayModal(false)} title=\"Record Payment\">\r\n                <form onSubmit={handlePaymentSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Amount (NGN)\" type=\"number\" required value={payAmount} onChange={e => setPayAmount(e.target.value)} />\r\n                    <Select label=\"Payment Method\" value={payMethod} onChange={e => setPayMethod(e.target.value)}><option value=\"cash\">Cash</option><option value=\"transfer\">Bank Transfer</option><option value=\"pos\">POS</option></Select>\r\n                    <Input label=\"Remark/Note\" value={payRemark} onChange={e => setPayRemark(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Payment</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={!!receiptPayment} onClose={() => setReceiptPayment(null)} title=\"Print Receipt\">\r\n                {receiptPayment && student && (\r\n                    <div className=\"overflow-y-auto max-h-[80vh]\">\r\n                        <ReceiptTemplate payment={receiptPayment} student={student} cls={classes.find(c => c.id === student.class_id)} settings={settings} balance={balance} />\r\n                        <div className=\"mt-4 flex justify-end gap-2\"><Button variant=\"secondary\" onClick={() => setReceiptPayment(null)}>Close</Button><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print</Button></div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            <Modal isOpen={showExpenseModal} onClose={() => setShowExpenseModal(false)} title=\"Record Expense\">\r\n                <form onSubmit={handleExpenseSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Title\" required value={expTitle} onChange={e => setExpTitle(e.target.value)} />\r\n                    <Input label=\"Amount\" type=\"number\" required value={expAmount} onChange={e => setExpAmount(e.target.value)} />\r\n                    <Select label=\"Category\" value={expCat} onChange={e => setExpCat(e.target.value)}><option value=\"supplies\">Supplies</option><option value=\"maintenance\">Maintenance</option><option value=\"salary\">Salary</option><option value=\"utilities\">Utilities</option><option value=\"other\">Other</option></Select>\r\n                    <Input label=\"Date\" type=\"date\" value={expDate} onChange={e => setExpDate(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Expense</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={showFeeModal} onClose={() => setShowFeeModal(false)} title=\"Add Fee Structure\">\r\n                <form onSubmit={handleFeeSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Fee Name\" required value={feeName} onChange={e => setFeeName(e.target.value)} placeholder=\"e.g. Tuition Fee\" />\r\n                    <Input label=\"Amount\" type=\"number\" required value={feeAmount} onChange={e => setFeeAmount(e.target.value)} />\r\n                    <Select label=\"Applicable Class\" value={feeClass} onChange={e => setFeeClass(e.target.value)}><option value=\"\">All Classes</option>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select>\r\n                    <Button type=\"submit\" className=\"w-full\">Create Fee</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5519, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/TeachersView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus, Trash2, Phone, MapPin } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface TeachersViewProps {\r\n    teachers: Types.Teacher[];\r\n    onAdd: (t: Types.Teacher) => void;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport const TeachersView: React.FC<TeachersViewProps> = ({ teachers, onAdd, onDelete }) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [formData, setFormData] = useState({ name: '', email: '', phone: '', address: '' });\r\n    const { addToast } = useToast();\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAdd({ ...formData, id: Utils.generateId(), created_at: Date.now(), updated_at: Date.now() });\r\n        addToast('Teacher added successfully', 'success');\r\n        setShowModal(false); setFormData({ name: '', email: '', phone: '', address: '' });\r\n    };\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Teachers Directory</h1><p className=\"text-gray-500\">Manage academic staff</p></div><Button onClick={() => setShowModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Teacher</Button></div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {teachers.map(t => (\r\n                    <Card key={t.id} className=\"flex flex-col justify-between\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                            <div className=\"flex items-center gap-3\"><div className=\"h-12 w-12 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-lg\">{t.name.charAt(0)}</div><div><h3 className=\"font-bold text-gray-900\">{t.name}</h3><span className=\"text-xs bg-purple-50 text-purple-700 px-2 py-0.5 rounded-full\">Teacher</span></div></div>\r\n                            <button onClick={() => onDelete(t.id)} className=\"text-gray-400 hover:text-red-600 transition-colors\"><Trash2 className=\"h-4 w-4\" /></button>\r\n                        </div>\r\n                        <div className=\"space-y-2 text-sm text-gray-600\"><div className=\"flex items-center gap-2\"><Phone className=\"h-3 w-3\" /> {t.phone}</div><div className=\"flex items-center gap-2\"><div className=\"h-3 w-3 flex items-center justify-center\">@</div> {t.email}</div><div className=\"flex items-center gap-2\"><MapPin className=\"h-3 w-3\" /> {t.address}</div></div>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title=\"Add New Teacher\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Full Name\" required value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} />\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Phone Number\" required value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} /><Input label=\"Email Address\" type=\"email\" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} /></div>\r\n                    <Input label=\"Residential Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Teacher</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5880, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/StaffView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus, Trash2 } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface StaffViewProps {\r\n    staff: Types.Staff[];\r\n    onAdd: (s: Types.Staff) => void;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport const StaffView: React.FC<StaffViewProps> = ({ staff, onAdd, onDelete }) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [formData, setFormData] = useState({ name: '', role: '', tasks: '', email: '', phone: '', address: '' });\r\n    const { addToast } = useToast();\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAdd({ ...formData, id: Utils.generateId(), created_at: Date.now(), updated_at: Date.now() });\r\n        addToast('Staff member added successfully', 'success');\r\n        setShowModal(false); setFormData({ name: '', role: '', tasks: '', email: '', phone: '', address: '' });\r\n    };\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Non-Academic Staff</h1><p className=\"text-gray-500\">Manage support staff and roles</p></div><Button onClick={() => setShowModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Staff</Button></div>\r\n            <div className=\"overflow-x-auto bg-white rounded-lg border shadow-sm\">\r\n                <table className=\"w-full text-sm text-left\">\r\n                    <thead className=\"bg-gray-50 text-gray-700 font-medium\"><tr><th className=\"px-4 py-3\">Name</th><th className=\"px-4 py-3\">Role</th><th className=\"px-4 py-3\">Contact</th><th className=\"px-4 py-3 text-right\">Actions</th></tr></thead>\r\n                    <tbody className=\"divide-y divide-gray-200\">\r\n                        {staff.map(s => (\r\n                            <tr key={s.id} className=\"hover:bg-gray-50\"><td className=\"px-4 py-3 font-medium text-gray-900\">{s.name}</td><td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-gray-100 rounded text-xs font-medium\">{s.role}</span></td><td className=\"px-4 py-3 text-xs\">{s.phone}</td><td className=\"px-4 py-3 text-right\"><button onClick={() => onDelete(s.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td></tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title=\"Add New Staff\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Full Name\" required value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} /><Input label=\"Job Title/Role\" required value={formData.role} onChange={e => setFormData({ ...formData, role: e.target.value })} /></div>\r\n                    <Input label=\"Assigned Tasks\" value={formData.tasks} onChange={e => setFormData({ ...formData, tasks: e.target.value })} />\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Phone\" required value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} /><Input label=\"Email\" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} /></div>\r\n                    <Input label=\"Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Staff Member</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;AAQO,MAAM,YAAsC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE;;IAC1E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QAAE,MAAM;QAAI,MAAM;QAAI,OAAO;QAAI,OAAO;QAAI,OAAO;QAAI,SAAS;IAAG;IAC5G,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAQ;IAC7B,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,MAAM;YAAE,GAAG,QAAQ;YAAE,IAAI,6HAAgB;YAAI,YAAY,KAAK,GAAG;YAAI,YAAY,KAAK,GAAG;QAAG;QAC5F,SAAS,mCAAmC;QAC5C,aAAa;QAAQ,YAAY;YAAE,MAAM;YAAI,MAAM;YAAI,OAAO;YAAI,OAAO;YAAI,OAAO;YAAI,SAAS;QAAG;IACxG;IACA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCAAoC,6LAAC;;0CAAI,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CAAuB,6LAAC;gCAAE,WAAU;0CAAgB;;;;;;;;;;;;kCAAwC,6LAAC,wIAAM;wBAAC,SAAS,IAAM,aAAa;;0CAAO,6LAAC,6MAAI;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;0BACjR,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;4BAAM,WAAU;sCAAuC,cAAA,6LAAC;;kDAAG,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAS,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAS,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAAY,6LAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAC7M,6LAAC;4BAAM,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAA,kBACP,6LAAC;oCAAc,WAAU;;sDAAmB,6LAAC;4CAAG,WAAU;sDAAuC,EAAE,IAAI;;;;;;sDAAM,6LAAC;4CAAG,WAAU;sDAAY,cAAA,6LAAC;gDAAK,WAAU;0DAAqD,EAAE,IAAI;;;;;;;;;;;sDAAa,6LAAC;4CAAG,WAAU;sDAAqB,EAAE,KAAK;;;;;;sDAAM,6LAAC;4CAAG,WAAU;sDAAuB,cAAA,6LAAC;gDAAO,SAAS,IAAM,SAAS,EAAE,EAAE;gDAAG,WAAU;0DAAmC,cAAA,6LAAC,uNAAM;oDAAC,WAAU;;;;;;;;;;;;;;;;;mCAAjZ,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;0BAK7B,6LAAC,sIAAK;gBAAC,QAAQ;gBAAW,SAAS,IAAM,aAAa;gBAAQ,OAAM;0BAChE,cAAA,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,6LAAC;4BAAI,WAAU;;8CAAyB,6LAAC,sIAAK;oCAAC,OAAM;oCAAY,QAAQ;oCAAC,OAAO,SAAS,IAAI;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;;;;;;8CAAM,6LAAC,sIAAK;oCAAC,OAAM;oCAAiB,QAAQ;oCAAC,OAAO,SAAS,IAAI;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;;;;;;;;;;;;sCACjS,6LAAC,sIAAK;4BAAC,OAAM;4BAAiB,OAAO,SAAS,KAAK;4BAAE,UAAU,CAAA,IAAK,YAAY;oCAAE,GAAG,QAAQ;oCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;sCACrH,6LAAC;4BAAI,WAAU;;8CAAyB,6LAAC,sIAAK;oCAAC,OAAM;oCAAQ,QAAQ;oCAAC,OAAO,SAAS,KAAK;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wCAAC;;;;;;8CAAM,6LAAC,sIAAK;oCAAC,OAAM;oCAAQ,OAAO,SAAS,KAAK;oCAAE,UAAU,CAAA,IAAK,YAAY;4CAAE,GAAG,QAAQ;4CAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wCAAC;;;;;;;;;;;;sCAC/Q,6LAAC,sIAAK;4BAAC,OAAM;4BAAU,OAAO,SAAS,OAAO;4BAAE,UAAU,CAAA,IAAK,YAAY;oCAAE,GAAG,QAAQ;oCAAE,SAAS,EAAE,MAAM,CAAC,KAAK;gCAAC;;;;;;sCAClH,6LAAC,wIAAM;4BAAC,MAAK;4BAAS,WAAU;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAK7D;GAlCa;;QAGY,4JAAQ;;;KAHpB"}},
    {"offset": {"line": 6261, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/SettingsView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Save } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\ninterface SettingsViewProps {\r\n    settings: Types.Settings;\r\n    onUpdate: (s: Types.Settings) => void;\r\n}\r\n\r\nexport const SettingsView: React.FC<SettingsViewProps> = ({ settings, onUpdate }) => {\r\n    const [formData, setFormData] = useState<Types.Settings>(settings);\r\n    const { addToast } = useToast();\r\n    const handleChange = (field: keyof Types.Settings, value: any) => { setFormData(prev => ({ ...prev, [field]: value })); };\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, field: keyof Types.Settings) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) { const reader = new FileReader(); reader.onloadend = () => { handleChange(field, reader.result as string); }; reader.readAsDataURL(file); }\r\n    };\r\n    const handleSubmit = (e: React.FormEvent) => { e.preventDefault(); onUpdate({ ...formData, updated_at: Date.now() }); addToast('Settings updated successfully', 'success'); };\r\n    return (\r\n        <div className=\"space-y-6 max-w-5xl mx-auto\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Settings & Branding</h1><p className=\"text-gray-500\">Configure school identity, session details, and report card assets.</p></div><Button onClick={handleSubmit}><Save className=\"h-4 w-4 mr-2\" /> Save Changes</Button></div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Card title=\"School Profile\">\r\n                    <div className=\"space-y-4\"><Input label=\"School Name\" value={formData.school_name} onChange={e => handleChange('school_name', e.target.value)} /><Input label=\"Email\" value={formData.school_email} onChange={e => handleChange('school_email', e.target.value)} /><Input label=\"Phone\" value={formData.school_phone} onChange={e => handleChange('school_phone', e.target.value)} /><Input label=\"Address\" value={formData.school_address} onChange={e => handleChange('school_address', e.target.value)} /><Input label=\"Tagline\" value={formData.school_tagline} onChange={e => handleChange('school_tagline', e.target.value)} /></div>\r\n                </Card>\r\n                <Card title=\"Session & Branding\">\r\n                    <div className=\"space-y-4\">\r\n                        <Input label=\"Current Session\" value={formData.current_session} onChange={e => handleChange('current_session', e.target.value)} />\r\n                        <Select label=\"Current Term\" value={formData.current_term} onChange={e => handleChange('current_term', e.target.value)}><option>First Term</option><option>Second Term</option><option>Third Term</option></Select>\r\n                        <div className=\"mt-4\"><label className=\"text-sm font-medium\">School Logo</label><input type=\"file\" className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-50 file:text-brand-700 hover:file:bg-brand-100\" onChange={e => handleFileChange(e, 'logo_media')} />{formData.logo_media && <img src={formData.logo_media} className=\"mt-2 h-16 object-contain\" />}</div>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6546, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/IDCardView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Printer, User, QrCode } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\n\r\ninterface IDCardViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const IDCardView: React.FC<IDCardViewProps> = ({ students, classes, settings }) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Student ID Cards</h1><p className=\"text-gray-500\">Generate and print student identity cards</p></div>\r\n                <div className=\"flex gap-4\"><Select className=\"w-48\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print Batch</Button></div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 print:grid-cols-2 print:gap-4 print:w-full\">\r\n                {activeStudents.map(s => (\r\n                    <div key={s.id} className=\"relative w-full aspect-[1.586] bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm print:shadow-none print:border-gray-900 break-inside-avoid\">\r\n                        <div className=\"absolute top-0 w-full h-1/3 bg-brand-600 flex items-center px-6\">\r\n                            <div className=\"flex-1\"><h3 className=\"text-white font-bold text-lg uppercase tracking-wider\">{settings.school_name}</h3><p className=\"text-brand-100 text-xs\">{settings.school_tagline}</p></div>\r\n                            {settings.logo_media && <img src={settings.logo_media} className=\"h-12 w-12 object-contain bg-white rounded-full p-1\" />}\r\n                        </div>\r\n                        <div className=\"absolute top-1/3 w-full h-2/3 p-6 flex gap-6 items-center\">\r\n                            <div className=\"h-24 w-24 rounded-lg bg-gray-100 border-2 border-brand-100 overflow-hidden flex-shrink-0\">{s.passport_media ? <img src={s.passport_media} className=\"h-full w-full object-cover\" /> : <User className=\"h-full w-full p-4 text-gray-300\" />}</div>\r\n                            <div className=\"flex-1 space-y-1\">\r\n                                <h2 className=\"text-xl font-bold text-gray-900 uppercase\">{s.names}</h2>\r\n                                <div className=\"text-sm text-gray-600\"><span className=\"font-bold text-gray-400 uppercase text-xs block\">ID Number</span>{s.student_no}</div>\r\n                                <div className=\"text-sm text-gray-600\"><span className=\"font-bold text-gray-400 uppercase text-xs block\">Class</span>{currentClass?.name}</div>\r\n                            </div>\r\n                            <div className=\"h-16 w-16 bg-gray-900 flex items-center justify-center text-white\"><QrCode className=\"h-10 w-10\" /></div>\r\n                        </div>\r\n                        <div className=\"absolute bottom-0 w-full h-8 bg-brand-900 flex items-center justify-center\"><p className=\"text-brand-100 text-[10px] uppercase tracking-widest\">Student Identity Card</p></div>\r\n                    </div>\r\n                ))}\r\n                {activeStudents.length === 0 && <div className=\"col-span-full text-center py-12 text-gray-400 italic\">No students found in this class.</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAEA;AACA;;;;;;;AAQO,MAAM,aAAwC,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE;;IACjF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC,OAAO,CAAC,EAAE,EAAE,MAAM;IACrE,MAAM,iBAAiB,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;IAC3D,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEhD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CAAI,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CAAqB,6LAAC;gCAAE,WAAU;0CAAgB;;;;;;;;;;;;kCACxG,6LAAC;wBAAI,WAAU;;0CAAa,6LAAC,wIAAM;gCAAC,WAAU;gCAAO,OAAO;gCAAe,UAAU,CAAA,IAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;0CAAI,QAAQ,GAAG,CAAC,CAAA,kBAAK,6LAAC;wCAAkB,OAAO,EAAE,EAAE;kDAAG,EAAE,IAAI;uCAA1B,EAAE,EAAE;;;;;;;;;;0CAA2C,6LAAC,wIAAM;gCAAC,SAAS,IAAM,OAAO,KAAK;;kDAAI,6LAAC,sNAAO;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;0BAEzR,6LAAC;gBAAI,WAAU;;oBACV,eAAe,GAAG,CAAC,CAAA,kBAChB,6LAAC;4BAAe,WAAU;;8CACtB,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;;8DAAS,6LAAC;oDAAG,WAAU;8DAAyD,SAAS,WAAW;;;;;;8DAAM,6LAAC;oDAAE,WAAU;8DAA0B,SAAS,cAAc;;;;;;;;;;;;wCACtL,SAAS,UAAU,kBAAI,6LAAC;4CAAI,KAAK,SAAS,UAAU;4CAAE,WAAU;;;;;;;;;;;;8CAErE,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAA4F,EAAE,cAAc,iBAAG,6LAAC;gDAAI,KAAK,EAAE,cAAc;gDAAE,WAAU;;;;;yGAAkC,6LAAC,6MAAI;gDAAC,WAAU;;;;;;;;;;;sDACtN,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAG,WAAU;8DAA6C,EAAE,KAAK;;;;;;8DAClE,6LAAC;oDAAI,WAAU;;sEAAwB,6LAAC;4DAAK,WAAU;sEAAkD;;;;;;wDAAiB,EAAE,UAAU;;;;;;;8DACtI,6LAAC;oDAAI,WAAU;;sEAAwB,6LAAC;4DAAK,WAAU;sEAAkD;;;;;;wDAAa,cAAc;;;;;;;;;;;;;sDAExI,6LAAC;4CAAI,WAAU;sDAAoE,cAAA,6LAAC,uNAAM;gDAAC,WAAU;;;;;;;;;;;;;;;;;8CAEzG,6LAAC;oCAAI,WAAU;8CAA6E,cAAA,6LAAC;wCAAE,WAAU;kDAAuD;;;;;;;;;;;;2BAd1J,EAAE,EAAE;;;;;oBAiBjB,eAAe,MAAM,KAAK,mBAAK,6LAAC;wBAAI,WAAU;kCAAuD;;;;;;;;;;;;;;;;;;AAItH;GAlCa;KAAA"}},
    {"offset": {"line": 6845, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/BroadsheetView.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Printer, LayoutList } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\n\r\ninterface BroadsheetViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    scores: Types.Score[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const BroadsheetView: React.FC<BroadsheetViewProps> = ({ students, classes, scores, settings }) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const subjects = Utils.getSubjectsForClass(currentClass);\r\n\r\n    const sheetData = activeStudents.map(s => {\r\n        const studentScore = scores.find(sc => sc.student_id === s.id && sc.session === settings.current_session && sc.term === settings.current_term);\r\n        const subjectScores: Record<string, number> = {};\r\n        let total = 0;\r\n        subjects.forEach(subj => {\r\n            const row = studentScore?.rows.find(r => r.subject === subj);\r\n            const val = row ? row.total : 0;\r\n            subjectScores[subj] = val;\r\n            total += val;\r\n        });\r\n        return { ...s, scores: subjectScores, total, average: subjects.length > 0 ? total / subjects.length : 0 };\r\n    }).sort((a, b) => b.average - a.average);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Master Broadsheet</h1><p className=\"text-gray-500\">Class-wide results analysis</p></div>\r\n                <div className=\"flex gap-4\"><Select value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print Sheet</Button></div>\r\n            </div>\r\n            <div className=\"overflow-x-auto bg-white border rounded-lg shadow-sm print:shadow-none print:border-none\">\r\n                <div className=\"p-4 border-b bg-gray-50 text-center print:block hidden\">\r\n                    <h2 className=\"text-xl font-bold uppercase\">{settings.school_name}</h2>\r\n                    <p>Broadsheet Report • {currentClass?.name} • {settings.current_session} {settings.current_term}</p>\r\n                </div>\r\n                <table className=\"w-full text-xs text-left border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"bg-gray-100 text-gray-700\">\r\n                            <th className=\"px-2 py-3 border sticky left-0 bg-gray-100 w-48\">Student Name</th>\r\n                            {subjects.map(subj => <th key={subj} className=\"px-2 py-3 border text-center w-16 rotate-45 h-32 align-bottom pb-2\">{subj.substring(0, 15)}</th>)}\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Total</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Avg</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Pos</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sheetData.map((s, idx) => (\r\n                            <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                <td className=\"px-2 py-2 border font-medium sticky left-0 bg-white\">{s.names}</td>\r\n                                {subjects.map(subj => <td key={subj} className={`px-2 py-2 border text-center ${s.scores[subj] < 40 ? 'text-red-600 font-bold' : ''}`}>{s.scores[subj] || '-'}</td>)}\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.total}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.average.toFixed(1)}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{Utils.ordinalSuffix(idx + 1)}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7140, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/DataManagementView.tsx"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport { Download, Upload, Database } from 'lucide-react';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card } from '@/components/ui/card';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\nexport const DataManagementView: React.FC = () => {\r\n    const { addToast } = useToast();\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const handleExport = () => {\r\n        const data = {\r\n            settings: Utils.loadFromStorage(Utils.STORAGE_KEYS.SETTINGS, Utils.INITIAL_SETTINGS),\r\n            students: Utils.loadFromStorage(Utils.STORAGE_KEYS.STUDENTS, Utils.SEED_STUDENTS),\r\n            teachers: Utils.loadFromStorage(Utils.STORAGE_KEYS.TEACHERS, Utils.SEED_TEACHERS),\r\n            staff: Utils.loadFromStorage(Utils.STORAGE_KEYS.STAFF, Utils.SEED_STAFF),\r\n            classes: Utils.loadFromStorage(Utils.STORAGE_KEYS.CLASSES, Utils.SEED_CLASSES),\r\n            scores: Utils.loadFromStorage(Utils.STORAGE_KEYS.SCORES, []),\r\n            fees: Utils.loadFromStorage(Utils.STORAGE_KEYS.FEES, []),\r\n            payments: Utils.loadFromStorage(Utils.STORAGE_KEYS.PAYMENTS, []),\r\n            expenses: Utils.loadFromStorage(Utils.STORAGE_KEYS.EXPENSES, []),\r\n            attendance: Utils.loadFromStorage(Utils.STORAGE_KEYS.ATTENDANCE, [])\r\n        };\r\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url; a.download = `school_backup_${Utils.getTodayString()}.json`; a.click();\r\n        addToast('Backup downloaded successfully', 'success');\r\n    };\r\n    const handleImport = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0]; if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            try {\r\n                const data = JSON.parse(event.target?.result as string);\r\n                if (data.settings && data.students) {\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.SETTINGS, data.settings);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.STUDENTS, data.students);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.TEACHERS, data.teachers);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.STAFF, data.staff);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.CLASSES, data.classes);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.SCORES, data.scores);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.FEES, data.fees);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.PAYMENTS, data.payments);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.EXPENSES, data.expenses);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.ATTENDANCE, data.attendance);\r\n                    addToast('Data imported successfully! Refreshing...', 'success');\r\n                    setTimeout(() => window.location.reload(), 1500);\r\n                } else { addToast('Invalid backup file format', 'error'); }\r\n            } catch (err) { addToast('Error parsing file', 'error'); }\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n    return (\r\n        <div className=\"space-y-6 max-w-2xl mx-auto\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Data Management</h1>\r\n            <Card title=\"Backup & Restore\">\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"flex items-center gap-4 p-4 border rounded-lg bg-blue-50 border-blue-100\">\r\n                        <div className=\"p-3 bg-blue-100 text-blue-600 rounded-full\"><Download className=\"h-6 w-6\" /></div>\r\n                        <div className=\"flex-1\"><h3 className=\"font-bold text-gray-900\">Export Data</h3><p className=\"text-sm text-gray-600\">Download a complete JSON backup of all school records.</p></div>\r\n                        <Button onClick={handleExport}>Download Backup</Button>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4 p-4 border rounded-lg bg-orange-50 border-orange-100\">\r\n                        <div className=\"p-3 bg-orange-100 text-orange-600 rounded-full\"><Upload className=\"h-6 w-6\" /></div>\r\n                        <div className=\"flex-1\"><h3 className=\"font-bold text-gray-900\">Import Data</h3><p className=\"text-sm text-gray-600\">Restore from a previously saved backup file. This will overwrite current data.</p></div>\r\n                        <input type=\"file\" ref={fileInputRef} className=\"hidden\" accept=\".json\" onChange={handleImport} />\r\n                        <Button variant=\"secondary\" onClick={() => fileInputRef.current?.click()}>Select File</Button>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n            <Card title=\"System Info\">\r\n                <div className=\"text-sm text-gray-500 space-y-2\"><p>Storage Engine: LocalStorage (Browser)</p><p>Last Sync: {new Date().toLocaleString()}</p><p className=\"text-red-500 text-xs mt-4\">* Warning: Clearing browser cache will delete all data if not backed up.</p></div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7432, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n    LayoutDashboard, Users, BookOpen, GraduationCap,\r\n    CalendarCheck, CreditCard, Database, Settings as SettingsIcon,\r\n    LogOut, Menu, ClipboardList, BadgeCheck, UserCog\r\n} from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { ToastProvider } from '@/components/providers/toast-provider';\r\n\r\n// Feature Views\r\nimport { DashboardView } from '@/components/features/DashboardView';\r\nimport { StudentsView } from '@/components/features/StudentsView';\r\nimport { ClassesView } from '@/components/features/ClassesView';\r\nimport { GradingView } from '@/components/features/GradingView';\r\nimport { AttendanceView } from '@/components/features/AttendanceView';\r\nimport { BursaryView } from '@/components/features/BursaryView';\r\nimport { TeachersView } from '@/components/features/TeachersView';\r\nimport { StaffView } from '@/components/features/StaffView';\r\nimport { SettingsView } from '@/components/features/SettingsView';\r\nimport { IDCardView } from '@/components/features/IDCardView';\r\nimport { BroadsheetView } from '@/components/features/BroadsheetView';\r\nimport { DataManagementView } from '@/components/features/DataManagementView';\r\n\r\nexport default function Page() {\r\n    return (\r\n        <ToastProvider>\r\n            <App />\r\n        </ToastProvider>\r\n    );\r\n}\r\n\r\nconst App = () => {\r\n    // Core Application State\r\n    const [settings, setSettings] = useState<Types.Settings>(Utils.INITIAL_SETTINGS);\r\n    const [students, setStudents] = useState<Types.Student[]>([]);\r\n    const [teachers, setTeachers] = useState<Types.Teacher[]>([]);\r\n    const [staff, setStaff] = useState<Types.Staff[]>([]);\r\n    const [classes, setClasses] = useState<Types.Class[]>([]);\r\n    const [scores, setScores] = useState<Types.Score[]>([]);\r\n    const [fees, setFees] = useState<Types.FeeStructure[]>([]);\r\n    const [payments, setPayments] = useState<Types.Payment[]>([]);\r\n    const [expenses, setExpenses] = useState<Types.Expense[]>([]);\r\n    const [attendance, setAttendance] = useState<Types.Attendance[]>([]);\r\n\r\n    // UI State\r\n    const [view, setView] = useState<Types.ViewState>('dashboard');\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Initial Load\r\n    useEffect(() => {\r\n        setSettings(Utils.loadFromStorage(Utils.STORAGE_KEYS.SETTINGS, Utils.INITIAL_SETTINGS));\r\n        setStudents(Utils.loadFromStorage(Utils.STORAGE_KEYS.STUDENTS, Utils.SEED_STUDENTS));\r\n        setTeachers(Utils.loadFromStorage(Utils.STORAGE_KEYS.TEACHERS, Utils.SEED_TEACHERS));\r\n        setStaff(Utils.loadFromStorage(Utils.STORAGE_KEYS.STAFF, Utils.SEED_STAFF));\r\n        setClasses(Utils.loadFromStorage(Utils.STORAGE_KEYS.CLASSES, Utils.SEED_CLASSES));\r\n        setScores(Utils.loadFromStorage(Utils.STORAGE_KEYS.SCORES, []));\r\n        setFees(Utils.loadFromStorage(Utils.STORAGE_KEYS.FEES, []));\r\n        setPayments(Utils.loadFromStorage(Utils.STORAGE_KEYS.PAYMENTS, []));\r\n        setExpenses(Utils.loadFromStorage(Utils.STORAGE_KEYS.EXPENSES, []));\r\n        setAttendance(Utils.loadFromStorage(Utils.STORAGE_KEYS.ATTENDANCE, []));\r\n        setIsLoaded(true);\r\n    }, []);\r\n\r\n    // Persistence\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.SETTINGS, settings); }, [settings, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.STUDENTS, students); }, [students, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.TEACHERS, teachers); }, [teachers, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.STAFF, staff); }, [staff, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.CLASSES, classes); }, [classes, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.SCORES, scores); }, [scores, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.FEES, fees); }, [fees, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.PAYMENTS, payments); }, [payments, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.EXPENSES, expenses); }, [expenses, isLoaded]);\r\n    useEffect(() => { if (isLoaded) Utils.saveToStorage(Utils.STORAGE_KEYS.ATTENDANCE, attendance); }, [attendance, isLoaded]);\r\n\r\n    const navigation = [\r\n        { id: 'dashboard', name: 'Dashboard', icon: LayoutDashboard },\r\n        { id: 'students', name: 'Students', icon: GraduationCap },\r\n        { id: 'teachers', name: 'Teachers', icon: Users },\r\n        { id: 'staff', name: 'Non-Academic', icon: UserCog },\r\n        { id: 'classes', name: 'Classes', icon: BookOpen },\r\n        { id: 'grading', name: 'Grading', icon: ClipboardList },\r\n        { id: 'attendance', name: 'Attendance', icon: CalendarCheck },\r\n        { id: 'bursary', name: 'Bursary', icon: CreditCard },\r\n        { id: 'id_cards', name: 'ID Cards', icon: BadgeCheck },\r\n        { id: 'broadsheet', name: 'Broadsheet', icon: LayoutDashboard },\r\n        { id: 'data', name: 'System Data', icon: Database },\r\n        { id: 'settings', name: 'Settings', icon: SettingsIcon },\r\n    ];\r\n\r\n    if (!isLoaded) return <div className=\"h-screen w-full flex items-center justify-center bg-gray-50\"><div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600\"></div></div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex\">\r\n            {/* Sidebar */}\r\n            <aside className={`${isSidebarOpen ? 'w-64' : 'w-20'} bg-brand-900 transition-all duration-300 flex flex-col fixed inset-y-0 z-40 lg:relative`}>\r\n                <div className=\"h-20 flex items-center px-6 border-b border-white/10 shrink-0\">\r\n                    <div className=\"h-10 w-10 bg-white rounded-lg flex items-center justify-center text-brand-600 font-bold shrink-0\">NG</div>\r\n                    {isSidebarOpen && <span className=\"ml-3 text-white font-bold text-xl truncate tracking-tight\">{settings.school_name.split(' ')[0]}</span>}\r\n                </div>\r\n\r\n                <nav className=\"flex-1 px-4 py-6 space-y-1 overflow-y-auto custom-scrollbar\">\r\n                    {navigation.map((item) => (\r\n                        <button\r\n                            key={item.id}\r\n                            onClick={() => setView(item.id as Types.ViewState)}\r\n                            className={`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors group ${view === item.id\r\n                                    ? 'bg-white/10 text-white'\r\n                                    : 'text-brand-100 hover:bg-white/5 hover:text-white'\r\n                                }`}\r\n                        >\r\n                            <item.icon className=\"h-5 w-5 shrink-0\" />\r\n                            {isSidebarOpen && <span className=\"ml-3\">{item.name}</span>}\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n\r\n                <div className=\"p-4 border-t border-white/10\">\r\n                    <button className=\"w-full flex items-center px-4 py-3 text-sm font-medium text-brand-100 hover:bg-white/5 hover:text-white rounded-lg transition-colors\">\r\n                        <LogOut className=\"h-5 w-5 shrink-0\" />\r\n                        {isSidebarOpen && <span className=\"ml-3\">Log Out</span>}\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 min-w-0 overflow-auto\">\r\n                <header className=\"h-20 bg-white border-b sticky top-0 z-30 flex items-center justify-between px-6 no-print shadow-sm\">\r\n                    <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className=\"p-2 rounded-md transition-colors hover:bg-gray-100\">\r\n                        {isSidebarOpen ? <Menu className=\"h-6 w-6 text-gray-600\" /> : <Menu className=\"h-6 w-6 text-gray-600 rotate-90 transition-transform\" />}\r\n                    </button>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"text-right hidden sm:block\">\r\n                            <p className=\"text-sm font-bold text-gray-900\">{settings.current_session}</p>\r\n                            <p className=\"text-xs text-brand-600 font-medium\">{settings.current_term}</p>\r\n                        </div>\r\n                        <div className=\"h-10 w-10 bg-brand-50 rounded-full border-2 border-brand-100 flex items-center justify-center font-bold text-brand-700\">AD</div>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"p-6 md:p-8 max-w-7xl mx-auto\">\r\n                    {view === 'dashboard' && <DashboardView settings={settings} students={students} teachers={teachers} staff={staff} payments={payments} expenses={expenses} fees={fees} classes={classes} onChangeView={setView} />}\r\n                    {view === 'students' && <StudentsView students={students} classes={classes} onAdd={s => setStudents([...students, s])} onUpdate={s => setStudents(students.map(x => x.id === s.id ? s : x))} onDelete={id => setStudents(students.filter(x => x.id !== id))} />}\r\n                    {view === 'classes' && <ClassesView classes={classes} teachers={teachers} onUpdate={c => setClasses(classes.map(x => x.id === c.id ? c : x))} />}\r\n                    {view === 'grading' && <GradingView students={students} classes={classes} scores={scores} settings={settings} onSaveScores={setScores} />}\r\n                    {view === 'attendance' && <AttendanceView students={students} classes={classes} attendance={attendance} settings={settings} onSave={setAttendance} />}\r\n                    {view === 'bursary' && <BursaryView students={students} classes={classes} fees={fees} payments={payments} expenses={expenses} settings={settings} onAddPayment={p => setPayments([...payments, p])} onAddFee={f => setFees([...fees, f])} onAddExpense={e => setExpenses([...expenses, e])} onDeletePayment={id => setPayments(payments.filter(x => x.id !== id))} onDeleteFee={id => setFees(fees.filter(x => x.id !== id))} />}\r\n                    {view === 'teachers' && <TeachersView teachers={teachers} onAdd={t => setTeachers([...teachers, t])} onDelete={id => setTeachers(teachers.filter(x => x.id !== id))} />}\r\n                    {view === 'staff' && <StaffView staff={staff} onAdd={s => setStaff([...staff, s])} onDelete={id => setStaff(staff.filter(x => x.id !== id))} />}\r\n                    {view === 'settings' && <SettingsView settings={settings} onUpdate={setSettings} />}\r\n                    {view === 'id_cards' && <IDCardView students={students} classes={classes} settings={settings} />}\r\n                    {view === 'broadsheet' && <BroadsheetView students={students} classes={classes} scores={scores} settings={settings} />}\r\n                    {view === 'data' && <DataManagementView />}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};"],"names":[],"mappings":"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"}}]
}