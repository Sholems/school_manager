{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/card.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface CardProps {\r\n    children?: React.ReactNode;\r\n    title?: string;\r\n    className?: string;\r\n    action?: React.ReactNode;\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({ children, title, className, action }) => (\r\n    <div className={`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${className || ''}`}>\r\n        {(title || action) && (\r\n            <div className=\"flex flex-col space-y-1.5 p-6 pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    {title && <h3 className=\"font-semibold leading-none tracking-tight\">{title}</h3>}\r\n                    {action && <div>{action}</div>}\r\n                </div>\r\n            </div>\r\n        )}\r\n        <div className=\"p-6 pt-2\">{children}</div>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AASO,MAAM,OAA4B,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,iBAC5E,6LAAC;QAAI,WAAW,CAAC,kGAAkG,EAAE,aAAa,IAAI;;YACjI,CAAC,SAAS,MAAM,mBACb,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;wBACV,uBAAS,6LAAC;4BAAG,WAAU;sCAA6C;;;;;;wBACpE,wBAAU,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAI7B,6LAAC;gBAAI,WAAU;0BAAY;;;;;;;;;;;;KAVtB"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/select.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Select: React.FC<SelectProps> = ({ label, className, children, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <select className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props}>\r\n            {children}\r\n        </select>\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,SAAgC,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,iBAClF,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAO,WAAW,CAAC,mLAAmL,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;0BAChO;;;;;;;;;;;;KAJA"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/button.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'danger' | 'ghost' | 'outline';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({ className, variant = 'primary', size = 'md', ...props }) => {\r\n    const base = \"inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none\";\r\n    const variants = {\r\n        primary: \"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm\",\r\n        secondary: \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500\",\r\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm\",\r\n        ghost: \"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500\",\r\n        outline: \"bg-transparent text-brand-600 border border-brand-600 hover:bg-brand-50 focus:ring-brand-500\"\r\n    };\r\n    const sizes = {\r\n        sm: \"h-8 px-3 text-sm\",\r\n        md: \"h-10 px-4 py-2\"\r\n    };\r\n    return <button className={`${base} ${variants[variant]} ${sizes[size]} ${className || ''}`} {...props} />;\r\n};\r\n"],"names":[],"mappings":";;;;;;AAOO,MAAM,SAAgC,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,GAAG,OAAO;IACnG,MAAM,OAAO;IACb,MAAM,WAAW;QACb,SAAS;QACT,WAAW;QACX,QAAQ;QACR,OAAO;QACP,SAAS;IACb;IACA,MAAM,QAAQ;QACV,IAAI;QACJ,IAAI;IACR;IACA,qBAAO,6LAAC;QAAO,WAAW,GAAG,KAAK,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,IAAI;QAAG,GAAG,KAAK;;;;;;AACzG;KAda"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/GradingView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ChevronRight, Save, Printer } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Select } from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\n\r\nconst ScoreInput = ({ value, max, onChange, className }: { value: number, max: number, onChange: (val: number) => void, className?: string }) => (\r\n    <input type=\"number\" min=\"0\" max={max} value={value || ''} onChange={e => { const v = parseFloat(e.target.value); if (!isNaN(v) && v <= max) onChange(v); if (e.target.value === '') onChange(0); }} className={`w-16 h-8 text-center border rounded focus:ring-2 focus:ring-brand-500 focus:outline-none ${className}`} />\r\n);\r\n\r\ninterface GradingViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    scores: Types.Score[];\r\n    settings: Types.Settings;\r\n    onSaveScores: (scores: Types.Score[]) => void;\r\n}\r\n\r\nexport const GradingView: React.FC<GradingViewProps> = ({\r\n    students, classes, scores, settings, onSaveScores\r\n}) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const classSubjects = Utils.getSubjectsForClass(currentClass);\r\n    const [selectedSubject, setSelectedSubject] = useState(classSubjects[0] || '');\r\n    const [activeTab, setActiveTab] = useState<'broadsheet' | 'report' | 'skills'>('broadsheet');\r\n    const [reportStudentId, setReportStudentId] = useState('');\r\n    const [previewScore, setPreviewScore] = useState<Types.Score | null>(null);\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n\r\n    useEffect(() => {\r\n        if (classSubjects.length > 0 && !classSubjects.includes(selectedSubject)) {\r\n            setSelectedSubject(classSubjects[0]);\r\n        }\r\n    }, [selectedClass, classSubjects, selectedSubject]);\r\n\r\n    const handleScoreChange = (studentId: string, field: 'ca1' | 'ca2' | 'exam', value: number) => {\r\n        const newScores = [...scores];\r\n        let score = newScores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n\r\n        if (!score) {\r\n            score = {\r\n                id: Utils.generateId(),\r\n                student_id: studentId,\r\n                class_id: selectedClass,\r\n                session: settings.current_session,\r\n                term: settings.current_term,\r\n                rows: [],\r\n                average: 0,\r\n                created_at: Date.now(),\r\n                updated_at: Date.now(),\r\n                affective: {},\r\n                psychomotor: {}\r\n            };\r\n            newScores.push(score);\r\n        }\r\n\r\n        let rowIndex = score.rows.findIndex(r => r.subject === selectedSubject);\r\n        if (rowIndex === -1) {\r\n            score.rows.push({ subject: selectedSubject, ca1: 0, ca2: 0, exam: 0, total: 0, grade: 'F', comment: '' });\r\n            rowIndex = score.rows.length - 1;\r\n        }\r\n        const row = score.rows[rowIndex];\r\n        (row as any)[field] = value;\r\n        row.total = row.ca1 + row.ca2 + row.exam;\r\n        const { grade, comment } = Utils.calculateGrade(row.total);\r\n        row.grade = grade;\r\n        row.comment = comment;\r\n        const totalScore = score.rows.reduce((acc, r) => acc + r.total, 0);\r\n        score.average = totalScore / score.rows.length;\r\n        score.total_score = totalScore;\r\n        onSaveScores(newScores);\r\n    };\r\n\r\n    const handleTraitChange = (studentId: string, category: 'affective' | 'psychomotor', trait: string, value: number) => {\r\n        const newScores = [...scores];\r\n        let score = newScores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n\r\n        if (!score) {\r\n            score = {\r\n                id: Utils.generateId(),\r\n                student_id: studentId,\r\n                class_id: selectedClass,\r\n                session: settings.current_session,\r\n                term: settings.current_term,\r\n                rows: [],\r\n                average: 0,\r\n                created_at: Date.now(),\r\n                updated_at: Date.now(),\r\n                affective: {},\r\n                psychomotor: {}\r\n            };\r\n            newScores.push(score);\r\n        }\r\n\r\n        if (!score[category]) score[category] = {};\r\n        score[category][trait] = value;\r\n        onSaveScores(newScores);\r\n    };\r\n\r\n    const handleScoreFieldChange = (studentId: string, field: keyof Types.Score, value: any) => {\r\n        const newScores = [...scores];\r\n        let score = newScores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n\r\n        if (!score) {\r\n            score = {\r\n                id: Utils.generateId(), student_id: studentId, class_id: selectedClass, session: settings.current_session, term: settings.current_term,\r\n                rows: [], average: 0, created_at: Date.now(), updated_at: Date.now(), affective: {}, psychomotor: {}\r\n            };\r\n            newScores.push(score);\r\n        }\r\n\r\n        (score as any)[field] = value;\r\n        onSaveScores(newScores);\r\n    };\r\n\r\n    const getRow = (studentId: string) => {\r\n        const score = scores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        return score?.rows.find(r => r.subject === selectedSubject) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n    };\r\n\r\n    const generateReport = () => {\r\n        if (!reportStudentId) return;\r\n        const score = scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        if (score) {\r\n            score.position = Utils.getStudentPosition(reportStudentId, students, scores, settings.current_session, settings.current_term) || undefined;\r\n        }\r\n        setPreviewScore(score ? { ...score } : null);\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    useEffect(() => { generateReport(); }, [reportStudentId, scores, settings]);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Academic Grading</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    <button onClick={() => setActiveTab('broadsheet')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'broadsheet' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Score Entry</button>\r\n                    <button onClick={() => setActiveTab('skills')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'skills' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Skills & Behavior</button>\r\n                    <button onClick={() => setActiveTab('report')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'report' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Report Cards</button>\r\n                </div>\r\n            </div>\r\n            {activeTab === 'broadsheet' && (\r\n                <Card className=\"min-h-[600px] flex flex-col\">\r\n                    <div className=\"flex gap-4 mb-6 p-4 bg-gray-50 border-b\">\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>\r\n                                {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Subject\" value={selectedSubject} onChange={e => setSelectedSubject(e.target.value)}>\r\n                                {classSubjects.map(s => <option key={s} value={s}>{s}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto flex-1\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-100 text-gray-700 uppercase text-xs font-semibold\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-3 sticky left-0 bg-gray-100\">Student Name</th>\r\n                                    <th className=\"px-4 py-3 text-center\">HW/CW (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">CAT (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Exam (60)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Total (100)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Grade</th>\r\n                                    <th className=\"px-4 py-3\">Remark</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-200\">\r\n                                {activeStudents.map(s => {\r\n                                    const row = getRow(s.id);\r\n                                    return (\r\n                                        <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                            <td className=\"px-4 py-2 font-medium text-gray-900 sticky left-0 bg-white\">{s.names} <div className=\"text-xs text-gray-500 font-normal\">{s.student_no}</div></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca1} max={20} onChange={(v) => handleScoreChange(s.id, 'ca1', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca2} max={20} onChange={(v) => handleScoreChange(s.id, 'ca2', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.exam} max={60} onChange={(v) => handleScoreChange(s.id, 'exam', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center font-bold\"><span className={row.total < 40 ? 'text-red-600' : 'text-gray-900'}>{row.total}</span></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><span className={`px-2 py-1 rounded text-xs font-bold ${row.grade === 'A' ? 'bg-green-100 text-green-800' : row.grade === 'F' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'}`}>{row.grade}</span></td>\r\n                                            <td className=\"px-4 py-2 text-xs text-gray-500\">{row.comment}</td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                                {activeStudents.length === 0 && <tr><td colSpan={7} className=\"text-center py-8 text-gray-500\">No students in this class.</td></tr>}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </Card>\r\n            )}\r\n\r\n            {activeTab === 'skills' && (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"lg:col-span-1 space-y-4\">\r\n                        <Card title=\"Select Student\">\r\n                            <div className=\"space-y-4\">\r\n                                <Select label=\"Class\" value={selectedClass} onChange={e => { setSelectedClass(e.target.value); setReportStudentId(''); }}>\r\n                                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                                </Select>\r\n                                <div className=\"space-y-1 max-h-[500px] overflow-y-auto border rounded-md\">\r\n                                    {activeStudents.map(s => (\r\n                                        <button key={s.id} onClick={() => setReportStudentId(s.id)} className={`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex justify-between ${reportStudentId === s.id ? 'bg-brand-50 text-brand-700 font-medium' : 'text-gray-700'}`}>{s.names}<ChevronRight className=\"h-4 w-4 opacity-50\" /></button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"lg:col-span-3 space-y-6\">\r\n                        {reportStudentId ? (\r\n                            <>\r\n                                <Card title=\"Affective Domain (Behavior & Traits)\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        {Utils.DOMAINS_AFFECTIVE.map(trait => {\r\n                                            const score = scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term);\r\n                                            const value = score?.affective?.[trait] || 0;\r\n                                            return (\r\n                                                <div key={trait} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                                    <span className=\"text-sm font-medium text-gray-700\">{trait}</span>\r\n                                                    <div className=\"flex gap-1\">\r\n                                                        {[1, 2, 3, 4, 5].map(num => (\r\n                                                            <button\r\n                                                                key={num}\r\n                                                                onClick={() => handleTraitChange(reportStudentId, 'affective', trait, num)}\r\n                                                                className={`h-8 w-8 rounded-md text-sm font-bold transition-colors ${value === num ? 'bg-brand-600 text-white' : 'bg-white border text-gray-400 hover:border-brand-300'}`}\r\n                                                            >\r\n                                                                {num}\r\n                                                            </button>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </Card>\r\n                                <Card title=\"Psychomotor Skills (Physical & Creative)\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        {Utils.DOMAINS_PSYCHOMOTOR.map(skill => {\r\n                                            const score = scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term);\r\n                                            const value = score?.psychomotor?.[skill] || 0;\r\n                                            return (\r\n                                                <div key={skill} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                                    <span className=\"text-sm font-medium text-gray-700\">{skill}</span>\r\n                                                    <div className=\"flex gap-1\">\r\n                                                        {[1, 2, 3, 4, 5].map(num => (\r\n                                                            <button\r\n                                                                key={num}\r\n                                                                onClick={() => handleTraitChange(reportStudentId, 'psychomotor', skill, num)}\r\n                                                                className={`h-8 w-8 rounded-md text-sm font-bold transition-colors ${value === num ? 'bg-brand-600 text-white' : 'bg-white border text-gray-400 hover:border-brand-300'}`}\r\n                                                            >\r\n                                                                {num}\r\n                                                            </button>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </Card>\r\n                                <Card title=\"Attendance & Remarks\">\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"grid grid-cols-2 gap-4\">\r\n                                            <div className=\"space-y-1\">\r\n                                                <label className=\"text-xs font-bold text-gray-500 uppercase\">Times Present</label>\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term)?.attendance_present || 0}\r\n                                                    onChange={e => handleScoreFieldChange(reportStudentId, 'attendance_present', parseInt(e.target.value) || 0)}\r\n                                                    className=\"w-full h-10 px-3 border rounded-md focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"space-y-1\">\r\n                                                <label className=\"text-xs font-bold text-gray-500 uppercase\">Total Times School Opened</label>\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term)?.attendance_total || 0}\r\n                                                    onChange={e => handleScoreFieldChange(reportStudentId, 'attendance_total', parseInt(e.target.value) || 0)}\r\n                                                    className=\"w-full h-10 px-3 border rounded-md focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{settings.class_teacher_label} Remark</label>\r\n                                            <textarea\r\n                                                value={scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term)?.teacher_remark || ''}\r\n                                                onChange={e => handleScoreFieldChange(reportStudentId, 'teacher_remark', e.target.value)}\r\n                                                className=\"w-full p-3 border rounded-md focus:ring-2 focus:ring-brand-500 focus:outline-none min-h-[80px]\"\r\n                                                placeholder={`Enter ${settings.class_teacher_label.toLowerCase()}'s comment...`}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <label className=\"text-xs font-bold text-gray-500 uppercase\">{settings.head_teacher_label} Remark</label>\r\n                                            <textarea\r\n                                                value={scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term)?.head_teacher_remark || ''}\r\n                                                onChange={e => handleScoreFieldChange(reportStudentId, 'head_teacher_remark', e.target.value)}\r\n                                                className=\"w-full p-3 border rounded-md focus:ring-2 focus:ring-brand-500 focus:outline-none min-h-[80px]\"\r\n                                                placeholder={`Enter ${settings.head_teacher_label.toLowerCase()}'s comment...`}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </Card>\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"h-full border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center p-12 text-gray-400\">\r\n                                Select a student to set their behavior and skills ratings\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'report' && (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 print:block\">\r\n                    <div className=\"lg:col-span-1 space-y-4 no-print\">\r\n                        <Card title=\"Selection\">\r\n                            <div className=\"space-y-4\">\r\n                                <Select label=\"Class\" value={selectedClass} onChange={e => { setSelectedClass(e.target.value); setReportStudentId(''); }}>\r\n                                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                                </Select>\r\n                                <div className=\"space-y-1 max-h-[400px] overflow-y-auto border rounded-md\">\r\n                                    {activeStudents.map(s => (\r\n                                        <button key={s.id} onClick={() => setReportStudentId(s.id)} className={`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex justify-between ${reportStudentId === s.id ? 'bg-brand-50 text-brand-700 font-medium' : 'text-gray-700'}`}>{s.names}<ChevronRight className=\"h-4 w-4 opacity-50\" /></button>\r\n                                    ))}\r\n                                </div>\r\n                                {reportStudentId && (\r\n                                    <Button className=\"w-full mt-4 flex items-center justify-center gap-2\" onClick={handlePrint}>\r\n                                        <Printer className=\"h-4 w-4\" />\r\n                                        Print / Save as PDF\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"lg:col-span-3 print:w-full\">\r\n                        {previewScore && reportStudentId ? (\r\n                            <div\r\n                                className=\"bg-white border shadow-lg p-8 print:shadow-none print:border-none print:w-full relative overflow-hidden transition-transform duration-300\"\r\n                                id=\"report-card\"\r\n                                style={{\r\n                                    fontFamily: settings.report_font_family,\r\n                                    transform: settings.report_scale < 100 ? `scale(${settings.report_scale / 100})` : 'none',\r\n                                    transformOrigin: 'top center'\r\n                                }}\r\n                            >\r\n                                {settings.watermark_media && (\r\n                                    <div className={`absolute inset-0 pointer-events-none ${settings.tiled_watermark ? 'opacity-[0.03]' : 'flex items-center justify-center opacity-[0.05]'}`}>\r\n                                        {settings.tiled_watermark ? (\r\n                                            <div\r\n                                                className=\"absolute inset-[-50%] rotate-[-30deg]\"\r\n                                                style={{\r\n                                                    backgroundImage: `url(${settings.watermark_media})`,\r\n                                                    backgroundSize: '120px',\r\n                                                    backgroundRepeat: 'repeat'\r\n                                                }}\r\n                                            ></div>\r\n                                        ) : (\r\n                                            <img src={settings.watermark_media} alt=\"Watermark\" className=\"w-1/2 object-contain\" />\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"relative z-10\">\r\n                                    <div className=\"flex flex-col items-center text-center mb-6\">\r\n                                        {settings.logo_media && (\r\n                                            <div className=\"h-24 w-24 mb-4\">\r\n                                                <img src={settings.logo_media} alt=\"School Logo\" className=\"h-full w-full object-contain\" />\r\n                                            </div>\r\n                                        )}\r\n                                        <h1 className=\"text-4xl font-black text-brand-900 uppercase tracking-tighter leading-none mb-2\">{settings.school_name}</h1>\r\n                                        <p className=\"text-gray-600 font-medium text-lg\">{settings.school_address}</p>\r\n                                        <p className=\"text-gray-500 text-sm mt-1 font-mono\">{settings.school_email} | {settings.school_phone}</p>\r\n                                        <div className=\"w-full h-1 bg-green-600 mt-6 rounded-full\"></div>\r\n                                    </div>\r\n\r\n                                    {/* Student Details Section */}\r\n                                    <div className=\"grid grid-cols-2 gap-y-4 gap-x-12 mb-8 bg-gray-50/50 p-4 border rounded-xl border-gray-100\">\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Student Name:</span>\r\n                                            <span className=\"text-sm font-black text-gray-900\">{students.find(s => s.id === reportStudentId)?.names}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Admission No:</span>\r\n                                            <span className=\"text-sm font-black text-gray-900\">{students.find(s => s.id === reportStudentId)?.student_no}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Class:</span>\r\n                                            <span className=\"text-sm font-black text-gray-900\">{classes.find(c => c.id === selectedClass)?.name}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Session / Term:</span>\r\n                                            <span className=\"text-sm font-black text-gray-900\">{settings.current_session} | {settings.current_term}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Attendance:</span>\r\n                                            <span className=\"text-sm font-black text-gray-900\">{previewScore.attendance_present || 0} / {previewScore.attendance_total || 0}</span>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between border-b pb-1\">\r\n                                            <span className=\"text-xs font-bold text-gray-500 uppercase\">Next Term Resumes:</span>\r\n                                            <span className=\"text-sm font-black text-brand-600\">{settings.next_term_begins || 'TBA'}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <table className=\"w-full border-collapse border border-gray-300 text-sm mb-8\">\r\n                                        <thead className=\"bg-brand-50 text-brand-900\">\r\n                                            <tr>\r\n                                                <th className=\"border border-gray-300 p-2 text-left\">Subject</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-center w-20\">HW/CW</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-center w-20\">CAT</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-center w-20\">Exam</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-center w-20\">Total</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-center w-16\">Grade</th>\r\n                                                <th className=\"border border-gray-300 p-2 text-left\">Remark</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            {classSubjects.map(subj => {\r\n                                                const row = previewScore.rows.find(r => r.subject === subj) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n                                                return (\r\n                                                    <tr key={subj}>\r\n                                                        <td className=\"border border-gray-300 p-2 font-medium\">{subj}</td>\r\n                                                        <td className=\"border border-gray-300 p-2 text-center\">{row.ca1 || '-'}</td>\r\n                                                        <td className=\"border border-gray-300 p-2 text-center\">{row.ca2 || '-'}</td>\r\n                                                        <td className=\"border border-gray-300 p-2 text-center font-medium\">{row.exam || '-'}</td>\r\n                                                        <td className=\"border border-gray-300 p-2 text-center font-bold bg-gray-50\">{row.total || '-'}</td>\r\n                                                        <td className={`border border-gray-300 p-2 text-center font-bold ${row.grade === 'F' ? 'text-red-600' : 'text-brand-700'}`}>{row.grade}</td>\r\n                                                        <td className=\"border border-gray-300 p-2 text-xs italic text-gray-500\">{row.comment}</td>\r\n                                                    </tr>\r\n                                                );\r\n                                            })}\r\n                                        </tbody>\r\n                                    </table>\r\n\r\n                                    {/* Academic Summary on Page 1 */}\r\n                                    <div className=\"grid grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg border mb-8\">\r\n                                        <div className=\"text-center\">\r\n                                            <p className=\"text-xs text-gray-500 uppercase font-bold\">Total Score</p>\r\n                                            <p className=\"text-xl font-bold text-gray-900\">{previewScore.total_score || '-'}</p>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <p className=\"text-xs text-gray-500 uppercase font-bold\">Average</p>\r\n                                            <p className=\"text-xl font-bold text-gray-900\">{(previewScore.average || 0).toFixed(1)}%</p>\r\n                                        </div>\r\n                                        {settings.show_position && (\r\n                                            <div className=\"text-center\">\r\n                                                <p className=\"text-xs text-gray-500 uppercase font-bold\">Position</p>\r\n                                                <p className=\"text-xl font-bold text-brand-600\">{previewScore.position ? Utils.ordinalSuffix(previewScore.position) : '-'}</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Page Break */}\r\n                                    <div className=\"page-break\"></div>\r\n\r\n                                    {/* Page 2 Header (Minimal) */}\r\n                                    <div className=\"mb-6 pt-4 border-t-2 border-brand-900 flex justify-between items-end print:pt-0 print:mt-0\">\r\n                                        <div>\r\n                                            <h2 className=\"text-2xl font-black text-brand-900 uppercase\">{settings.school_name}</h2>\r\n                                            <p className=\"text-xs text-gray-500 uppercase font-bold\">Supplemental Report: {students.find(s => s.id === reportStudentId)?.names}</p>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-xs font-bold text-gray-400\">{settings.current_session} | {settings.current_term}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {settings.show_skills && (\r\n                                        <div className=\"grid grid-cols-2 gap-8 mb-8\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <h3 className=\"text-sm font-bold text-brand-900 border-b border-brand-200 pb-1 mb-2 uppercase\">Affective Domain</h3>\r\n                                                <table className=\"w-full text-xs border-collapse\">\r\n                                                    <tbody>\r\n                                                        {Utils.DOMAINS_AFFECTIVE.map(trait => (\r\n                                                            <tr key={trait}>\r\n                                                                <td className=\"border py-1 px-2 text-gray-700\">{trait}</td>\r\n                                                                <td className=\"border py-1 px-2 text-center font-bold w-8\">{previewScore.affective?.[trait] || '-'}</td>\r\n                                                            </tr>\r\n                                                        ))}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                            <div className=\"space-y-2\">\r\n                                                <h3 className=\"text-sm font-bold text-brand-900 border-b border-brand-200 pb-1 mb-2 uppercase\">Psychomotor Skills</h3>\r\n                                                <table className=\"w-full text-xs border-collapse\">\r\n                                                    <tbody>\r\n                                                        {Utils.DOMAINS_PSYCHOMOTOR.map(skill => (\r\n                                                            <tr key={skill}>\r\n                                                                <td className=\"border py-1 px-2 text-gray-700\">{skill}</td>\r\n                                                                <td className=\"border py-1 px-2 text-center font-bold w-8\">{previewScore.psychomotor?.[skill] || '-'}</td>\r\n                                                            </tr>\r\n                                                        ))}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Remarks Section */}\r\n                                    <div className=\"space-y-4 mb-8\">\r\n                                        <div className=\"border-l-4 border-brand-500 pl-4 py-1 bg-brand-50/20 rounded-r-lg\">\r\n                                            <h4 className=\"text-[10px] font-black text-brand-900 uppercase\">{(settings.class_teacher_label || '').toUpperCase()}'S REMARK:</h4>\r\n                                            <p className=\"text-sm italic text-gray-700\">{previewScore.teacher_remark || 'No comment provided.'}</p>\r\n                                        </div>\r\n                                        <div className=\"border-l-4 border-brand-500 pl-4 py-1 bg-brand-50/20 rounded-r-lg\">\r\n                                            <h4 className=\"text-[10px] font-black text-brand-900 uppercase\">{(settings.head_teacher_label || '').toUpperCase()}'S REMARK:</h4>\r\n                                            <p className=\"text-sm italic text-gray-700\">{previewScore.head_teacher_remark || 'No comment provided.'}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-12 mt-12 pt-8 border-t border-dashed border-gray-300\">\r\n                                        <div className=\"text-center\">\r\n                                            <div className=\"h-16 border-b border-gray-400 mb-2 flex items-end justify-center\">\r\n                                                {/* Optionally show class teacher's signature if uniquely stored */}\r\n                                            </div>\r\n                                            <p className=\"text-xs font-bold uppercase\">{settings.class_teacher_label || 'Class Teacher'} Signature</p>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <div className=\"h-16 border-b border-gray-400 mb-2 flex items-end justify-center\">\r\n                                                {settings.head_of_school_signature && <img src={settings.head_of_school_signature} className=\"h-12 object-contain\" />}\r\n                                            </div>\r\n                                            <p className=\"text-xs font-bold uppercase\">{settings.head_teacher_label || 'Head Teacher'} Signature</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {settings.school_tagline && (\r\n                                        <div className=\"mt-12 text-center\">\r\n                                            <div className=\"w-16 h-1 bg-brand-500 mx-auto mb-4 rounded-full opacity-20\"></div>\r\n                                            <p className=\"text-sm font-medium text-gray-500 italic\">\"{settings.school_tagline}\"</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"h-full border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center p-12 text-gray-400\">\r\n                                Select a student to preview their report card\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2027, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/grading/SubjectTeacherManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Plus, Trash2, UserCheck, BookOpen } from 'lucide-react';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\nimport * as Utils from '@/lib/utils';\r\n\r\nexport const SubjectTeacherManager: React.FC = () => {\r\n    const {\r\n        classes,\r\n        teachers,\r\n        subjectTeachers,\r\n        settings,\r\n        addSubjectTeacher,\r\n        removeSubjectTeacher\r\n    } = useSchoolStore();\r\n    const { addToast } = useToast();\r\n\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedTeacher, setSelectedTeacher] = useState('');\r\n    const [selectedSubject, setSelectedSubject] = useState('');\r\n\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const classSubjects = Utils.getSubjectsForClass(currentClass);\r\n\r\n    // Get assignments for current class\r\n    const classAssignments = subjectTeachers.filter(\r\n        st => st.class_id === selectedClass && st.session === settings.current_session\r\n    );\r\n\r\n    const handleAddAssignment = () => {\r\n        if (!selectedTeacher || !selectedSubject) {\r\n            addToast('Please select both a teacher and a subject', 'warning');\r\n            return;\r\n        }\r\n\r\n        // Check if assignment already exists\r\n        const exists = classAssignments.some(\r\n            a => a.subject === selectedSubject\r\n        );\r\n        if (exists) {\r\n            addToast('This subject is already assigned to a teacher', 'error');\r\n            return;\r\n        }\r\n\r\n        addSubjectTeacher({\r\n            id: Utils.generateId(),\r\n            teacher_id: selectedTeacher,\r\n            class_id: selectedClass,\r\n            subject: selectedSubject,\r\n            session: settings.current_session,\r\n            created_at: Date.now(),\r\n            updated_at: Date.now()\r\n        });\r\n\r\n        addToast('Subject-teacher assignment added', 'success');\r\n        setSelectedSubject('');\r\n        setSelectedTeacher('');\r\n    };\r\n\r\n    const getTeacherName = (teacherId: string) => {\r\n        return teachers.find(t => t.id === teacherId)?.name || 'Unknown';\r\n    };\r\n\r\n    // Get subjects that are not yet assigned\r\n    const unassignedSubjects = classSubjects.filter(\r\n        subj => !classAssignments.some(a => a.subject === subj)\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-900\">Subject-Teacher Assignments</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Assign teachers to subjects for each class</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Left Panel: Assignment Form */}\r\n                <Card className=\"lg:col-span-1\">\r\n                    <div className=\"p-4 space-y-4\">\r\n                        <h3 className=\"font-semibold text-gray-700 flex items-center gap-2\">\r\n                            <Plus className=\"h-4 w-4\" />\r\n                            New Assignment\r\n                        </h3>\r\n\r\n                        <Select\r\n                            label=\"Class\"\r\n                            value={selectedClass}\r\n                            onChange={e => setSelectedClass(e.target.value)}\r\n                        >\r\n                            {classes.map(c => (\r\n                                <option key={c.id} value={c.id}>{c.name}</option>\r\n                            ))}\r\n                        </Select>\r\n\r\n                        <Select\r\n                            label=\"Subject\"\r\n                            value={selectedSubject}\r\n                            onChange={e => setSelectedSubject(e.target.value)}\r\n                        >\r\n                            <option value=\"\">-- Select Subject --</option>\r\n                            {unassignedSubjects.map(subj => (\r\n                                <option key={subj} value={subj}>{subj}</option>\r\n                            ))}\r\n                        </Select>\r\n\r\n                        <Select\r\n                            label=\"Teacher\"\r\n                            value={selectedTeacher}\r\n                            onChange={e => setSelectedTeacher(e.target.value)}\r\n                        >\r\n                            <option value=\"\">-- Select Teacher --</option>\r\n                            {teachers.map(t => (\r\n                                <option key={t.id} value={t.id}>{t.name}</option>\r\n                            ))}\r\n                        </Select>\r\n\r\n                        <Button\r\n                            className=\"w-full\"\r\n                            onClick={handleAddAssignment}\r\n                            disabled={!selectedTeacher || !selectedSubject}\r\n                        >\r\n                            <Plus className=\"h-4 w-4 mr-2\" />\r\n                            Add Assignment\r\n                        </Button>\r\n                    </div>\r\n                </Card>\r\n\r\n                {/* Right Panel: Current Assignments */}\r\n                <Card className=\"lg:col-span-2\">\r\n                    <div className=\"p-4\">\r\n                        <h3 className=\"font-semibold text-gray-700 flex items-center gap-2 mb-4\">\r\n                            <UserCheck className=\"h-4 w-4\" />\r\n                            Current Assignments for {currentClass?.name || 'Class'}\r\n                        </h3>\r\n\r\n                        {classAssignments.length === 0 ? (\r\n                            <div className=\"text-center py-12 text-gray-400\">\r\n                                <BookOpen className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\r\n                                <p>No subject-teacher assignments yet</p>\r\n                                <p className=\"text-sm mt-1\">Use the form on the left to add assignments</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-2\">\r\n                                {classAssignments.map(assignment => (\r\n                                    <div\r\n                                        key={assignment.id}\r\n                                        className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg border\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"h-10 w-10 bg-brand-100 rounded-lg flex items-center justify-center\">\r\n                                                <BookOpen className=\"h-5 w-5 text-brand-600\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-medium text-gray-900\">{assignment.subject}</p>\r\n                                                <p className=\"text-sm text-gray-500\">\r\n                                                    Taught by: {getTeacherName(assignment.teacher_id)}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                removeSubjectTeacher(assignment.id);\r\n                                                addToast('Assignment removed', 'info');\r\n                                            }}\r\n                                            className=\"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Summary by Class */}\r\n            <Card>\r\n                <div className=\"p-4\">\r\n                    <h3 className=\"font-semibold text-gray-700 mb-4\">Assignment Summary by Class</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                        {classes.map(cls => {\r\n                            const assignments = subjectTeachers.filter(\r\n                                st => st.class_id === cls.id && st.session === settings.current_session\r\n                            );\r\n                            const subjects = Utils.getSubjectsForClass(cls);\r\n                            const coverage = subjects.length > 0\r\n                                ? Math.round((assignments.length / subjects.length) * 100)\r\n                                : 0;\r\n\r\n                            return (\r\n                                <div\r\n                                    key={cls.id}\r\n                                    className={`p-3 rounded-lg border cursor-pointer transition-colors ${selectedClass === cls.id\r\n                                        ? 'bg-brand-50 border-brand-200'\r\n                                        : 'bg-gray-50 hover:bg-gray-100'\r\n                                        }`}\r\n                                    onClick={() => setSelectedClass(cls.id)}\r\n                                >\r\n                                    <p className=\"font-medium text-gray-900\">{cls.name}</p>\r\n                                    <div className=\"flex items-center justify-between mt-2\">\r\n                                        <span className=\"text-xs text-gray-500\">\r\n                                            {assignments.length}/{subjects.length} subjects\r\n                                        </span>\r\n                                        <span className={`text-xs font-bold ${coverage >= 80 ? 'text-green-600' :\r\n                                            coverage >= 50 ? 'text-yellow-600' : 'text-red-600'\r\n                                            }`}>\r\n                                            {coverage}%\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"mt-2 h-1.5 bg-gray-200 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className={`h-full rounded-full ${coverage >= 80 ? 'bg-green-500' :\r\n                                                coverage >= 50 ? 'bg-yellow-500' : 'bg-red-500'\r\n                                                }`}\r\n                                            style={{ width: `${coverage}%` }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2534, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/grading/TermComparisonView.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { TrendingUp, TrendingDown, Minus, BarChart3 } from 'lucide-react';\r\nimport {\r\n    LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\r\n    ResponsiveContainer, BarChart, Bar\r\n} from 'recharts';\r\nimport * as Types from '@/lib/types';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Select } from '@/components/ui/select';\r\n\r\ninterface TermComparisonViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    scores: Types.Score[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const TermComparisonView: React.FC<TermComparisonViewProps> = ({\r\n    students, classes, scores, settings\r\n}) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedStudent, setSelectedStudent] = useState('');\r\n    const [compareMode, setCompareMode] = useState<'student' | 'class'>('student');\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const terms = settings.terms || ['First Term', 'Second Term', 'Third Term'];\r\n\r\n    // Calculate student performance across terms\r\n    const studentTermData = useMemo(() => {\r\n        if (!selectedStudent) return [];\r\n\r\n        return terms.map(term => {\r\n            const score = scores.find(\r\n                s => s.student_id === selectedStudent &&\r\n                    s.session === settings.current_session &&\r\n                    s.term === term\r\n            );\r\n            return {\r\n                term: term.replace(' Term', ''),\r\n                average: score?.average || 0,\r\n                totalSubjects: score?.rows.length || 0,\r\n                totalScore: score?.total_score || 0\r\n            };\r\n        });\r\n    }, [selectedStudent, scores, settings.current_session, terms]);\r\n\r\n    // Calculate class average across terms\r\n    const classTermData = useMemo(() => {\r\n        const classStudents = students.filter(s => s.class_id === selectedClass);\r\n\r\n        return terms.map(term => {\r\n            const termScores = classStudents.map(student => {\r\n                const score = scores.find(\r\n                    s => s.student_id === student.id &&\r\n                        s.session === settings.current_session &&\r\n                        s.term === term\r\n                );\r\n                return score?.average || 0;\r\n            }).filter(avg => avg > 0);\r\n\r\n            const classAverage = termScores.length > 0\r\n                ? termScores.reduce((a, b) => a + b, 0) / termScores.length\r\n                : 0;\r\n\r\n            return {\r\n                term: term.replace(' Term', ''),\r\n                average: Math.round(classAverage * 100) / 100,\r\n                studentsWithScores: termScores.length\r\n            };\r\n        });\r\n    }, [selectedClass, students, scores, settings.current_session, terms]);\r\n\r\n    // Subject-wise comparison for student\r\n    const subjectComparison = useMemo(() => {\r\n        if (!selectedStudent) return [];\r\n\r\n        const allSubjects = new Set<string>();\r\n        const termScores: Record<string, Types.Score | undefined> = {};\r\n\r\n        terms.forEach(term => {\r\n            const score = scores.find(\r\n                s => s.student_id === selectedStudent &&\r\n                    s.session === settings.current_session &&\r\n                    s.term === term\r\n            );\r\n            termScores[term] = score;\r\n            score?.rows.forEach(row => allSubjects.add(row.subject));\r\n        });\r\n\r\n        return Array.from(allSubjects).map(subject => {\r\n            const data: Record<string, any> = { subject };\r\n            terms.forEach(term => {\r\n                const row = termScores[term]?.rows.find(r => r.subject === subject);\r\n                data[term.replace(' Term', '')] = row?.total || 0;\r\n            });\r\n            return data;\r\n        });\r\n    }, [selectedStudent, scores, settings.current_session, terms]);\r\n\r\n    // Calculate trend indicator\r\n    const getTrendIndicator = (data: { average: number }[]) => {\r\n        if (data.length < 2) return null;\r\n        const lastTwo = data.slice(-2);\r\n        const diff = lastTwo[1].average - lastTwo[0].average;\r\n\r\n        if (diff > 5) return { icon: TrendingUp, color: 'text-green-600', label: 'Improving' };\r\n        if (diff < -5) return { icon: TrendingDown, color: 'text-red-600', label: 'Declining' };\r\n        return { icon: Minus, color: 'text-gray-500', label: 'Stable' };\r\n    };\r\n\r\n    const studentTrend = getTrendIndicator(studentTermData);\r\n    const classTrend = getTrendIndicator(classTermData);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-900\">Term Progression Tracking</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Compare performance across terms</p>\r\n                </div>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    <button\r\n                        onClick={() => setCompareMode('student')}\r\n                        className={`px-4 py-2 text-sm font-medium rounded-md ${compareMode === 'student' ? 'bg-white shadow text-brand-700' : 'text-gray-600'\r\n                            }`}\r\n                    >\r\n                        By Student\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setCompareMode('class')}\r\n                        className={`px-4 py-2 text-sm font-medium rounded-md ${compareMode === 'class' ? 'bg-white shadow text-brand-700' : 'text-gray-600'\r\n                            }`}\r\n                    >\r\n                        By Class\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                {/* Selection Panel */}\r\n                <Card className=\"lg:col-span-1\">\r\n                    <div className=\"p-4 space-y-4\">\r\n                        <Select\r\n                            label=\"Class\"\r\n                            value={selectedClass}\r\n                            onChange={e => {\r\n                                setSelectedClass(e.target.value);\r\n                                setSelectedStudent('');\r\n                            }}\r\n                        >\r\n                            {classes.map(c => (\r\n                                <option key={c.id} value={c.id}>{c.name}</option>\r\n                            ))}\r\n                        </Select>\r\n\r\n                        {compareMode === 'student' && (\r\n                            <div className=\"space-y-1 max-h-[400px] overflow-y-auto border rounded-md\">\r\n                                {activeStudents.map(s => (\r\n                                    <button\r\n                                        key={s.id}\r\n                                        onClick={() => setSelectedStudent(s.id)}\r\n                                        className={`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${selectedStudent === s.id\r\n                                                ? 'bg-brand-50 text-brand-700 font-medium'\r\n                                                : 'text-gray-700'\r\n                                            }`}\r\n                                    >\r\n                                        {s.names}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {compareMode === 'student' && selectedStudent && studentTrend && (\r\n                            <div className={`p-3 rounded-lg bg-gray-50 flex items-center gap-2 ${studentTrend.color}`}>\r\n                                <studentTrend.icon className=\"h-5 w-5\" />\r\n                                <span className=\"text-sm font-medium\">{studentTrend.label}</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {compareMode === 'class' && classTrend && (\r\n                            <div className={`p-3 rounded-lg bg-gray-50 flex items-center gap-2 ${classTrend.color}`}>\r\n                                <classTrend.icon className=\"h-5 w-5\" />\r\n                                <span className=\"text-sm font-medium\">Class is {classTrend.label}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n\r\n                {/* Charts Panel */}\r\n                <div className=\"lg:col-span-3 space-y-6\">\r\n                    {/* Average Trend Line Chart */}\r\n                    <Card>\r\n                        <div className=\"p-4\">\r\n                            <h3 className=\"font-semibold text-gray-700 flex items-center gap-2 mb-4\">\r\n                                <BarChart3 className=\"h-4 w-4\" />\r\n                                {compareMode === 'student' ? 'Student Average Progression' : 'Class Average Progression'}\r\n                            </h3>\r\n\r\n                            {(compareMode === 'student' && !selectedStudent) ? (\r\n                                <div className=\"h-64 flex items-center justify-center text-gray-400\">\r\n                                    Select a student to view their progression\r\n                                </div>\r\n                            ) : (\r\n                                <ResponsiveContainer width=\"100%\" height={250}>\r\n                                    <LineChart data={compareMode === 'student' ? studentTermData : classTermData}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                        <XAxis dataKey=\"term\" />\r\n                                        <YAxis domain={[0, 100]} />\r\n                                        <Tooltip />\r\n                                        <Legend />\r\n                                        <Line\r\n                                            type=\"monotone\"\r\n                                            dataKey=\"average\"\r\n                                            stroke=\"#16a34a\"\r\n                                            strokeWidth={3}\r\n                                            dot={{ r: 6 }}\r\n                                            name=\"Average (%)\"\r\n                                        />\r\n                                    </LineChart>\r\n                                </ResponsiveContainer>\r\n                            )}\r\n                        </div>\r\n                    </Card>\r\n\r\n                    {/* Subject-wise Comparison (Student Mode Only) */}\r\n                    {compareMode === 'student' && selectedStudent && subjectComparison.length > 0 && (\r\n                        <Card>\r\n                            <div className=\"p-4\">\r\n                                <h3 className=\"font-semibold text-gray-700 mb-4\">\r\n                                    Subject-wise Comparison\r\n                                </h3>\r\n                                <ResponsiveContainer width=\"100%\" height={300}>\r\n                                    <BarChart data={subjectComparison} layout=\"vertical\">\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                        <XAxis type=\"number\" domain={[0, 100]} />\r\n                                        <YAxis type=\"category\" dataKey=\"subject\" width={100} />\r\n                                        <Tooltip />\r\n                                        <Legend />\r\n                                        {terms.map((term, index) => (\r\n                                            <Bar\r\n                                                key={term}\r\n                                                dataKey={term.replace(' Term', '')}\r\n                                                fill={['#16a34a', '#3b82f6', '#f59e0b'][index % 3]}\r\n                                                name={term}\r\n                                            />\r\n                                        ))}\r\n                                    </BarChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        </Card>\r\n                    )}\r\n\r\n                    {/* Term Summary Table */}\r\n                    <Card>\r\n                        <div className=\"p-4\">\r\n                            <h3 className=\"font-semibold text-gray-700 mb-4\">Term Summary</h3>\r\n                            <table className=\"w-full text-sm\">\r\n                                <thead className=\"bg-gray-50\">\r\n                                    <tr>\r\n                                        <th className=\"px-4 py-2 text-left\">Term</th>\r\n                                        <th className=\"px-4 py-2 text-center\">Average</th>\r\n                                        <th className=\"px-4 py-2 text-center\">\r\n                                            {compareMode === 'student' ? 'Subjects' : 'Students'}\r\n                                        </th>\r\n                                        <th className=\"px-4 py-2 text-center\">Change</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {(compareMode === 'student' ? studentTermData : classTermData).map((row, index, arr) => {\r\n                                        const prev = index > 0 ? arr[index - 1].average : 0;\r\n                                        const change = index > 0 ? row.average - prev : 0;\r\n\r\n                                        return (\r\n                                            <tr key={row.term} className=\"border-t\">\r\n                                                <td className=\"px-4 py-3 font-medium\">{row.term} Term</td>\r\n                                                <td className=\"px-4 py-3 text-center\">\r\n                                                    <span className={`font-bold ${row.average >= 50 ? 'text-green-600' : 'text-red-600'\r\n                                                        }`}>\r\n                                                        {row.average.toFixed(1)}%\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"px-4 py-3 text-center text-gray-500\">\r\n                                                    {compareMode === 'student'\r\n                                                        ? (row as any).totalSubjects\r\n                                                        : (row as any).studentsWithScores\r\n                                                    }\r\n                                                </td>\r\n                                                <td className=\"px-4 py-3 text-center\">\r\n                                                    {index > 0 && (\r\n                                                        <span className={`font-medium ${change > 0 ? 'text-green-600' :\r\n                                                                change < 0 ? 'text-red-600' : 'text-gray-500'\r\n                                                            }`}>\r\n                                                            {change > 0 ? '+' : ''}{change.toFixed(1)}%\r\n                                                        </span>\r\n                                                    )}\r\n                                                </td>\r\n                                            </tr>\r\n                                        );\r\n                                    })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3249, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/ui/input.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Input: React.FC<InputProps> = ({ label, className, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <input className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props} />\r\n    </div>\r\n);\r\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,QAA8B,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,OAAO,iBACtE,6LAAC;QAAI,WAAU;;YACV,uBAAS,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAChE,6LAAC;gBAAM,WAAW,CAAC,6MAA6M,EAAE,aAAa,IAAI;gBAAG,GAAG,KAAK;;;;;;;;;;;;KAHzP"}},
    {"offset": {"line": 3290, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/components/features/grading/PromotionManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { ArrowUp, Check, X, AlertCircle, Save, RefreshCw } from 'lucide-react';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\nimport { Input } from '@/components/ui/input';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\nimport * as Utils from '@/lib/utils';\r\nimport * as Types from '@/lib/types';\r\n\r\nexport const PromotionManager: React.FC = () => {\r\n    const {\r\n        students,\r\n        classes,\r\n        scores,\r\n        settings,\r\n        setSettings,\r\n        setScores\r\n    } = useSchoolStore();\r\n    const { addToast } = useToast();\r\n\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [localThreshold, setLocalThreshold] = useState(settings.promotion_threshold);\r\n    const [promotionResults, setPromotionResults] = useState<Map<string, string | null>>(new Map());\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const nextClass = classes.find((c, i) => {\r\n        const currentIndex = classes.findIndex(cl => cl.id === selectedClass);\r\n        return i === currentIndex + 1;\r\n    });\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n\r\n    // Calculate student averages for promotion eligibility\r\n    const studentStats = useMemo(() => {\r\n        return activeStudents.map(student => {\r\n            // Get scores from all terms in current session\r\n            const termScores = scores.filter(\r\n                s => s.student_id === student.id && s.session === settings.current_session\r\n            );\r\n\r\n            // Calculate overall average across all terms\r\n            const allAverages = termScores.map(s => s.average).filter(a => a > 0);\r\n            const overallAverage = allAverages.length > 0\r\n                ? allAverages.reduce((a, b) => a + b, 0) / allAverages.length\r\n                : 0;\r\n\r\n            // Get position in class\r\n            const position = Utils.getStudentPosition(\r\n                student.id, students, scores, settings.current_session, settings.current_term\r\n            );\r\n\r\n            return {\r\n                student,\r\n                average: Math.round(overallAverage * 100) / 100,\r\n                termsWithScores: allAverages.length,\r\n                position,\r\n                eligible: overallAverage >= localThreshold,\r\n                promotedTo: promotionResults.get(student.id) || null\r\n            };\r\n        }).sort((a, b) => b.average - a.average);\r\n    }, [activeStudents, scores, settings, localThreshold, promotionResults]);\r\n\r\n    const eligibleCount = studentStats.filter(s => s.eligible).length;\r\n    const processedCount = studentStats.filter(s => s.promotedTo !== null).length;\r\n\r\n    const handleRunPromotion = () => {\r\n        if (!nextClass) {\r\n            addToast('No next class available for promotion', 'warning');\r\n            return;\r\n        }\r\n\r\n        setIsProcessing(true);\r\n        const results = new Map<string, string | null>();\r\n\r\n        studentStats.forEach(stat => {\r\n            if (stat.eligible) {\r\n                results.set(stat.student.id, nextClass.id);\r\n            } else {\r\n                results.set(stat.student.id, selectedClass); // Repeat class\r\n            }\r\n        });\r\n\r\n        setPromotionResults(results);\r\n        setIsProcessing(false);\r\n        addToast(`Processed ${studentStats.length} students`, 'success');\r\n    };\r\n\r\n    const handleTogglePromotion = (studentId: string) => {\r\n        if (!nextClass) return;\r\n\r\n        const current = promotionResults.get(studentId);\r\n        const newResults = new Map(promotionResults);\r\n\r\n        if (current === nextClass.id) {\r\n            newResults.set(studentId, selectedClass); // Demote to repeat\r\n        } else {\r\n            newResults.set(studentId, nextClass.id); // Promote\r\n        }\r\n\r\n        setPromotionResults(newResults);\r\n    };\r\n\r\n    const handleSavePromotions = () => {\r\n        // Update the Score records with promoted_to field\r\n        const updatedScores = scores.map(score => {\r\n            const promotedTo = promotionResults.get(score.student_id);\r\n            if (promotedTo && score.session === settings.current_session) {\r\n                return { ...score, promoted_to: promotedTo };\r\n            }\r\n            return score;\r\n        });\r\n\r\n        setScores(updatedScores);\r\n        addToast('Promotions saved to student records', 'success');\r\n    };\r\n\r\n    const handleSaveThreshold = () => {\r\n        setSettings({ ...settings, promotion_threshold: localThreshold });\r\n        addToast(`Threshold updated to ${localThreshold}%`, 'success');\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-gray-900\">Promotion Engine</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">\r\n                        Manage end-of-session student promotions\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm text-gray-500\">Threshold:</span>\r\n                        <Input\r\n                            type=\"number\"\r\n                            value={localThreshold}\r\n                            onChange={e => setLocalThreshold(parseInt(e.target.value) || 0)}\r\n                            min={0}\r\n                            max={100}\r\n                            className=\"w-20\"\r\n                        />\r\n                        <span className=\"text-sm text-gray-500\">%</span>\r\n                        {localThreshold !== settings.promotion_threshold && (\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={handleSaveThreshold}>\r\n                                <Save className=\"h-3 w-3 mr-1\" />\r\n                                Save\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                {/* Stats Cards */}\r\n                <Card className=\"bg-gradient-to-br from-brand-50 to-white\">\r\n                    <div className=\"p-4 text-center\">\r\n                        <p className=\"text-sm text-gray-500\">Total Students</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900\">{studentStats.length}</p>\r\n                    </div>\r\n                </Card>\r\n                <Card className=\"bg-gradient-to-br from-green-50 to-white\">\r\n                    <div className=\"p-4 text-center\">\r\n                        <p className=\"text-sm text-gray-500\">Eligible for Promotion</p>\r\n                        <p className=\"text-3xl font-bold text-green-600\">{eligibleCount}</p>\r\n                    </div>\r\n                </Card>\r\n                <Card className=\"bg-gradient-to-br from-red-50 to-white\">\r\n                    <div className=\"p-4 text-center\">\r\n                        <p className=\"text-sm text-gray-500\">To Repeat</p>\r\n                        <p className=\"text-3xl font-bold text-red-600\">{studentStats.length - eligibleCount}</p>\r\n                    </div>\r\n                </Card>\r\n                <Card className=\"bg-gradient-to-br from-blue-50 to-white\">\r\n                    <div className=\"p-4 text-center\">\r\n                        <p className=\"text-sm text-gray-500\">Processed</p>\r\n                        <p className=\"text-3xl font-bold text-blue-600\">{processedCount}</p>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                {/* Class Selection */}\r\n                <Card className=\"lg:col-span-1\">\r\n                    <div className=\"p-4 space-y-4\">\r\n                        <Select\r\n                            label=\"Select Class\"\r\n                            value={selectedClass}\r\n                            onChange={e => {\r\n                                setSelectedClass(e.target.value);\r\n                                setPromotionResults(new Map());\r\n                            }}\r\n                        >\r\n                            {classes.map(c => (\r\n                                <option key={c.id} value={c.id}>{c.name}</option>\r\n                            ))}\r\n                        </Select>\r\n\r\n                        <div className=\"p-3 bg-gray-50 rounded-lg space-y-2 text-sm\">\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-500\">From:</span>\r\n                                <span className=\"font-medium\">{currentClass?.name}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-500\">To:</span>\r\n                                <span className=\"font-medium text-brand-600\">\r\n                                    {nextClass?.name || 'N/A (Final Class)'}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button\r\n                            className=\"w-full\"\r\n                            onClick={handleRunPromotion}\r\n                            disabled={isProcessing || !nextClass}\r\n                        >\r\n                            <RefreshCw className={`h-4 w-4 mr-2 ${isProcessing ? 'animate-spin' : ''}`} />\r\n                            Run Auto-Promotion\r\n                        </Button>\r\n\r\n                        {processedCount > 0 && (\r\n                            <Button\r\n                                className=\"w-full\"\r\n                                variant=\"outline\"\r\n                                onClick={handleSavePromotions}\r\n                            >\r\n                                <Save className=\"h-4 w-4 mr-2\" />\r\n                                Save Promotions\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n\r\n                {/* Student List */}\r\n                <Card className=\"lg:col-span-3\">\r\n                    <div className=\"p-4\">\r\n                        <h3 className=\"font-semibold text-gray-700 mb-4\">\r\n                            Students in {currentClass?.name}\r\n                        </h3>\r\n\r\n                        <table className=\"w-full text-sm\">\r\n                            <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-2 text-left\">Student</th>\r\n                                    <th className=\"px-4 py-2 text-center\">Average</th>\r\n                                    <th className=\"px-4 py-2 text-center\">Position</th>\r\n                                    <th className=\"px-4 py-2 text-center\">Status</th>\r\n                                    <th className=\"px-4 py-2 text-center\">Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {studentStats.map(stat => {\r\n                                    const isPromoted = stat.promotedTo === nextClass?.id;\r\n\r\n                                    return (\r\n                                        <tr key={stat.student.id} className=\"border-t\">\r\n                                            <td className=\"px-4 py-3\">\r\n                                                <div>\r\n                                                    <p className=\"font-medium text-gray-900\">{stat.student.names}</p>\r\n                                                    <p className=\"text-xs text-gray-500\">{stat.student.student_no}</p>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-4 py-3 text-center\">\r\n                                                <span className={`font-bold ${stat.eligible ? 'text-green-600' : 'text-red-600'\r\n                                                    }`}>\r\n                                                    {stat.average.toFixed(1)}%\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-4 py-3 text-center\">\r\n                                                {stat.position ? Utils.ordinalSuffix(stat.position) : '-'}\r\n                                            </td>\r\n                                            <td className=\"px-4 py-3 text-center\">\r\n                                                {stat.promotedTo ? (\r\n                                                    <span className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${isPromoted\r\n                                                        ? 'bg-green-100 text-green-700'\r\n                                                        : 'bg-red-100 text-red-700'\r\n                                                        }`}>\r\n                                                        {isPromoted ? (\r\n                                                            <><ArrowUp className=\"h-3 w-3\" /> Promoted</>\r\n                                                        ) : (\r\n                                                            <><X className=\"h-3 w-3\" /> Repeat</>\r\n                                                        )}\r\n                                                    </span>\r\n                                                ) : (\r\n                                                    <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600\">\r\n                                                        {stat.eligible ? (\r\n                                                            <><Check className=\"h-3 w-3\" /> Eligible</>\r\n                                                        ) : (\r\n                                                            <><AlertCircle className=\"h-3 w-3\" /> Below Threshold</>\r\n                                                        )}\r\n                                                    </span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"px-4 py-3 text-center\">\r\n                                                {stat.promotedTo && nextClass && (\r\n                                                    <button\r\n                                                        onClick={() => handleTogglePromotion(stat.student.id)}\r\n                                                        className={`text-xs px-2 py-1 rounded ${isPromoted\r\n                                                            ? 'text-red-600 hover:bg-red-50'\r\n                                                            : 'text-green-600 hover:bg-green-50'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {isPromoted ? 'Set to Repeat' : 'Promote'}\r\n                                                    </button>\r\n                                                )}\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n\r\n                                {studentStats.length === 0 && (\r\n                                    <tr>\r\n                                        <td colSpan={5} className=\"px-4 py-8 text-center text-gray-500\">\r\n                                            No students in this class\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4094, "column": 0}, "map": {"version":3,"sources":["file:///D:/school_manager/app/%28dashboard%29/grading/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { GradingView } from '@/components/features/GradingView';\r\nimport { SubjectTeacherManager } from '@/components/features/grading/SubjectTeacherManager';\r\nimport { TermComparisonView } from '@/components/features/grading/TermComparisonView';\r\nimport { PromotionManager } from '@/components/features/grading/PromotionManager';\r\n\r\nexport default function GradingPage() {\r\n    const { students, classes, scores, settings, setScores } = useSchoolStore();\r\n    const [activeTab, setActiveTab] = useState<'grading' | 'comparison' | 'promotion' | 'assignments'>('grading');\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Tab Navigation */}\r\n            <div className=\"flex bg-gray-100 p-1 rounded-lg w-fit\">\r\n                <button\r\n                    onClick={() => setActiveTab('grading')}\r\n                    className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${activeTab === 'grading' ? 'bg-white shadow text-brand-700' : 'text-gray-600 hover:text-gray-900'\r\n                        }`}\r\n                >\r\n                    Score Entry\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('comparison')}\r\n                    className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${activeTab === 'comparison' ? 'bg-white shadow text-brand-700' : 'text-gray-600 hover:text-gray-900'\r\n                        }`}\r\n                >\r\n                    Term Comparison\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('promotion')}\r\n                    className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${activeTab === 'promotion' ? 'bg-white shadow text-brand-700' : 'text-gray-600 hover:text-gray-900'\r\n                        }`}\r\n                >\r\n                    Promotions\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('assignments')}\r\n                    className={`px-4 py-2 text-sm font-medium rounded-md transition-colors ${activeTab === 'assignments' ? 'bg-white shadow text-brand-700' : 'text-gray-600 hover:text-gray-900'\r\n                        }`}\r\n                >\r\n                    Subject Teachers\r\n                </button>\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            {activeTab === 'grading' && (\r\n                <GradingView\r\n                    students={students}\r\n                    classes={classes}\r\n                    scores={scores}\r\n                    settings={settings}\r\n                    onSaveScores={setScores}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'comparison' && (\r\n                <TermComparisonView\r\n                    students={students}\r\n                    classes={classes}\r\n                    scores={scores}\r\n                    settings={settings}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'promotion' && (\r\n                <PromotionManager />\r\n            )}\r\n\r\n            {activeTab === 'assignments' && (\r\n                <SubjectTeacherManager />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AANA;;;;;;;AAQe,SAAS;;IACpB,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAA,iIAAc;IACzE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAyD;IAEnG,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,YAAY,mCAAmC,qCAChI;kCACT;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,eAAe,mCAAmC,qCACnI;kCACT;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,cAAc,mCAAmC,qCAClI;kCACT;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,gBAAgB,mCAAmC,qCACpI;kCACT;;;;;;;;;;;;YAMJ,cAAc,2BACX,6LAAC,wJAAW;gBACR,UAAU;gBACV,SAAS;gBACT,QAAQ;gBACR,UAAU;gBACV,cAAc;;;;;;YAIrB,cAAc,8BACX,6LAAC,iLAAkB;gBACf,UAAU;gBACV,SAAS;gBACT,QAAQ;gBACR,UAAU;;;;;;YAIjB,cAAc,6BACX,6LAAC,6KAAgB;;;;;YAGpB,cAAc,+BACX,6LAAC,uLAAqB;;;;;;;;;;;AAItC;GAnEwB;;QACuC,iIAAc;;;KADrD"}}]
}