{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///d:/school_manager/lib/utils.ts"],"sourcesContent":["\nimport { ScoreRow, Settings, Class, Subject, Student, Teacher, Staff, FeeStructure, Payment, Score, Attendance } from './types';\n\nexport const calculateGrade = (total: number) => {\n  if (total >= 75) return { grade: 'A', comment: 'Excellent' };\n  if (total >= 65) return { grade: 'B', comment: 'Very Good' };\n  if (total >= 50) return { grade: 'C', comment: 'Good' };\n  if (total >= 40) return { grade: 'D', comment: 'Fair' };\n  return { grade: 'F', comment: 'Fail' };\n};\n\nexport const generateId = () => crypto.randomUUID();\n\nexport const getCurrentTimestamp = () => Date.now();\n\nexport const getTodayString = () => new Date().toISOString().split('T')[0];\n\n// --- STORAGE KEYS ---\nexport const STORAGE_KEYS = {\n  SETTINGS: 'ng_school_settings',\n  STUDENTS: 'ng_school_students',\n  TEACHERS: 'ng_school_teachers',\n  STAFF: 'ng_school_staff',\n  CLASSES: 'ng_school_classes',\n  FEES: 'ng_school_fees',\n  PAYMENTS: 'ng_school_payments',\n  EXPENSES: 'ng_school_expenses',\n  SCORES: 'ng_school_scores',\n  ATTENDANCE: 'ng_school_attendance'\n};\n\n// Generic Load/Save\nexport const loadFromStorage = <T>(key: string, fallback: T): T => {\n  try {\n    const item = localStorage.getItem(key);\n    return item ? JSON.parse(item) : fallback;\n  } catch (e) {\n    console.error(`Error loading ${key}`, e);\n    return fallback;\n  }\n};\n\nexport const saveToStorage = (key: string, data: any) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n  } catch (e) {\n    console.error(`Error saving ${key}`, e);\n  }\n};\n\nexport const INITIAL_SETTINGS: Settings = {\n  id: 'singleton',\n  created_at: Date.now(),\n  updated_at: Date.now(),\n  school_name: 'Bright Future Academy',\n  school_address: '123 Education Lane, Lagos, Nigeria',\n  school_email: 'info@brightfuture.ng',\n  school_phone: '08012345678',\n  school_tagline: 'Knowledge for a brighter tomorrow',\n  current_session: '2025/2026',\n  current_term: 'First Term',\n  \n  logo_media: null,\n  watermark_media: null,\n  \n  director_name: 'Godspower Arthur',\n  director_signature: null,\n  head_of_school_name: 'Oluwaseun Arthur',\n  head_of_school_signature: null,\n\n  subjects_global: ['Mathematics', 'English', 'Science'],\n  terms: ['First Term', 'Second Term', 'Third Term']\n};\n\nexport const PRESET_PRESCHOOL_SUBJECTS = [\n  'Language',\n  'Numeracy',\n  'Sensorial',\n  'Practical Life',\n  'Cultural Studies',\n  'Art',\n  'Story Telling',\n  'C.R.S'\n];\n\nexport const PRESET_PRIMARY_SUBJECTS = [\n  'Mathematics',\n  'English Language',\n  'Basic Science',\n  'Social Studies',\n  'Civic Education',\n  'C.R.S',\n  'Verbal Reasoning',\n  'Quantitative Reasoning',\n  'ICT',\n  'Creative Art',\n  'Vocational Aptitude',\n  'Writing'\n];\n\nexport const getSubjectsForClass = (cls: Class | undefined) => {\n  if (!cls) return [];\n  if (cls.subjects && cls.subjects.length > 0) return cls.subjects;\n  \n  const lowerName = cls.name.toLowerCase();\n  if (lowerName.includes('play') || lowerName.includes('reception') || lowerName.includes('nursery') || lowerName.includes('kinder')) {\n    return PRESET_PRESCHOOL_SUBJECTS;\n  }\n  return PRESET_PRIMARY_SUBJECTS;\n};\n\nexport const PRESET_CLASSES = [\n  'Playschool', 'Reception', 'Kindergarten', \n  'Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5', 'Year 6'\n];\n\nexport const DOMAINS_AFFECTIVE = [\n  'Punctuality', 'Attentiveness', 'Neatness', 'Honesty', 'Self Control', 'Politeness', 'Leadership'\n];\n\nexport const DOMAINS_PSYCHOMOTOR = [\n  'Handwriting', 'Verbal Fluency', 'Sports/Games', 'Handling Tools', 'Drawing/Painting', 'Music/Dance'\n];\n\n// Mock Initial Data (Seeds)\nexport const SEED_TEACHERS: Teacher[] = [\n  { id: 't1', name: 'Mr. John Doe', address: 'Lagos', email: 'john@school.ng', phone: '08012345678', created_at: Date.now(), updated_at: Date.now() },\n  { id: 't2', name: 'Mrs. Jane Smith', address: 'Abuja', email: 'jane@school.ng', phone: '08087654321', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const SEED_STAFF: Staff[] = [\n  { id: 'st1', name: 'Mrs. Grace Okoro', role: 'Bursar', tasks: 'Collect fees, manage accounts', email: 'bursar@school.ng', phone: '08099999999', address: 'Lagos', created_at: Date.now(), updated_at: Date.now() },\n  { id: 'st2', name: 'Mr. Ahmed Musa', role: 'Security', tasks: 'Gate security, patrol', email: '', phone: '08088888888', address: 'Lagos', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const SEED_CLASSES: Class[] = PRESET_CLASSES.map((name, i) => ({\n  id: `c-${i}`,\n  name,\n  class_teacher_id: i === 0 ? 't1' : (i === 3 ? 't2' : null),\n  subjects: null,\n  created_at: Date.now(),\n  updated_at: Date.now(),\n}));\n\nexport const SEED_STUDENTS: Student[] = [\n  { id: 's1', student_no: 'ST001', names: 'Chinedu Eze', gender: 'Male', class_id: 'c-3', dob: '2015-05-12', parent_name: 'Mr. Eze', parent_phone: '08000000001', address: 'Ikeja', created_at: Date.now(), updated_at: Date.now() },\n  { id: 's2', student_no: 'ST002', names: 'Amina Bello', gender: 'Female', class_id: 'c-3', dob: '2015-08-23', parent_name: 'Mrs. Bello', parent_phone: '08000000002', address: 'Lekki', created_at: Date.now(), updated_at: Date.now() },\n  { id: 's3', student_no: 'ST003', names: 'Funke Akindele', gender: 'Female', class_id: 'c-0', dob: '2019-02-10', parent_name: 'Mr. Akindele', parent_phone: '08000000003', address: 'Yaba', created_at: Date.now(), updated_at: Date.now() },\n];\n\nexport const formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN' }).format(amount);\n};\n\nexport const getStudentBalance = (student: Student, fees: FeeStructure[], payments: Payment[], session: string, term: string) => {\n  // Calculate total bill for this session/term\n  const classFees = fees.filter(f => \n    f.session === session && \n    f.term === term && \n    (f.class_id === null || f.class_id === student.class_id)\n  );\n  const totalBill = classFees.reduce((acc, f) => acc + f.amount, 0);\n  \n  // Calculate total paid\n  const studentPayments = payments.filter(p => \n    p.student_id === student.id && \n    p.session === session && \n    p.term === term\n  );\n  const totalPaid = studentPayments.reduce((acc, p) => acc + p.amount, 0);\n\n  return { totalBill, totalPaid, balance: totalBill - totalPaid };\n};\n\n// Helper to ordinalize numbers (1st, 2nd, 3rd)\nexport const ordinalSuffix = (i: number) => {\n  const j = i % 10, k = i % 100;\n  if (j === 1 && k !== 11) return i + \"st\";\n  if (j === 2 && k !== 12) return i + \"nd\";\n  if (j === 3 && k !== 13) return i + \"rd\";\n  return i + \"th\";\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,SAAS,IAAI,OAAO;QAAE,OAAO;QAAK,SAAS;IAAY;IAC3D,IAAI,SAAS,IAAI,OAAO;QAAE,OAAO;QAAK,SAAS;IAAY;IAC3D,IAAI,SAAS,IAAI,OAAO;QAAE,OAAO;QAAK,SAAS;IAAO;IACtD,IAAI,SAAS,IAAI,OAAO;QAAE,OAAO;QAAK,SAAS;IAAO;IACtD,OAAO;QAAE,OAAO;QAAK,SAAS;IAAO;AACvC;AAEO,MAAM,aAAa,IAAM,OAAO,UAAU;AAE1C,MAAM,sBAAsB,IAAM,KAAK,GAAG;AAE1C,MAAM,iBAAiB,IAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAGnE,MAAM,eAAe;IAC1B,UAAU;IACV,UAAU;IACV,UAAU;IACV,OAAO;IACP,SAAS;IACT,MAAM;IACN,UAAU;IACV,UAAU;IACV,QAAQ;IACR,YAAY;AACd;AAGO,MAAM,kBAAkB,CAAI,KAAa;IAC9C,IAAI;QACF,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;IACnC,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,KAAK,EAAE;QACtC,OAAO;IACT;AACF;AAEO,MAAM,gBAAgB,CAAC,KAAa;IACzC,IAAI;QACF,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAC3C,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,CAAC,aAAa,EAAE,KAAK,EAAE;IACvC;AACF;AAEO,MAAM,mBAA6B;IACxC,IAAI;IACJ,YAAY,KAAK,GAAG;IACpB,YAAY,KAAK,GAAG;IACpB,aAAa;IACb,gBAAgB;IAChB,cAAc;IACd,cAAc;IACd,gBAAgB;IAChB,iBAAiB;IACjB,cAAc;IAEd,YAAY;IACZ,iBAAiB;IAEjB,eAAe;IACf,oBAAoB;IACpB,qBAAqB;IACrB,0BAA0B;IAE1B,iBAAiB;QAAC;QAAe;QAAW;KAAU;IACtD,OAAO;QAAC;QAAc;QAAe;KAAa;AACpD;AAEO,MAAM,4BAA4B;IACvC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,0BAA0B;IACrC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,sBAAsB,CAAC;IAClC,IAAI,CAAC,KAAK,OAAO,EAAE;IACnB,IAAI,IAAI,QAAQ,IAAI,IAAI,QAAQ,CAAC,MAAM,GAAG,GAAG,OAAO,IAAI,QAAQ;IAEhE,MAAM,YAAY,IAAI,IAAI,CAAC,WAAW;IACtC,IAAI,UAAU,QAAQ,CAAC,WAAW,UAAU,QAAQ,CAAC,gBAAgB,UAAU,QAAQ,CAAC,cAAc,UAAU,QAAQ,CAAC,WAAW;QAClI,OAAO;IACT;IACA,OAAO;AACT;AAEO,MAAM,iBAAiB;IAC5B;IAAc;IAAa;IAC3B;IAAU;IAAU;IAAU;IAAU;IAAU;CACnD;AAEM,MAAM,oBAAoB;IAC/B;IAAe;IAAiB;IAAY;IAAW;IAAgB;IAAc;CACtF;AAEM,MAAM,sBAAsB;IACjC;IAAe;IAAkB;IAAgB;IAAkB;IAAoB;CACxF;AAGM,MAAM,gBAA2B;IACtC;QAAE,IAAI;QAAM,MAAM;QAAgB,SAAS;QAAS,OAAO;QAAkB,OAAO;QAAe,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;IAClJ;QAAE,IAAI;QAAM,MAAM;QAAmB,SAAS;QAAS,OAAO;QAAkB,OAAO;QAAe,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;CACtJ;AAEM,MAAM,aAAsB;IACjC;QAAE,IAAI;QAAO,MAAM;QAAoB,MAAM;QAAU,OAAO;QAAiC,OAAO;QAAoB,OAAO;QAAe,SAAS;QAAS,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;IACjN;QAAE,IAAI;QAAO,MAAM;QAAkB,MAAM;QAAY,OAAO;QAAyB,OAAO;QAAI,OAAO;QAAe,SAAS;QAAS,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;CAC1L;AAEM,MAAM,eAAwB,eAAe,GAAG,CAAC,CAAC,MAAM,IAAM,CAAC;QACpE,IAAI,CAAC,EAAE,EAAE,GAAG;QACZ;QACA,kBAAkB,MAAM,IAAI,OAAQ,MAAM,IAAI,OAAO;QACrD,UAAU;QACV,YAAY,KAAK,GAAG;QACpB,YAAY,KAAK,GAAG;IACtB,CAAC;AAEM,MAAM,gBAA2B;IACtC;QAAE,IAAI;QAAM,YAAY;QAAS,OAAO;QAAe,QAAQ;QAAQ,UAAU;QAAO,KAAK;QAAc,aAAa;QAAW,cAAc;QAAe,SAAS;QAAS,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;IACjO;QAAE,IAAI;QAAM,YAAY;QAAS,OAAO;QAAe,QAAQ;QAAU,UAAU;QAAO,KAAK;QAAc,aAAa;QAAc,cAAc;QAAe,SAAS;QAAS,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;IACtO;QAAE,IAAI;QAAM,YAAY;QAAS,OAAO;QAAkB,QAAQ;QAAU,UAAU;QAAO,KAAK;QAAc,aAAa;QAAgB,cAAc;QAAe,SAAS;QAAQ,YAAY,KAAK,GAAG;QAAI,YAAY,KAAK,GAAG;IAAG;CAC3O;AAEM,MAAM,iBAAiB,CAAC;IAC7B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM,GAAG,MAAM,CAAC;AACvF;AAEO,MAAM,oBAAoB,CAAC,SAAkB,MAAsB,UAAqB,SAAiB;IAC9G,6CAA6C;IAC7C,MAAM,YAAY,KAAK,MAAM,CAAC,CAAA,IAC5B,EAAE,OAAO,KAAK,WACd,EAAE,IAAI,KAAK,QACX,CAAC,EAAE,QAAQ,KAAK,QAAQ,EAAE,QAAQ,KAAK,QAAQ,QAAQ;IAEzD,MAAM,YAAY,UAAU,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAE/D,uBAAuB;IACvB,MAAM,kBAAkB,SAAS,MAAM,CAAC,CAAA,IACtC,EAAE,UAAU,KAAK,QAAQ,EAAE,IAC3B,EAAE,OAAO,KAAK,WACd,EAAE,IAAI,KAAK;IAEb,MAAM,YAAY,gBAAgB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE;IAErE,OAAO;QAAE;QAAW;QAAW,SAAS,YAAY;IAAU;AAChE;AAGO,MAAM,gBAAgB,CAAC;IAC5B,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI;IAC1B,IAAI,MAAM,KAAK,MAAM,IAAI,OAAO,IAAI;IACpC,IAAI,MAAM,KAAK,MAAM,IAAI,OAAO,IAAI;IACpC,IAAI,MAAM,KAAK,MAAM,IAAI,OAAO,IAAI;IACpC,OAAO,IAAI;AACb"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///d:/school_manager/app/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect, useRef, createContext, useContext } from 'react';\r\nimport {\r\n    Users, GraduationCap, BookOpen, Settings as SettingsIcon,\r\n    LayoutDashboard, FileText, Upload, Download, Printer,\r\n    Plus, Edit, Trash2, Search, Save, X, Menu, Image as ImageIcon,\r\n    UserCheck, Shield, DollarSign, Briefcase, User, Baby,\r\n    Calendar as CalendarIcon, ClipboardList, CreditCard,\r\n    PieChart as PieChartIcon, TrendingUp, TrendingDown, Receipt,\r\n    ArrowRight, Activity, AlertCircle, Phone, MapPin, ClipboardCheck,\r\n    FileSpreadsheet, BadgeCheck, LayoutList, CheckCircle, AlertTriangle, XCircle, Info, ChevronRight, Calculator,\r\n    Book, Library, QrCode, Database, Archive\r\n} from 'lucide-react';\r\nimport {\r\n    BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend,\r\n    PieChart, Pie, Cell\r\n} from 'recharts';\r\nimport * as Types from '../lib/types';\r\nimport * as Utils from '../lib/utils';\r\n\r\n// --- Toast System ---\r\n\r\ninterface ToastContextType {\r\n    addToast: (message: string, type: Types.ToastType) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nconst useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error('useToast must be used within a ToastProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nconst ToastItem = ({ id, message, type, onClose }: { id: string; message: string; type: Types.ToastType; onClose: (id: string) => void }) => {\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => onClose(id), 4000);\r\n        return () => clearTimeout(timer);\r\n    }, [id, onClose]);\r\n\r\n    const icons = {\r\n        success: <CheckCircle className=\"h-5 w-5 text-green-500\" />,\r\n        error: <XCircle className=\"h-5 w-5 text-red-500\" />,\r\n        warning: <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />,\r\n        info: <Info className=\"h-5 w-5 text-blue-500\" />\r\n    };\r\n\r\n    const styles = {\r\n        success: 'bg-green-50 border-green-200 text-green-800',\r\n        error: 'bg-red-50 border-red-200 text-red-800',\r\n        warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\r\n        info: 'bg-blue-50 border-blue-200 text-blue-800'\r\n    };\r\n\r\n    return (\r\n        <div className={`flex items-center w-80 p-4 mb-3 rounded-lg border shadow-lg transition-all transform animate-in slide-in-from-top-5 duration-300 ${styles[type]}`}>\r\n            <div className=\"inline-flex items-center justify-center flex-shrink-0 w-8 h-8\">\r\n                {icons[type]}\r\n            </div>\r\n            <div className=\"ml-3 text-sm font-medium\">{message}</div>\r\n            <button onClick={() => onClose(id)} className=\"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8 opacity-50 hover:opacity-100 hover:bg-black/5 transition-opacity\">\r\n                <X className=\"w-4 h-4\" />\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ToastProvider = ({ children }: { children?: React.ReactNode }) => {\r\n    const [toasts, setToasts] = useState<Types.ToastNotification[]>([]);\r\n\r\n    const addToast = (message: string, type: Types.ToastType) => {\r\n        const id = Math.random().toString(36).substring(2, 9);\r\n        setToasts((prev) => [...prev, { id, message, type }]);\r\n    };\r\n\r\n    const removeToast = (id: string) => {\r\n        setToasts((prev) => prev.filter((t) => t.id !== id));\r\n    };\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ addToast }}>\r\n            {children}\r\n            <div className=\"fixed top-4 right-4 z-50 flex flex-col items-end pointer-events-none\">\r\n                <div className=\"pointer-events-auto\">\r\n                    {toasts.map((toast) => (\r\n                        <ToastItem key={toast.id} {...toast} onClose={removeToast} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n\r\n// --- Shared UI Components ---\r\n\r\nconst Button: React.FC<React.ButtonHTMLAttributes<HTMLButtonElement> & { variant?: 'primary' | 'secondary' | 'danger' | 'ghost', size?: 'sm' | 'md' }> = ({ className, variant = 'primary', size = 'md', ...props }) => {\r\n    const base = \"inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none\";\r\n    const variants = {\r\n        primary: \"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm\",\r\n        secondary: \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500\",\r\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm\",\r\n        ghost: \"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500\"\r\n    };\r\n    const sizes = {\r\n        sm: \"h-8 px-3 text-sm\",\r\n        md: \"h-10 px-4 py-2\"\r\n    };\r\n    return <button className={`${base} ${variants[variant]} ${sizes[size]} ${className || ''}`} {...props} />;\r\n};\r\n\r\nconst Input: React.FC<React.InputHTMLAttributes<HTMLInputElement> & { label?: string }> = ({ label, className, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <input className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props} />\r\n    </div>\r\n);\r\n\r\nconst Select: React.FC<React.SelectHTMLAttributes<HTMLSelectElement> & { label?: string }> = ({ label, className, children, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <select className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props}>\r\n            {children}\r\n        </select>\r\n    </div>\r\n);\r\n\r\nconst Card: React.FC<{ children?: React.ReactNode, title?: string, className?: string, action?: React.ReactNode }> = ({ children, title, className, action }) => (\r\n    <div className={`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${className || ''}`}>\r\n        {(title || action) && (\r\n            <div className=\"flex flex-col space-y-1.5 p-6 pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    {title && <h3 className=\"font-semibold leading-none tracking-tight\">{title}</h3>}\r\n                    {action && <div>{action}</div>}\r\n                </div>\r\n            </div>\r\n        )}\r\n        <div className=\"p-6 pt-2\">{children}</div>\r\n    </div>\r\n);\r\n\r\nconst Modal: React.FC<{ isOpen: boolean; onClose: () => void; title: string; children?: React.ReactNode; size?: 'sm' | 'md' | 'lg' | 'xl' }> = ({ isOpen, onClose, title, children, size = 'md' }) => {\r\n    if (!isOpen) return null;\r\n    const sizes = {\r\n        sm: \"max-w-md\",\r\n        md: \"max-w-lg sm:max-w-2xl\",\r\n        lg: \"max-w-4xl\",\r\n        xl: \"max-w-6xl\"\r\n    };\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200 overflow-y-auto backdrop-blur-sm\">\r\n            <div className={`relative w-full ${sizes[size]} rounded-xl bg-white shadow-2xl my-8 flex flex-col max-h-[90vh]`}>\r\n                <div className=\"flex items-center justify-between border-b p-4 bg-gray-50 rounded-t-xl shrink-0\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n                    <button onClick={onClose} className=\"rounded-full p-1 hover:bg-gray-200 transition-colors\">\r\n                        <X className=\"h-5 w-5 text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n                <div className=\"p-6 overflow-y-auto\">{children}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Functional Modules ---\r\n// ... (DashboardView, StudentsView, ClassesView, GradingView, AttendanceView, IDCardView - kept from previous good implementation) ...\r\n\r\n// 0. DASHBOARD MODULE\r\nconst DashboardView = ({\r\n    students, teachers, staff, payments, expenses, fees, classes, settings, onChangeView\r\n}: {\r\n    students: Types.Student[],\r\n    teachers: Types.Teacher[],\r\n    staff: Types.Staff[],\r\n    payments: Types.Payment[],\r\n    expenses: Types.Expense[],\r\n    fees: Types.FeeStructure[],\r\n    classes: Types.Class[],\r\n    settings: Types.Settings,\r\n    onChangeView: (view: Types.ViewState) => void\r\n}) => {\r\n    // Calculations\r\n    const totalStudents = students.length;\r\n    const totalTeachers = teachers.length;\r\n    const totalStaff = staff.length;\r\n\r\n    // Financials (Current Session/Term context)\r\n    const currentSessionPayments = payments.filter(p => p.session === settings.current_session && p.term === settings.current_term);\r\n    const totalRevenue = currentSessionPayments.reduce((acc, p) => acc + p.amount, 0);\r\n\r\n    const currentSessionExpenses = expenses.filter(e => e.session === settings.current_session && e.term === settings.current_term);\r\n    const totalExpenses = currentSessionExpenses.reduce((acc, e) => acc + e.amount, 0);\r\n\r\n    // Expected Revenue calculation\r\n    let totalExpectedRevenue = 0;\r\n    students.forEach(s => {\r\n        const { totalBill } = Utils.getStudentBalance(s, fees, [], settings.current_session, settings.current_term); // Pass empty payments to just get bill\r\n        totalExpectedRevenue += totalBill;\r\n    });\r\n\r\n    const financeData = [\r\n        { name: 'Income', amount: totalRevenue, fill: '#10b981' }, // emerald-500\r\n        { name: 'Expenses', amount: totalExpenses, fill: '#ef4444' }, // red-500\r\n    ];\r\n    const genderData = [\r\n        { name: 'Male', value: students.filter(s => s.gender === 'Male').length, color: '#3b82f6' },\r\n        { name: 'Female', value: students.filter(s => s.gender === 'Female').length, color: '#ec4899' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Welcome */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight\">Executive Dashboard</h1>\r\n                    <p className=\"text-gray-500 font-medium mt-1\">Overview for {settings.current_session} • {settings.current_term}</p>\r\n                </div>\r\n                <div className=\"bg-white px-5 py-3 rounded-xl shadow-sm border border-gray-100 hidden md:block\">\r\n                    <span className=\"text-xs text-gray-400 uppercase font-bold tracking-wider\">Net Position</span>\r\n                    <div className={`text-2xl font-bold ${totalRevenue - totalExpenses >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>\r\n                        {Utils.formatCurrency(totalRevenue - totalExpenses)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Colorful Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-blue-100 text-sm font-medium\">Total Students</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{totalStudents}</h3>\r\n                            <p className=\"text-xs text-blue-200 mt-1\">Active Enrollment</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><GraduationCap className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-purple-100 text-sm font-medium\">Total Staff</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{totalTeachers + totalStaff}</h3>\r\n                            <p className=\"text-xs text-purple-200 mt-1\">{totalTeachers} Teachers, {totalStaff} Non-Academic</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><Users className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-emerald-100 text-sm font-medium\">Revenue (Term)</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{Utils.formatCurrency(totalRevenue)}</h3>\r\n                            <p className=\"text-xs text-emerald-200 mt-1\">Target: {Utils.formatCurrency(totalExpectedRevenue)}</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><TrendingUp className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n                <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-500 to-rose-600 p-6 text-white shadow-lg transition-transform hover:scale-[1.02]\">\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-rose-100 text-sm font-medium\">Expenses (Term)</p>\r\n                            <h3 className=\"text-3xl font-bold mt-2\">{Utils.formatCurrency(totalExpenses)}</h3>\r\n                            <p className=\"text-xs text-rose-200 mt-1\">{currentSessionExpenses.length} Transactions</p>\r\n                        </div>\r\n                        <div className=\"p-2 bg-white/20 rounded-lg backdrop-blur-sm\"><TrendingDown className=\"h-6 w-6 text-white\" /></div>\r\n                    </div>\r\n                    <div className=\"absolute -bottom-4 -right-4 h-24 w-24 rounded-full bg-white/10 blur-xl\"></div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Charts & Actions */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <Card title=\"Financial Overview\">\r\n                        <div className=\"h-72 w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <BarChart data={financeData}>\r\n                                    <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e5e7eb\" />\r\n                                    <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#6b7280', fontSize: 12 }} dy={10} />\r\n                                    <YAxis axisLine={false} tickLine={false} tickFormatter={(val) => `₦${val / 1000}k`} tick={{ fill: '#6b7280', fontSize: 12 }} />\r\n                                    <Tooltip formatter={(value) => [Utils.formatCurrency(value as number), 'Amount']} />\r\n                                    <Bar dataKey=\"amount\" radius={[6, 6, 0, 0]} barSize={60}>\r\n                                        {financeData.map((entry, index) => <Cell key={`cell-${index}`} fill={entry.fill} />)}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <Card title=\"Quick Actions\">\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            <button onClick={() => onChangeView('students')} className=\"group p-4 bg-white border border-blue-100 hover:border-blue-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-blue-100 text-blue-600 rounded-full group-hover:scale-110 transition-transform\"><Plus className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-blue-700\">New Student</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('fees')} className=\"group p-4 bg-white border border-emerald-100 hover:border-emerald-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-emerald-100 text-emerald-600 rounded-full group-hover:scale-110 transition-transform\"><CreditCard className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-emerald-700\">Record Fee</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('attendance')} className=\"group p-4 bg-white border border-rose-100 hover:border-rose-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-rose-100 text-rose-600 rounded-full group-hover:scale-110 transition-transform\"><CalendarIcon className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-rose-700\">Attendance</span>\r\n                            </button>\r\n                            <button onClick={() => onChangeView('id_cards')} className=\"group p-4 bg-white border border-orange-100 hover:border-orange-300 hover:shadow-md rounded-xl flex flex-col items-center justify-center gap-3 transition-all\">\r\n                                <div className=\"p-3 bg-orange-100 text-orange-600 rounded-full group-hover:scale-110 transition-transform\"><BadgeCheck className=\"h-6 w-6\" /></div>\r\n                                <span className=\"font-semibold text-gray-700 group-hover:text-orange-700\">ID Cards</span>\r\n                            </button>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n                <div className=\"space-y-6\">\r\n                    <Card title=\"Student Population\">\r\n                        <div className=\"h-56 w-full relative\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie data={genderData} cx=\"50%\" cy=\"50%\" innerRadius={60} outerRadius={80} paddingAngle={5} dataKey=\"value\">\r\n                                        {genderData.map((entry, index) => <Cell key={`cell-${index}`} fill={entry.color} strokeWidth={0} />)}\r\n                                    </Pie>\r\n                                    <Tooltip />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                            <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\r\n                                <span className=\"text-3xl font-bold text-gray-900\">{totalStudents}</span>\r\n                                <span className=\"text-xs text-gray-500 font-medium uppercase\">Students</span>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                    <Card title=\"Recent Transactions\">\r\n                        <div className=\"space-y-4 mt-2\">\r\n                            {payments.slice(-4).reverse().map(p => {\r\n                                const s = students.find(std => std.id === p.student_id);\r\n                                return (\r\n                                    <div key={p.id} className=\"flex items-center gap-3 pb-3 border-b border-gray-100 last:border-0 last:pb-0\">\r\n                                        <div className=\"h-10 w-10 rounded-full bg-emerald-50 text-emerald-600 flex items-center justify-center flex-shrink-0 border border-emerald-100\"><DollarSign className=\"h-5 w-5\" /></div>\r\n                                        <div className=\"min-w-0 flex-1\">\r\n                                            <p className=\"text-sm font-semibold text-gray-900 truncate\">{s?.names || 'Unknown Student'}</p>\r\n                                            <p className=\"text-xs text-gray-500\">School Fees Payment</p>\r\n                                        </div>\r\n                                        <div className=\"text-sm font-bold text-emerald-600\">+{Utils.formatCurrency(p.amount)}</div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            {payments.length === 0 && <p className=\"text-gray-400 text-sm text-center py-4 italic\">No recent payments recorded.</p>}\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst StudentsView = ({\r\n    students, classes, onAdd, onUpdate, onDelete\r\n}: {\r\n    students: Types.Student[], classes: Types.Class[], onAdd: (s: Types.Student) => void, onUpdate: (s: Types.Student) => void, onDelete: (id: string) => void\r\n}) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [filterClass, setFilterClass] = useState('all');\r\n    const [search, setSearch] = useState('');\r\n\r\n    const [formData, setFormData] = useState<Partial<Types.Student>>({});\r\n    const { addToast } = useToast();\r\n\r\n    const handleEdit = (s: Types.Student) => {\r\n        setFormData(s);\r\n        setEditingId(s.id);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        setFormData({\r\n            names: '', student_no: '', gender: 'Male', class_id: classes[0]?.id || '',\r\n            dob: '', parent_name: '', parent_phone: '', address: ''\r\n        });\r\n        setEditingId(null);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (editingId) {\r\n            onUpdate({ ...formData as Types.Student, updated_at: Date.now() });\r\n            addToast('Student updated successfully', 'success');\r\n        } else {\r\n            onAdd({\r\n                ...formData as Types.Student,\r\n                id: Utils.generateId(),\r\n                created_at: Date.now(),\r\n                updated_at: Date.now()\r\n            });\r\n            addToast('Student registered successfully', 'success');\r\n        }\r\n        setShowModal(false);\r\n    };\r\n\r\n    const filteredStudents = students.filter(s => {\r\n        const matchesClass = filterClass === 'all' || s.class_id === filterClass;\r\n        const matchesSearch = s.names.toLowerCase().includes(search.toLowerCase()) || s.student_no.toLowerCase().includes(search.toLowerCase());\r\n        return matchesClass && matchesSearch;\r\n    });\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Student Directory</h1>\r\n                    <p className=\"text-gray-500\">Manage student admissions and records</p>\r\n                </div>\r\n                <Button onClick={handleCreate}><Plus className=\"h-4 w-4 mr-2\" /> Register Student</Button>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col md:flex-row gap-4 bg-white p-4 rounded-lg border shadow-sm\">\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by name or admission no...\"\r\n                        className=\"pl-9 w-full h-10 rounded-md border border-gray-300 text-sm focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"w-full md:w-64\">\r\n                    <select\r\n                        className=\"w-full h-10 rounded-md border border-gray-300 text-sm px-3 focus:ring-2 focus:ring-brand-500 focus:outline-none\"\r\n                        value={filterClass}\r\n                        onChange={e => setFilterClass(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">All Classes</option>\r\n                        {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {filteredStudents.map(s => {\r\n                    const cls = classes.find(c => c.id === s.class_id)?.name || 'Unknown';\r\n                    return (\r\n                        <Card key={s.id} className=\"hover:border-brand-300 transition-colors group relative overflow-hidden\">\r\n                            <div className=\"flex flex-col items-center text-center p-2\">\r\n                                <div className=\"h-20 w-20 rounded-full bg-gray-200 mb-4 flex items-center justify-center overflow-hidden border-4 border-white shadow-sm\">\r\n                                    {s.passport_media ? (\r\n                                        <img src={s.passport_media} alt={s.names} className=\"h-full w-full object-cover\" />\r\n                                    ) : (\r\n                                        <User className=\"h-10 w-10 text-gray-400\" />\r\n                                    )}\r\n                                </div>\r\n                                <h3 className=\"font-bold text-gray-900 line-clamp-1\">{s.names}</h3>\r\n                                <span className=\"text-xs font-mono text-gray-500 mb-2\">{s.student_no}</span>\r\n                                <span className=\"px-2 py-1 rounded-full bg-brand-50 text-brand-700 text-xs font-medium mb-4\">{cls}</span>\r\n                                <div className=\"w-full border-t pt-3 flex justify-between items-center text-xs text-gray-500\">\r\n                                    <div className=\"flex flex-col items-start\"><span className=\"font-medium text-gray-700\">{s.gender}</span><span>{s.dob}</span></div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button onClick={() => handleEdit(s)} className=\"p-1.5 hover:bg-gray-100 rounded text-gray-600\"><Edit className=\"h-4 w-4\" /></button>\r\n                                        <button onClick={() => onDelete(s.id)} className=\"p-1.5 hover:bg-red-50 rounded text-red-500\"><Trash2 className=\"h-4 w-4\" /></button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    );\r\n                })}\r\n                {filteredStudents.length === 0 && (\r\n                    <div className=\"col-span-full py-12 text-center text-gray-500 border-2 border-dashed rounded-xl\">\r\n                        <div className=\"mx-auto h-12 w-12 text-gray-300 mb-3\"><UserCheck className=\"h-full w-full\" /></div>\r\n                        <p>No students found matching your criteria.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title={editingId ? \"Edit Student\" : \"Register New Student\"}>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <Input label=\"Full Name\" required value={formData.names} onChange={e => setFormData({ ...formData, names: e.target.value })} placeholder=\"Surname Firstname\" />\r\n                        <Input label=\"Admission Number\" required value={formData.student_no} onChange={e => setFormData({ ...formData, student_no: e.target.value })} />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <Select label=\"Gender\" value={formData.gender} onChange={e => setFormData({ ...formData, gender: e.target.value as any })}>\r\n                            <option value=\"Male\">Male</option>\r\n                            <option value=\"Female\">Female</option>\r\n                        </Select>\r\n                        <Select label=\"Class\" value={formData.class_id} onChange={e => setFormData({ ...formData, class_id: e.target.value })}>\r\n                            <option value=\"\">Select Class</option>\r\n                            {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                        </Select>\r\n                    </div>\r\n                    <Input label=\"Date of Birth\" type=\"date\" value={formData.dob} onChange={e => setFormData({ ...formData, dob: e.target.value })} />\r\n                    <div className=\"border-t pt-4 mt-2\">\r\n                        <h4 className=\"text-sm font-bold text-gray-900 mb-3 uppercase tracking-wide\">Parent/Guardian Info</h4>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <Input label=\"Parent Name\" value={formData.parent_name} onChange={e => setFormData({ ...formData, parent_name: e.target.value })} />\r\n                            <Input label=\"Phone Number\" value={formData.parent_phone} onChange={e => setFormData({ ...formData, parent_phone: e.target.value })} />\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                            <Input label=\"Residential Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                        </div>\r\n                    </div>\r\n                    <Button type=\"submit\" className=\"w-full mt-4\">{editingId ? 'Update Record' : 'Complete Registration'}</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ClassesView = ({ classes, teachers, onUpdate }: { classes: Types.Class[], teachers: Types.Teacher[], onUpdate: (c: Types.Class) => void }) => {\r\n    const [editingClass, setEditingClass] = useState<Types.Class | null>(null);\r\n    const [searchSubject, setSearchSubject] = useState('');\r\n    const [newSubject, setNewSubject] = useState('');\r\n    const { addToast } = useToast();\r\n\r\n    const allKnownSubjects = Array.from(new Set([\r\n        ...Utils.PRESET_PRESCHOOL_SUBJECTS,\r\n        ...Utils.PRESET_PRIMARY_SUBJECTS,\r\n        'French', 'Music', 'Phonics', 'Handwriting', 'Diction', 'Home Economics', 'Agricultural Science',\r\n        'History', 'Geography', 'Literature', 'Coding/Robotics'\r\n    ])).sort();\r\n\r\n    const handleEdit = (cls: Types.Class) => {\r\n        const currentSubjects = cls.subjects ?? Utils.getSubjectsForClass(cls);\r\n        setEditingClass({ ...cls, subjects: currentSubjects });\r\n    };\r\n\r\n    const handleSave = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (editingClass) {\r\n            onUpdate({ ...editingClass, updated_at: Date.now() });\r\n            addToast('Class configuration updated', 'success');\r\n            setEditingClass(null);\r\n        }\r\n    };\r\n\r\n    const toggleSubject = (subj: string) => {\r\n        if (!editingClass) return;\r\n        const current = editingClass.subjects || [];\r\n        if (current.includes(subj)) {\r\n            setEditingClass({ ...editingClass, subjects: current.filter(s => s !== subj) });\r\n        } else {\r\n            setEditingClass({ ...editingClass, subjects: [...current, subj] });\r\n        }\r\n    };\r\n\r\n    const applyPreset = (type: 'nursery' | 'primary') => {\r\n        if (!editingClass) return;\r\n        const subjects = type === 'nursery' ? Utils.PRESET_PRESCHOOL_SUBJECTS : Utils.PRESET_PRIMARY_SUBJECTS;\r\n        setEditingClass({ ...editingClass, subjects: [...subjects] });\r\n    };\r\n\r\n    const addCustomSubject = () => {\r\n        if (!editingClass || !newSubject.trim()) return;\r\n        const subj = newSubject.trim();\r\n        const current = editingClass.subjects || [];\r\n        if (!current.includes(subj)) {\r\n            setEditingClass({ ...editingClass, subjects: [...current, subj] });\r\n            addToast(`Added ${subj}`, 'success');\r\n        }\r\n        setNewSubject('');\r\n    };\r\n\r\n    const activeSubjects = editingClass?.subjects || [];\r\n    const filteredPool = allKnownSubjects.filter(s => s.toLowerCase().includes(searchSubject.toLowerCase()));\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Class & Subject Configuration</h1>\r\n                <p className=\"text-gray-500\">Assign teachers and manage subjects for each class.</p>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                {classes.map(c => {\r\n                    const teacher = teachers.find(t => t.id === c.class_teacher_id);\r\n                    const subjectCount = (c.subjects ?? Utils.getSubjectsForClass(c)).length;\r\n                    return (\r\n                        <Card key={c.id} className=\"hover:border-brand-400 transition-all cursor-pointer group\" >\r\n                            <div className=\"flex flex-col h-full justify-between\">\r\n                                <div>\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <h3 className=\"font-bold text-xl text-gray-800\">{c.name}</h3>\r\n                                        <div className=\"bg-gray-100 p-2 rounded-full group-hover:bg-brand-50 transition-colors\"><BookOpen className=\"h-5 w-5 text-gray-500 group-hover:text-brand-600\" /></div>\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600 mb-4 flex items-center gap-2\">\r\n                                        <User className=\"h-4 w-4 text-gray-400\" />\r\n                                        {teacher ? <span className=\"font-medium text-brand-700\">{teacher.name}</span> : <span className=\"italic text-gray-400\">No Class Teacher</span>}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"border-t pt-4 flex justify-between items-center\">\r\n                                    <span className=\"text-xs font-medium bg-gray-100 px-2 py-1 rounded text-gray-600\">{subjectCount} Subjects</span>\r\n                                    <Button size=\"sm\" variant=\"secondary\" onClick={() => handleEdit(c)}>Configure</Button>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <Modal isOpen={!!editingClass} onClose={() => setEditingClass(null)} title={`Configure ${editingClass?.name}`} size=\"lg\">\r\n                {editingClass && (\r\n                    <form onSubmit={handleSave} className=\"space-y-6\">\r\n                        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-100\">\r\n                            <Select label=\"Class Teacher\" value={editingClass.class_teacher_id || ''} onChange={e => setEditingClass({ ...editingClass, class_teacher_id: e.target.value || null })}>\r\n                                <option value=\"\">-- Select Teacher --</option>\r\n                                {teachers.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <h4 className=\"font-bold text-gray-900 flex items-center gap-2\"><Library className=\"h-4 w-4\" /> Assigned Subjects</h4>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button type=\"button\" onClick={() => applyPreset('nursery')} className=\"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200 font-medium\">Reset to Nursery</button>\r\n                                    <button type=\"button\" onClick={() => applyPreset('primary')} className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 font-medium\">Reset to Primary</button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2 mb-4\">\r\n                                <input className=\"flex-1 h-9 rounded-md border border-gray-300 px-3 text-sm focus:ring-brand-500 focus:outline-none\" placeholder=\"Add custom subject...\" value={newSubject} onChange={e => setNewSubject(e.target.value)} onKeyDown={e => { if (e.key === 'Enter') { e.preventDefault(); addCustomSubject(); } }} />\r\n                                <Button type=\"button\" size=\"sm\" onClick={addCustomSubject}>Add</Button>\r\n                            </div>\r\n                            <div className=\"mb-2 relative\">\r\n                                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400\" />\r\n                                <input className=\"w-full h-9 pl-9 rounded-md border border-gray-300 text-sm focus:ring-brand-500 focus:outline-none\" placeholder=\"Filter subjects...\" value={searchSubject} onChange={e => setSearchSubject(e.target.value)} />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-[300px] overflow-y-auto border rounded-md p-4 bg-gray-50/50\">\r\n                                {filteredPool.map(subj => {\r\n                                    const isActive = activeSubjects.includes(subj);\r\n                                    return (\r\n                                        <label key={subj} className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm ${isActive ? 'bg-brand-50 text-brand-900 font-medium border border-brand-200' : 'hover:bg-gray-100 text-gray-600 border border-transparent'}`}>\r\n                                            <input type=\"checkbox\" className=\"rounded text-brand-600 focus:ring-brand-500 h-4 w-4\" checked={isActive} onChange={() => toggleSubject(subj)} />\r\n                                            {subj}\r\n                                        </label>\r\n                                    );\r\n                                })}\r\n                                {activeSubjects.filter(s => !allKnownSubjects.includes(s) && !s.toLowerCase().includes(searchSubject.toLowerCase())).map(subj => (\r\n                                    <label key={subj} className=\"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm bg-brand-50 text-brand-900 font-medium border border-brand-200\">\r\n                                        <input type=\"checkbox\" className=\"rounded text-brand-600 focus:ring-brand-500 h-4 w-4\" checked={true} onChange={() => toggleSubject(subj)} />\r\n                                        {subj} (Custom)\r\n                                    </label>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"mt-2 text-right text-xs text-gray-500\">{activeSubjects.length} subjects selected</div>\r\n                        </div>\r\n                        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n                            <Button type=\"button\" variant=\"secondary\" onClick={() => setEditingClass(null)}>Cancel</Button>\r\n                            <Button type=\"submit\">Save Changes</Button>\r\n                        </div>\r\n                    </form>\r\n                )}\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ScoreInput = ({ value, max, onChange, className }: { value: number, max: number, onChange: (val: number) => void, className?: string }) => (\r\n    <input type=\"number\" min=\"0\" max={max} value={value || ''} onChange={e => { const v = parseFloat(e.target.value); if (!isNaN(v) && v <= max) onChange(v); if (e.target.value === '') onChange(0); }} className={`w-16 h-8 text-center border rounded focus:ring-2 focus:ring-brand-500 focus:outline-none ${className}`} />\r\n);\r\n\r\nconst GradingView = ({\r\n    students, classes, scores, settings, onSaveScores\r\n}: {\r\n    students: Types.Student[], classes: Types.Class[], scores: Types.Score[], settings: Types.Settings, onSaveScores: (scores: Types.Score[]) => void\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'broadsheet' | 'report'>('broadsheet');\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedSubject, setSelectedSubject] = useState('');\r\n    const [reportStudentId, setReportStudentId] = useState('');\r\n    const [previewScore, setPreviewScore] = useState<Types.Score | null>(null);\r\n\r\n    const activeClass = classes.find(c => c.id === selectedClass);\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const classSubjects = Utils.getSubjectsForClass(activeClass);\r\n\r\n    useEffect(() => {\r\n        if (classSubjects.length > 0 && !classSubjects.includes(selectedSubject)) {\r\n            setSelectedSubject(classSubjects[0]);\r\n        }\r\n    }, [selectedClass, classSubjects]);\r\n\r\n    const handleScoreChange = (studentId: string, field: 'ca1' | 'ca2' | 'exam', value: number) => {\r\n        const newScores = [...scores];\r\n        let scoreIndex = newScores.findIndex(s =>\r\n            s.student_id === studentId &&\r\n            s.session === settings.current_session &&\r\n            s.term === settings.current_term\r\n        );\r\n        if (scoreIndex === -1) {\r\n            const newScore: Types.Score = {\r\n                id: Utils.generateId(), student_id: studentId, class_id: selectedClass, session: settings.current_session, term: settings.current_term, rows: [], average: 0, affective: {}, psychomotor: {}, created_at: Date.now(), updated_at: Date.now()\r\n            };\r\n            newScores.push(newScore);\r\n            scoreIndex = newScores.length - 1;\r\n        }\r\n        const score = newScores[scoreIndex];\r\n        let rowIndex = score.rows.findIndex(r => r.subject === selectedSubject);\r\n        if (rowIndex === -1) {\r\n            score.rows.push({ subject: selectedSubject, ca1: 0, ca2: 0, exam: 0, total: 0, grade: 'F', comment: '' });\r\n            rowIndex = score.rows.length - 1;\r\n        }\r\n        const row = score.rows[rowIndex];\r\n        (row as any)[field] = value;\r\n        row.total = row.ca1 + row.ca2 + row.exam;\r\n        const { grade, comment } = Utils.calculateGrade(row.total);\r\n        row.grade = grade;\r\n        row.comment = comment;\r\n        const totalScore = score.rows.reduce((acc, r) => acc + r.total, 0);\r\n        score.average = totalScore / score.rows.length;\r\n        score.total_score = totalScore;\r\n        onSaveScores(newScores);\r\n    };\r\n\r\n    const getRow = (studentId: string) => {\r\n        const score = scores.find(s => s.student_id === studentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        return score?.rows.find(r => r.subject === selectedSubject) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n    };\r\n\r\n    const generateReport = () => {\r\n        if (!reportStudentId) return;\r\n        const score = scores.find(s => s.student_id === reportStudentId && s.session === settings.current_session && s.term === settings.current_term);\r\n        setPreviewScore(score || null);\r\n    };\r\n    useEffect(() => { generateReport(); }, [reportStudentId]);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Academic Grading</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    <button onClick={() => setActiveTab('broadsheet')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'broadsheet' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Score Entry</button>\r\n                    <button onClick={() => setActiveTab('report')} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === 'report' ? 'bg-white shadow text-brand-700' : 'text-gray-600'}`}>Report Cards</button>\r\n                </div>\r\n            </div>\r\n            {activeTab === 'broadsheet' && (\r\n                <Card className=\"min-h-[600px] flex flex-col\">\r\n                    <div className=\"flex gap-4 mb-6 p-4 bg-gray-50 border-b\">\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>\r\n                                {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"w-1/3\">\r\n                            <Select label=\"Select Subject\" value={selectedSubject} onChange={e => setSelectedSubject(e.target.value)}>\r\n                                {classSubjects.map(s => <option key={s} value={s}>{s}</option>)}\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto flex-1\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-100 text-gray-700 uppercase text-xs font-semibold\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-3 sticky left-0 bg-gray-100\">Student Name</th>\r\n                                    <th className=\"px-4 py-3 text-center\">CA 1 (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">CA 2 (20)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Exam (60)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Total (100)</th>\r\n                                    <th className=\"px-4 py-3 text-center\">Grade</th>\r\n                                    <th className=\"px-4 py-3\">Remark</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-200\">\r\n                                {activeStudents.map(s => {\r\n                                    const row = getRow(s.id);\r\n                                    return (\r\n                                        <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                            <td className=\"px-4 py-2 font-medium text-gray-900 sticky left-0 bg-white\">{s.names} <div className=\"text-xs text-gray-500 font-normal\">{s.student_no}</div></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca1} max={20} onChange={(v) => handleScoreChange(s.id, 'ca1', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.ca2} max={20} onChange={(v) => handleScoreChange(s.id, 'ca2', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><ScoreInput value={row.exam} max={60} onChange={(v) => handleScoreChange(s.id, 'exam', v)} /></td>\r\n                                            <td className=\"px-4 py-2 text-center font-bold\"><span className={row.total < 40 ? 'text-red-600' : 'text-gray-900'}>{row.total}</span></td>\r\n                                            <td className=\"px-4 py-2 text-center\"><span className={`px-2 py-1 rounded text-xs font-bold ${row.grade === 'A' ? 'bg-green-100 text-green-800' : row.grade === 'F' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'}`}>{row.grade}</span></td>\r\n                                            <td className=\"px-4 py-2 text-xs text-gray-500\">{row.comment}</td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                                {activeStudents.length === 0 && <tr><td colSpan={7} className=\"text-center py-8 text-gray-500\">No students in this class.</td></tr>}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </Card>\r\n            )}\r\n\r\n            {activeTab === 'report' && (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"lg:col-span-1 space-y-4\">\r\n                        <Card title=\"Selection\">\r\n                            <div className=\"space-y-4\">\r\n                                <Select label=\"Class\" value={selectedClass} onChange={e => { setSelectedClass(e.target.value); setReportStudentId(''); }}>\r\n                                    {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                                </Select>\r\n                                <div className=\"space-y-1 max-h-[400px] overflow-y-auto border rounded-md\">\r\n                                    {activeStudents.map(s => (\r\n                                        <button key={s.id} onClick={() => setReportStudentId(s.id)} className={`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex justify-between ${reportStudentId === s.id ? 'bg-brand-50 text-brand-700 font-medium' : 'text-gray-700'}`}>{s.names}<ChevronRight className=\"h-4 w-4 opacity-50\" /></button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"lg:col-span-3\">\r\n                        {previewScore && reportStudentId ? (\r\n                            <div className=\"bg-white border shadow-lg p-8 print:shadow-none print:border-none print:w-full\" id=\"report-card\">\r\n                                <div className=\"text-center border-b-2 border-brand-600 pb-4 mb-6\">\r\n                                    <h1 className=\"text-3xl font-bold text-brand-900 uppercase tracking-wider\">{settings.school_name}</h1>\r\n                                    <p className=\"text-gray-600\">{settings.school_address}</p>\r\n                                    <p className=\"text-gray-600 text-sm mt-1\">{settings.school_email} | {settings.school_phone}</p>\r\n                                </div>\r\n                                <table className=\"w-full border-collapse border border-gray-300 text-sm mb-6\">\r\n                                    <thead className=\"bg-brand-50 text-brand-900\">\r\n                                        <tr>\r\n                                            <th className=\"border border-gray-300 p-2 text-left\">Subject</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-center w-16\">Total</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-center w-16\">Grade</th>\r\n                                            <th className=\"border border-gray-300 p-2 text-left\">Remark</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {classSubjects.map(subj => {\r\n                                            const row = previewScore.rows.find(r => r.subject === subj) || { ca1: 0, ca2: 0, exam: 0, total: 0, grade: '-', comment: '-' };\r\n                                            return (\r\n                                                <tr key={subj}>\r\n                                                    <td className=\"border border-gray-300 p-2 font-medium\">{subj}</td>\r\n                                                    <td className=\"border border-gray-300 p-2 text-center font-bold\">{row.total || '-'}</td>\r\n                                                    <td className={`border border-gray-300 p-2 text-center font-bold ${row.grade === 'F' ? 'text-red-600' : 'text-brand-700'}`}>{row.grade}</td>\r\n                                                    <td className=\"border border-gray-300 p-2 text-xs italic text-gray-500\">{row.comment}</td>\r\n                                                </tr>\r\n                                            );\r\n                                        })}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        ) : <div className=\"h-full border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center p-12 text-gray-400\">Select a student</div>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AttendanceView = ({\r\n    students, classes, attendance, settings, onSave\r\n}: {\r\n    students: Types.Student[], classes: Types.Class[], attendance: Types.Attendance[], settings: Types.Settings, onSave: (att: Types.Attendance[]) => void\r\n}) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [date, setDate] = useState(Utils.getTodayString());\r\n    const { addToast } = useToast();\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const existingRecord = attendance.find(a => a.class_id === selectedClass && a.date === date && a.session === settings.current_session && a.term === settings.current_term);\r\n    const [currentStatuses, setCurrentStatuses] = useState<Record<string, 'present' | 'absent' | 'late'>>({});\r\n\r\n    useEffect(() => {\r\n        const initial: Record<string, 'present' | 'absent' | 'late'> = {};\r\n        activeStudents.forEach(s => {\r\n            const rec = existingRecord?.records.find(r => r.student_id === s.id);\r\n            initial[s.id] = rec ? rec.status : 'present';\r\n        });\r\n        setCurrentStatuses(initial);\r\n    }, [selectedClass, date, existingRecord, activeStudents.length]);\r\n\r\n    const handleSave = () => {\r\n        const records = activeStudents.map(s => ({ student_id: s.id, status: currentStatuses[s.id] || 'present' }));\r\n        const newEntry: Types.Attendance = {\r\n            id: existingRecord?.id || Utils.generateId(), date, class_id: selectedClass, session: settings.current_session, term: settings.current_term, records, created_at: existingRecord?.created_at || Date.now(), updated_at: Date.now()\r\n        };\r\n        const others = attendance.filter(a => a.id !== newEntry.id);\r\n        onSave([...others, newEntry]);\r\n        addToast('Attendance saved successfully', 'success');\r\n    };\r\n\r\n    const markAll = (status: 'present' | 'absent') => {\r\n        const update = { ...currentStatuses };\r\n        activeStudents.forEach(s => update[s.id] = status);\r\n        setCurrentStatuses(update);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Attendance Register</h1><p className=\"text-gray-500\">Daily roll call management</p></div>\r\n                <Button onClick={handleSave}><Save className=\"h-4 w-4 mr-2\" /> Save Register</Button>\r\n            </div>\r\n            <Card>\r\n                <div className=\"flex gap-4 mb-6 items-end border-b pb-4\">\r\n                    <div className=\"w-64\"><Select label=\"Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select></div>\r\n                    <div className=\"w-64\"><Input label=\"Date\" type=\"date\" value={date} onChange={e => setDate(e.target.value)} /></div>\r\n                    <div className=\"flex-1 flex justify-end gap-2\"><Button size=\"sm\" variant=\"secondary\" onClick={() => markAll('present')}>Mark All Present</Button><Button size=\"sm\" variant=\"secondary\" onClick={() => markAll('absent')}>Mark All Absent</Button></div>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {activeStudents.map(s => (\r\n                        <div key={s.id} className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\">\r\n                            <div><div className=\"font-bold text-gray-900\">{s.names}</div><div className=\"text-xs text-gray-500\">{s.student_no}</div></div>\r\n                            <div className=\"flex bg-gray-100 rounded-md p-1\">\r\n                                {(['present', 'late', 'absent'] as const).map(status => (\r\n                                    <button key={status} onClick={() => setCurrentStatuses(prev => ({ ...prev, [s.id]: status }))} className={`px-3 py-1 text-xs font-medium rounded capitalize transition-colors ${currentStatuses[s.id] === status ? (status === 'present' ? 'bg-green-500 text-white' : status === 'late' ? 'bg-yellow-500 text-white' : 'bg-red-500 text-white') : 'text-gray-500 hover:bg-gray-200'}`}>{status}</button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    {activeStudents.length === 0 && <p className=\"text-gray-500 italic col-span-3 text-center py-8\">No students in this class.</p>}\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst IDCardView = ({ students, classes, settings }: { students: Types.Student[], classes: Types.Class[], settings: Types.Settings }) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Student ID Cards</h1><p className=\"text-gray-500\">Generate and print student identity cards</p></div>\r\n                <div className=\"flex gap-4\"><Select className=\"w-48\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print Batch</Button></div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 print:grid-cols-2 print:gap-4 print:w-full\">\r\n                {activeStudents.map(s => (\r\n                    <div key={s.id} className=\"relative w-full aspect-[1.586] bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm print:shadow-none print:border-gray-900 break-inside-avoid\">\r\n                        <div className=\"absolute top-0 w-full h-1/3 bg-brand-600 flex items-center px-6\">\r\n                            <div className=\"flex-1\"><h3 className=\"text-white font-bold text-lg uppercase tracking-wider\">{settings.school_name}</h3><p className=\"text-brand-100 text-xs\">{settings.school_tagline}</p></div>\r\n                            {settings.logo_media && <img src={settings.logo_media} className=\"h-12 w-12 object-contain bg-white rounded-full p-1\" />}\r\n                        </div>\r\n                        <div className=\"absolute top-1/3 w-full h-2/3 p-6 flex gap-6 items-center\">\r\n                            <div className=\"h-24 w-24 rounded-lg bg-gray-100 border-2 border-brand-100 overflow-hidden flex-shrink-0\">{s.passport_media ? <img src={s.passport_media} className=\"h-full w-full object-cover\" /> : <User className=\"h-full w-full p-4 text-gray-300\" />}</div>\r\n                            <div className=\"flex-1 space-y-1\">\r\n                                <h2 className=\"text-xl font-bold text-gray-900 uppercase\">{s.names}</h2>\r\n                                <div className=\"text-sm text-gray-600\"><span className=\"font-bold text-gray-400 uppercase text-xs block\">ID Number</span>{s.student_no}</div>\r\n                                <div className=\"text-sm text-gray-600\"><span className=\"font-bold text-gray-400 uppercase text-xs block\">Class</span>{currentClass?.name}</div>\r\n                            </div>\r\n                            <div className=\"h-16 w-16 bg-gray-900 flex items-center justify-center text-white\"><QrCode className=\"h-10 w-10\" /></div>\r\n                        </div>\r\n                        <div className=\"absolute bottom-0 w-full h-8 bg-brand-900 flex items-center justify-center\"><p className=\"text-brand-100 text-[10px] uppercase tracking-widest\">Student Identity Card</p></div>\r\n                    </div>\r\n                ))}\r\n                {activeStudents.length === 0 && <div className=\"col-span-full text-center py-12 text-gray-400 italic\">No students found in this class.</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BroadsheetView = ({ students, classes, scores, settings }: { students: Types.Student[], classes: Types.Class[], scores: Types.Score[], settings: Types.Settings }) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const subjects = Utils.getSubjectsForClass(currentClass);\r\n\r\n    const sheetData = activeStudents.map(s => {\r\n        const studentScore = scores.find(sc => sc.student_id === s.id && sc.session === settings.current_session && sc.term === settings.current_term);\r\n        const subjectScores: Record<string, number> = {};\r\n        let total = 0;\r\n        subjects.forEach(subj => {\r\n            const row = studentScore?.rows.find(r => r.subject === subj);\r\n            const val = row ? row.total : 0;\r\n            subjectScores[subj] = val;\r\n            total += val;\r\n        });\r\n        return { ...s, scores: subjectScores, total, average: subjects.length > 0 ? total / subjects.length : 0 };\r\n    }).sort((a, b) => b.average - a.average);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Master Broadsheet</h1><p className=\"text-gray-500\">Class-wide results analysis</p></div>\r\n                <div className=\"flex gap-4\"><Select value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print Sheet</Button></div>\r\n            </div>\r\n            <div className=\"overflow-x-auto bg-white border rounded-lg shadow-sm print:shadow-none print:border-none\">\r\n                <div className=\"p-4 border-b bg-gray-50 text-center print:block hidden\">\r\n                    <h2 className=\"text-xl font-bold uppercase\">{settings.school_name}</h2>\r\n                    <p>Broadsheet Report • {currentClass?.name} • {settings.current_session} {settings.current_term}</p>\r\n                </div>\r\n                <table className=\"w-full text-xs text-left border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"bg-gray-100 text-gray-700\">\r\n                            <th className=\"px-2 py-3 border sticky left-0 bg-gray-100 w-48\">Student Name</th>\r\n                            {subjects.map(subj => <th key={subj} className=\"px-2 py-3 border text-center w-16 rotate-45 h-32 align-bottom pb-2\">{subj.substring(0, 15)}</th>)}\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Total</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Avg</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Pos</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sheetData.map((s, idx) => (\r\n                            <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                <td className=\"px-2 py-2 border font-medium sticky left-0 bg-white\">{s.names}</td>\r\n                                {subjects.map(subj => <td key={subj} className={`px-2 py-2 border text-center ${s.scores[subj] < 40 ? 'text-red-600 font-bold' : ''}`}>{s.scores[subj] || '-'}</td>)}\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.total}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.average.toFixed(1)}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{Utils.ordinalSuffix(idx + 1)}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst DataManagementView = () => {\r\n    const { addToast } = useToast();\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const handleExport = () => {\r\n        const data = {\r\n            settings: Utils.loadFromStorage(Utils.STORAGE_KEYS.SETTINGS, Utils.INITIAL_SETTINGS),\r\n            students: Utils.loadFromStorage(Utils.STORAGE_KEYS.STUDENTS, Utils.SEED_STUDENTS),\r\n            teachers: Utils.loadFromStorage(Utils.STORAGE_KEYS.TEACHERS, Utils.SEED_TEACHERS),\r\n            staff: Utils.loadFromStorage(Utils.STORAGE_KEYS.STAFF, Utils.SEED_STAFF),\r\n            classes: Utils.loadFromStorage(Utils.STORAGE_KEYS.CLASSES, Utils.SEED_CLASSES),\r\n            scores: Utils.loadFromStorage(Utils.STORAGE_KEYS.SCORES, []),\r\n            fees: Utils.loadFromStorage(Utils.STORAGE_KEYS.FEES, []),\r\n            payments: Utils.loadFromStorage(Utils.STORAGE_KEYS.PAYMENTS, []),\r\n            expenses: Utils.loadFromStorage(Utils.STORAGE_KEYS.EXPENSES, []),\r\n            attendance: Utils.loadFromStorage(Utils.STORAGE_KEYS.ATTENDANCE, [])\r\n        };\r\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url; a.download = `school_backup_${Utils.getTodayString()}.json`; a.click();\r\n        addToast('Backup downloaded successfully', 'success');\r\n    };\r\n    const handleImport = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0]; if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            try {\r\n                const data = JSON.parse(event.target?.result as string);\r\n                if (data.settings && data.students) {\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.SETTINGS, data.settings);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.STUDENTS, data.students);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.TEACHERS, data.teachers);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.STAFF, data.staff);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.CLASSES, data.classes);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.SCORES, data.scores);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.FEES, data.fees);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.PAYMENTS, data.payments);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.EXPENSES, data.expenses);\r\n                    Utils.saveToStorage(Utils.STORAGE_KEYS.ATTENDANCE, data.attendance);\r\n                    addToast('Data imported successfully! Refreshing...', 'success');\r\n                    setTimeout(() => window.location.reload(), 1500);\r\n                } else { addToast('Invalid backup file format', 'error'); }\r\n            } catch (err) { addToast('Error parsing file', 'error'); }\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n    return (\r\n        <div className=\"space-y-6 max-w-2xl mx-auto\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Data Management</h1>\r\n            <Card title=\"Backup & Restore\">\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"flex items-center gap-4 p-4 border rounded-lg bg-blue-50 border-blue-100\">\r\n                        <div className=\"p-3 bg-blue-100 text-blue-600 rounded-full\"><Download className=\"h-6 w-6\" /></div>\r\n                        <div className=\"flex-1\"><h3 className=\"font-bold text-gray-900\">Export Data</h3><p className=\"text-sm text-gray-600\">Download a complete JSON backup of all school records.</p></div>\r\n                        <Button onClick={handleExport}>Download Backup</Button>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4 p-4 border rounded-lg bg-orange-50 border-orange-100\">\r\n                        <div className=\"p-3 bg-orange-100 text-orange-600 rounded-full\"><Upload className=\"h-6 w-6\" /></div>\r\n                        <div className=\"flex-1\"><h3 className=\"font-bold text-gray-900\">Import Data</h3><p className=\"text-sm text-gray-600\">Restore from a previously saved backup file. This will overwrite current data.</p></div>\r\n                        <input type=\"file\" ref={fileInputRef} className=\"hidden\" accept=\".json\" onChange={handleImport} />\r\n                        <Button variant=\"secondary\" onClick={() => fileInputRef.current?.click()}>Select File</Button>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n            <Card title=\"System Info\">\r\n                <div className=\"text-sm text-gray-500 space-y-2\"><p>Storage Engine: LocalStorage (Browser)</p><p>Last Sync: {new Date().toLocaleString()}</p><p className=\"text-red-500 text-xs mt-4\">* Warning: Clearing browser cache will delete all data if not backed up.</p></div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TeachersView = ({ teachers, onAdd, onDelete }: { teachers: Types.Teacher[], onAdd: (t: Types.Teacher) => void, onDelete: (id: string) => void }) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [formData, setFormData] = useState({ name: '', email: '', phone: '', address: '' });\r\n    const { addToast } = useToast();\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAdd({ ...formData, id: Utils.generateId(), created_at: Date.now(), updated_at: Date.now() });\r\n        addToast('Teacher added successfully', 'success');\r\n        setShowModal(false); setFormData({ name: '', email: '', phone: '', address: '' });\r\n    };\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Teachers Directory</h1><p className=\"text-gray-500\">Manage academic staff</p></div><Button onClick={() => setShowModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Teacher</Button></div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {teachers.map(t => (\r\n                    <Card key={t.id} className=\"flex flex-col justify-between\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                            <div className=\"flex items-center gap-3\"><div className=\"h-12 w-12 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-lg\">{t.name.charAt(0)}</div><div><h3 className=\"font-bold text-gray-900\">{t.name}</h3><span className=\"text-xs bg-purple-50 text-purple-700 px-2 py-0.5 rounded-full\">Teacher</span></div></div>\r\n                            <button onClick={() => onDelete(t.id)} className=\"text-gray-400 hover:text-red-600 transition-colors\"><Trash2 className=\"h-4 w-4\" /></button>\r\n                        </div>\r\n                        <div className=\"space-y-2 text-sm text-gray-600\"><div className=\"flex items-center gap-2\"><Phone className=\"h-3 w-3\" /> {t.phone}</div><div className=\"flex items-center gap-2\"><div className=\"h-3 w-3 flex items-center justify-center\">@</div> {t.email}</div><div className=\"flex items-center gap-2\"><MapPin className=\"h-3 w-3\" /> {t.address}</div></div>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title=\"Add New Teacher\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Full Name\" required value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} />\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Phone Number\" required value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} /><Input label=\"Email Address\" type=\"email\" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} /></div>\r\n                    <Input label=\"Residential Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Teacher</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst StaffView = ({ staff, onAdd, onDelete }: { staff: Types.Staff[], onAdd: (s: Types.Staff) => void, onDelete: (id: string) => void }) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [formData, setFormData] = useState({ name: '', role: '', tasks: '', email: '', phone: '', address: '' });\r\n    const { addToast } = useToast();\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAdd({ ...formData, id: Utils.generateId(), created_at: Date.now(), updated_at: Date.now() });\r\n        addToast('Staff member added successfully', 'success');\r\n        setShowModal(false); setFormData({ name: '', role: '', tasks: '', email: '', phone: '', address: '' });\r\n    };\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Non-Academic Staff</h1><p className=\"text-gray-500\">Manage support staff and roles</p></div><Button onClick={() => setShowModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Staff</Button></div>\r\n            <div className=\"overflow-x-auto bg-white rounded-lg border shadow-sm\">\r\n                <table className=\"w-full text-sm text-left\">\r\n                    <thead className=\"bg-gray-50 text-gray-700 font-medium\"><tr><th className=\"px-4 py-3\">Name</th><th className=\"px-4 py-3\">Role</th><th className=\"px-4 py-3\">Contact</th><th className=\"px-4 py-3 text-right\">Actions</th></tr></thead>\r\n                    <tbody className=\"divide-y divide-gray-200\">\r\n                        {staff.map(s => (\r\n                            <tr key={s.id} className=\"hover:bg-gray-50\"><td className=\"px-4 py-3 font-medium text-gray-900\">{s.name}</td><td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-gray-100 rounded text-xs font-medium\">{s.role}</span></td><td className=\"px-4 py-3 text-xs\">{s.phone}</td><td className=\"px-4 py-3 text-right\"><button onClick={() => onDelete(s.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td></tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <Modal isOpen={showModal} onClose={() => setShowModal(false)} title=\"Add New Staff\">\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Full Name\" required value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} /><Input label=\"Job Title/Role\" required value={formData.role} onChange={e => setFormData({ ...formData, role: e.target.value })} /></div>\r\n                    <Input label=\"Assigned Tasks\" value={formData.tasks} onChange={e => setFormData({ ...formData, tasks: e.target.value })} />\r\n                    <div className=\"grid grid-cols-2 gap-4\"><Input label=\"Phone\" required value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} /><Input label=\"Email\" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} /></div>\r\n                    <Input label=\"Address\" value={formData.address} onChange={e => setFormData({ ...formData, address: e.target.value })} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Staff Member</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SettingsView = ({ settings, onUpdate }: { settings: Types.Settings, onUpdate: (s: Types.Settings) => void }) => {\r\n    const [formData, setFormData] = useState<Types.Settings>(settings);\r\n    const { addToast } = useToast();\r\n    const handleChange = (field: keyof Types.Settings, value: any) => { setFormData(prev => ({ ...prev, [field]: value })); };\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>, field: keyof Types.Settings) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) { const reader = new FileReader(); reader.onloadend = () => { handleChange(field, reader.result as string); }; reader.readAsDataURL(file); }\r\n    };\r\n    const handleSubmit = (e: React.FormEvent) => { e.preventDefault(); onUpdate({ ...formData, updated_at: Date.now() }); addToast('Settings updated successfully', 'success'); };\r\n    return (\r\n        <div className=\"space-y-6 max-w-5xl mx-auto\">\r\n            <div className=\"flex justify-between items-center\"><div><h1 className=\"text-2xl font-bold text-gray-900\">Settings & Branding</h1><p className=\"text-gray-500\">Configure school identity, session details, and report card assets.</p></div><Button onClick={handleSubmit}><Save className=\"h-4 w-4 mr-2\" /> Save Changes</Button></div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Card title=\"School Profile\">\r\n                    <div className=\"space-y-4\"><Input label=\"School Name\" value={formData.school_name} onChange={e => handleChange('school_name', e.target.value)} /><Input label=\"Email\" value={formData.school_email} onChange={e => handleChange('school_email', e.target.value)} /><Input label=\"Phone\" value={formData.school_phone} onChange={e => handleChange('school_phone', e.target.value)} /><Input label=\"Address\" value={formData.school_address} onChange={e => handleChange('school_address', e.target.value)} /><Input label=\"Tagline\" value={formData.school_tagline} onChange={e => handleChange('school_tagline', e.target.value)} /></div>\r\n                </Card>\r\n                <Card title=\"Session & Branding\">\r\n                    <div className=\"space-y-4\">\r\n                        <Input label=\"Current Session\" value={formData.current_session} onChange={e => handleChange('current_session', e.target.value)} />\r\n                        <Select label=\"Current Term\" value={formData.current_term} onChange={e => handleChange('current_term', e.target.value)}><option>First Term</option><option>Second Term</option><option>Third Term</option></Select>\r\n                        <div className=\"mt-4\"><label className=\"text-sm font-medium\">School Logo</label><input type=\"file\" className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-50 file:text-brand-700 hover:file:bg-brand-100\" onChange={e => handleFileChange(e, 'logo_media')} />{formData.logo_media && <img src={formData.logo_media} className=\"mt-2 h-16 object-contain\" />}</div>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ReceiptTemplate = ({ payment, student, cls, settings, balance }: { payment: Types.Payment, student: Types.Student, cls?: Types.Class, settings: Types.Settings, balance: number }) => {\r\n    return (\r\n        <div className=\"bg-white p-8 max-w-2xl mx-auto border border-gray-200 text-sm\" id=\"receipt-print\">\r\n            <div className=\"text-center mb-8 border-b pb-4\">\r\n                {settings.logo_media && <img src={settings.logo_media} alt=\"Logo\" className=\"h-16 mx-auto mb-2\" />}\r\n                <h1 className=\"text-2xl font-bold uppercase\">{settings.school_name}</h1>\r\n                <p>{settings.school_address}</p>\r\n                <p>{settings.school_email} | {settings.school_phone}</p>\r\n            </div>\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div><h2 className=\"text-lg font-bold\">PAYMENT RECEIPT</h2><p>Receipt No: #{payment.id.substring(0, 8).toUpperCase()}</p><p>Date: {payment.date}</p></div>\r\n                <div className=\"text-right\"><p>Session: {payment.session}</p><p>Term: {payment.term}</p></div>\r\n            </div>\r\n            <div className=\"mb-6\"><p><strong>Received From:</strong> {student.names} ({student.student_no})</p><p><strong>Class:</strong> {cls?.name || 'N/A'}</p></div>\r\n            <div className=\"mb-6\">\r\n                <table className=\"w-full border-collapse border border-gray-300\">\r\n                    <thead><tr className=\"bg-gray-100\"><th className=\"border border-gray-300 p-2 text-left\">Description</th><th className=\"border border-gray-300 p-2 text-right\">Amount</th></tr></thead>\r\n                    <tbody><tr><td className=\"border border-gray-300 p-2\">School Fees Payment {payment.method && ` via ${payment.method}`} {payment.remark && ` (${payment.remark})`}</td><td className=\"border border-gray-300 p-2 text-right\">{Utils.formatCurrency(payment.amount)}</td></tr></tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"flex justify-end mb-12\">\r\n                <div className=\"text-right\"><p className=\"text-lg font-bold\">Total Paid: {Utils.formatCurrency(payment.amount)}</p><p className=\"text-sm text-gray-500\">Balance Remaining: {Utils.formatCurrency(balance)}</p></div>\r\n            </div>\r\n            <div className=\"flex justify-between mt-12 pt-4 border-t\"><div className=\"text-center\"><p className=\"border-t border-black px-8 mt-8 pt-2\">Bursar's Signature</p></div><div className=\"text-center\"><p className=\"italic text-xs\">Thank you for your business.</p></div></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BursaryView = ({\r\n    students, classes, fees, payments, expenses, settings, onAddPayment, onAddFee, onAddExpense, onDeletePayment, onDeleteFee\r\n}: {\r\n    students: Types.Student[], classes: Types.Class[], fees: Types.FeeStructure[], payments: Types.Payment[], expenses: Types.Expense[], settings: Types.Settings,\r\n    onAddPayment: (p: Types.Payment) => void, onAddFee: (f: Types.FeeStructure) => void, onAddExpense: (e: Types.Expense) => void, onDeletePayment: (id: string) => void, onDeleteFee: (id: string) => void\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<'fees' | 'expenses' | 'structure'>('fees');\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedStudent, setSelectedStudent] = useState<string | null>(null);\r\n\r\n    // Modals\r\n    const [showPayModal, setShowPayModal] = useState(false);\r\n    const [showExpenseModal, setShowExpenseModal] = useState(false);\r\n    const [showFeeModal, setShowFeeModal] = useState(false);\r\n    const [receiptPayment, setReceiptPayment] = useState<Types.Payment | null>(null);\r\n    const { addToast } = useToast();\r\n\r\n    // Forms\r\n    const [payAmount, setPayAmount] = useState('');\r\n    const [payMethod, setPayMethod] = useState('cash');\r\n    const [payRemark, setPayRemark] = useState('');\r\n\r\n    const [expTitle, setExpTitle] = useState('');\r\n    const [expAmount, setExpAmount] = useState('');\r\n    const [expCat, setExpCat] = useState('supplies');\r\n    const [expDate, setExpDate] = useState(Utils.getTodayString());\r\n\r\n    const [feeName, setFeeName] = useState('');\r\n    const [feeAmount, setFeeAmount] = useState('');\r\n    const [feeClass, setFeeClass] = useState('');\r\n\r\n    const handlePaymentSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedStudent) return;\r\n        onAddPayment({\r\n            id: Utils.generateId(), student_id: selectedStudent, amount: Number(payAmount), method: payMethod as any, remark: payRemark, date: Utils.getTodayString(), session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Payment recorded successfully', 'success'); setShowPayModal(false); setPayAmount(''); setPayRemark('');\r\n    };\r\n\r\n    const handleExpenseSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddExpense({\r\n            id: Utils.generateId(), title: expTitle, amount: Number(expAmount), category: expCat as any, date: expDate, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Expense recorded', 'success'); setShowExpenseModal(false); setExpTitle(''); setExpAmount('');\r\n    };\r\n\r\n    const handleFeeSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddFee({\r\n            id: Utils.generateId(), name: feeName, amount: Number(feeAmount), class_id: feeClass || null, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Fee structure added', 'success'); setShowFeeModal(false); setFeeName(''); setFeeAmount(''); setFeeClass('');\r\n    };\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const student = students.find(s => s.id === selectedStudent);\r\n    const studentPayments = selectedStudent ? payments.filter(p => p.student_id === selectedStudent) : [];\r\n    const applicableFees = student ? fees.filter(f => f.session === settings.current_session && f.term === settings.current_term && (f.class_id === null || f.class_id === student.class_id)) : [];\r\n    const { totalBill, totalPaid, balance } = student ? Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term) : { totalBill: 0, totalPaid: 0, balance: 0 };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Bursary & Finance</h1>\r\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\r\n                    {(['fees', 'expenses', 'structure'] as const).map(tab => (\r\n                        <button key={tab} onClick={() => setActiveTab(tab)} className={`px-4 py-2 text-sm font-medium rounded-md capitalize ${activeTab === tab ? 'bg-white shadow-sm text-brand-700' : 'text-gray-600 hover:text-gray-900'}`}>{tab}</button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {activeTab === 'fees' && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"md:col-span-1 space-y-4\">\r\n                        <Card className=\"h-full\">\r\n                            <div className=\"mb-4\"><Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select></div>\r\n                            <div className=\"space-y-1 h-[600px] overflow-y-auto\">\r\n                                {activeStudents.map(s => {\r\n                                    const bal = Utils.getStudentBalance(s, fees, payments, settings.current_session, settings.current_term).balance;\r\n                                    return (\r\n                                        <div key={s.id} onClick={() => setSelectedStudent(s.id)} className={`p-3 rounded-md cursor-pointer flex justify-between items-center text-sm ${selectedStudent === s.id ? 'bg-brand-50 border-brand-200 border' : 'hover:bg-gray-50'}`}>\r\n                                            <div><div className=\"font-medium\">{s.names}</div><div className=\"text-xs text-gray-500\">{s.student_no}</div></div>\r\n                                            <div className={`font-mono ${bal > 0 ? 'text-red-600' : 'text-green-600'}`}>{bal > 0 ? `-${Utils.formatCurrency(bal)}` : 'Paid'}</div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                        {selectedStudent && student ? (\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"grid grid-cols-3 gap-4\">\r\n                                    <Card className=\"bg-blue-50 border-blue-100 p-4\"><div className=\"text-sm text-blue-600\">Total Bill</div><div className=\"text-xl font-bold text-blue-900\">{Utils.formatCurrency(totalBill)}</div></Card>\r\n                                    <Card className=\"bg-green-50 border-green-100 p-4\"><div className=\"text-sm text-green-600\">Total Paid</div><div className=\"text-xl font-bold text-green-900\">{Utils.formatCurrency(totalPaid)}</div></Card>\r\n                                    <Card className=\"bg-red-50 border-red-100 p-4\"><div className=\"text-sm text-red-600\">Outstanding</div><div className=\"text-xl font-bold text-red-900\">{Utils.formatCurrency(balance)}</div></Card>\r\n                                </div>\r\n                                <Card title=\"Bill Breakdown\">\r\n                                    <table className=\"w-full text-sm text-left\">\r\n                                        <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-2\">Fee Head</th><th className=\"px-4 py-2 text-right\">Amount</th></tr></thead>\r\n                                        <tbody className=\"divide-y divide-gray-100\">\r\n                                            {applicableFees.map(fee => <tr key={fee.id}><td className=\"px-4 py-2\">{fee.name}</td><td className=\"px-4 py-2 text-right font-mono\">{Utils.formatCurrency(fee.amount)}</td></tr>)}\r\n                                            <tr className=\"bg-gray-50 font-bold\"><td className=\"px-4 py-2\">Total Billed</td><td className=\"px-4 py-2 text-right\">{Utils.formatCurrency(totalBill)}</td></tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </Card>\r\n                                <Card title=\"Payment History\" action={<Button size=\"sm\" onClick={() => setShowPayModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Record Payment</Button>}>\r\n                                    <div className=\"space-y-3 mt-2\">\r\n                                        {studentPayments.length === 0 && <div className=\"text-center py-4 text-gray-500\">No payments recorded.</div>}\r\n                                        {studentPayments.map(p => (\r\n                                            <div key={p.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100\">\r\n                                                <div><div className=\"font-medium text-gray-900\">{Utils.formatCurrency(p.amount)}</div><div className=\"text-xs text-gray-500\">{p.date} • {p.method}</div>{p.remark && <div className=\"text-xs text-gray-500 italic\">\"{p.remark}\"</div>}</div>\r\n                                                <div className=\"flex gap-2\"><button onClick={() => setReceiptPayment(p)} title=\"Print Receipt\" className=\"p-1 text-gray-400 hover:text-blue-600\"><Printer className=\"h-4 w-4\" /></button><button onClick={() => onDeletePayment(p.id)} title=\"Delete\" className=\"p-1 text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </Card>\r\n                            </div>\r\n                        ) : <div className=\"h-full flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-200 rounded-lg p-12\"><User className=\"h-12 w-12 mb-4 opacity-50\" /><p>Select a student to view fees and payments</p></div>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'expenses' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-end\"><Button onClick={() => setShowExpenseModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Record Expense</Button></div>\r\n                    <Card>\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Date</th><th className=\"px-4 py-3\">Title</th><th className=\"px-4 py-3\">Category</th><th className=\"px-4 py-3 text-right\">Amount</th></tr></thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {expenses.map(e => (\r\n                                    <tr key={e.id}>\r\n                                        <td className=\"px-4 py-3\">{e.date}</td><td className=\"px-4 py-3\">{e.title}</td><td className=\"px-4 py-3 capitalize\"><span className=\"px-2 py-1 bg-gray-100 rounded text-xs\">{e.category}</span></td><td className=\"px-4 py-3 text-right font-mono text-red-600\">-{Utils.formatCurrency(e.amount)}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'structure' && (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-end\"><Button onClick={() => setShowFeeModal(true)}><Plus className=\"h-4 w-4 mr-2\" /> Add Fee Head</Button></div>\r\n                    <Card title=\"Current Session Fee Structure\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Fee Name</th><th className=\"px-4 py-3\">Class Scope</th><th className=\"px-4 py-3 text-right\">Amount</th><th className=\"px-4 py-3\"></th></tr></thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {fees.filter(f => f.session === settings.current_session && f.term === settings.current_term).map(f => {\r\n                                    const clsName = f.class_id ? classes.find(c => c.id === f.class_id)?.name : 'All Classes';\r\n                                    return (\r\n                                        <tr key={f.id}>\r\n                                            <td className=\"px-4 py-3 font-medium\">{f.name}</td>\r\n                                            <td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs\">{clsName}</span></td>\r\n                                            <td className=\"px-4 py-3 text-right font-mono\">{Utils.formatCurrency(f.amount)}</td>\r\n                                            <td className=\"px-4 py-3 text-right\"><button onClick={() => onDeleteFee(f.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n\r\n            <Modal isOpen={showPayModal} onClose={() => setShowPayModal(false)} title=\"Record Payment\">\r\n                <form onSubmit={handlePaymentSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Amount (NGN)\" type=\"number\" required value={payAmount} onChange={e => setPayAmount(e.target.value)} />\r\n                    <Select label=\"Payment Method\" value={payMethod} onChange={e => setPayMethod(e.target.value)}><option value=\"cash\">Cash</option><option value=\"transfer\">Bank Transfer</option><option value=\"pos\">POS</option></Select>\r\n                    <Input label=\"Remark/Note\" value={payRemark} onChange={e => setPayRemark(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Payment</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={!!receiptPayment} onClose={() => setReceiptPayment(null)} title=\"Print Receipt\">\r\n                {receiptPayment && student && (\r\n                    <div className=\"overflow-y-auto max-h-[80vh]\">\r\n                        <ReceiptTemplate payment={receiptPayment} student={student} cls={classes.find(c => c.id === student.class_id)} settings={settings} balance={balance} />\r\n                        <div className=\"mt-4 flex justify-end gap-2\"><Button variant=\"secondary\" onClick={() => setReceiptPayment(null)}>Close</Button><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print</Button></div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            <Modal isOpen={showExpenseModal} onClose={() => setShowExpenseModal(false)} title=\"Record Expense\">\r\n                <form onSubmit={handleExpenseSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Title\" required value={expTitle} onChange={e => setExpTitle(e.target.value)} />\r\n                    <Input label=\"Amount\" type=\"number\" required value={expAmount} onChange={e => setExpAmount(e.target.value)} />\r\n                    <Select label=\"Category\" value={expCat} onChange={e => setExpCat(e.target.value)}><option value=\"supplies\">Supplies</option><option value=\"maintenance\">Maintenance</option><option value=\"salary\">Salary</option><option value=\"utilities\">Utilities</option><option value=\"other\">Other</option></Select>\r\n                    <Input label=\"Date\" type=\"date\" value={expDate} onChange={e => setExpDate(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Expense</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            <Modal isOpen={showFeeModal} onClose={() => setShowFeeModal(false)} title=\"Add Fee Structure\">\r\n                <form onSubmit={handleFeeSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Fee Name\" required value={feeName} onChange={e => setFeeName(e.target.value)} placeholder=\"e.g. Tuition Fee\" />\r\n                    <Input label=\"Amount\" type=\"number\" required value={feeAmount} onChange={e => setFeeAmount(e.target.value)} />\r\n                    <Select label=\"Applicable Class\" value={feeClass} onChange={e => setFeeClass(e.target.value)}><option value=\"\">All Classes</option>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select>\r\n                    <Button type=\"submit\" className=\"w-full\">Create Fee</Button>\r\n                </form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst App = () => {\r\n    const [view, setView] = useState<Types.ViewState>('dashboard');\r\n\r\n    // Persistent State Initialization\r\n    const [settings, setSettings] = useState<Types.Settings>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.SETTINGS, Utils.INITIAL_SETTINGS));\r\n    const [teachers, setTeachers] = useState<Types.Teacher[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.TEACHERS, Utils.SEED_TEACHERS));\r\n    const [staff, setStaff] = useState<Types.Staff[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.STAFF, Utils.SEED_STAFF));\r\n    const [students, setStudents] = useState<Types.Student[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.STUDENTS, Utils.SEED_STUDENTS));\r\n    const [classes, setClasses] = useState<Types.Class[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.CLASSES, Utils.SEED_CLASSES));\r\n    const [fees, setFees] = useState<Types.FeeStructure[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.FEES, []));\r\n    const [payments, setPayments] = useState<Types.Payment[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.PAYMENTS, []));\r\n    const [expenses, setExpenses] = useState<Types.Expense[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.EXPENSES, []));\r\n    const [scores, setScores] = useState<Types.Score[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.SCORES, []));\r\n    const [attendance, setAttendance] = useState<Types.Attendance[]>(() => Utils.loadFromStorage(Utils.STORAGE_KEYS.ATTENDANCE, []));\r\n\r\n    // Persistence Effects\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.SETTINGS, settings), [settings]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.TEACHERS, teachers), [teachers]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.STAFF, staff), [staff]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.STUDENTS, students), [students]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.CLASSES, classes), [classes]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.FEES, fees), [fees]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.PAYMENTS, payments), [payments]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.EXPENSES, expenses), [expenses]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.SCORES, scores), [scores]);\r\n    useEffect(() => Utils.saveToStorage(Utils.STORAGE_KEYS.ATTENDANCE, attendance), [attendance]);\r\n\r\n    const navItems = [\r\n        { id: 'dashboard', label: 'Dashboard', icon: LayoutDashboard },\r\n        { id: 'students', label: 'Students', icon: GraduationCap },\r\n        { id: 'attendance', label: 'Attendance', icon: CalendarIcon },\r\n        { id: 'grading', label: 'Grading & Reports', icon: FileSpreadsheet },\r\n        { id: 'broadsheet', label: 'Broadsheet', icon: LayoutList },\r\n        { id: 'id_cards', label: 'ID Cards', icon: BadgeCheck },\r\n        { id: 'teachers', label: 'Teachers', icon: Briefcase },\r\n        { id: 'staff', label: 'Staff', icon: Users },\r\n        { id: 'classes', label: 'Classes', icon: BookOpen },\r\n        { id: 'fees', label: 'Bursary', icon: DollarSign },\r\n        { id: 'data_management', label: 'Data & Backup', icon: Database },\r\n        { id: 'settings', label: 'Settings', icon: SettingsIcon },\r\n    ];\r\n\r\n    const renderView = () => {\r\n        switch (view) {\r\n            case 'dashboard': return <DashboardView students={students} teachers={teachers} staff={staff} payments={payments} expenses={expenses} fees={fees} classes={classes} settings={settings} onChangeView={setView} />;\r\n            case 'students': return <StudentsView students={students} classes={classes} onAdd={s => setStudents([...students, s])} onUpdate={s => setStudents(students.map(std => std.id === s.id ? s : std))} onDelete={id => setStudents(students.filter(s => s.id !== id))} />;\r\n            case 'attendance': return <AttendanceView students={students} classes={classes} attendance={attendance} settings={settings} onSave={setAttendance} />;\r\n            case 'grading': return <GradingView students={students} classes={classes} scores={scores} settings={settings} onSaveScores={setScores} />;\r\n            case 'broadsheet': return <BroadsheetView students={students} classes={classes} scores={scores} settings={settings} />;\r\n            case 'id_cards': return <IDCardView students={students} classes={classes} settings={settings} />;\r\n            case 'teachers': return <TeachersView teachers={teachers} onAdd={t => setTeachers([...teachers, t])} onDelete={id => setTeachers(teachers.filter(t => t.id !== id))} />;\r\n            case 'staff': return <StaffView staff={staff} onAdd={s => setStaff([...staff, s])} onDelete={id => setStaff(staff.filter(s => s.id !== id))} />;\r\n            case 'classes': return <ClassesView classes={classes} teachers={teachers} onUpdate={c => setClasses(classes.map(cls => cls.id === c.id ? c : cls))} />;\r\n            case 'fees': return <BursaryView students={students} classes={classes} fees={fees} payments={payments} expenses={expenses} settings={settings} onAddPayment={p => setPayments([...payments, p])} onAddFee={f => setFees([...fees, f])} onAddExpense={e => setExpenses([...expenses, e])} onDeletePayment={id => setPayments(payments.filter(p => p.id !== id))} onDeleteFee={id => setFees(fees.filter(f => f.id !== id))} />;\r\n            case 'settings': return <SettingsView settings={settings} onUpdate={setSettings} />;\r\n            case 'data_management': return <DataManagementView />;\r\n            default: return <div>Not Found</div>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ToastProvider>\r\n            <div className=\"flex h-screen bg-gray-50 text-gray-900 font-sans\">\r\n                <div className=\"w-64 bg-gray-900 text-white flex flex-col no-print\">\r\n                    <div className=\"p-4 border-b border-gray-800 flex items-center gap-3\">\r\n                        <div className=\"h-8 w-8 bg-brand-500 rounded-lg flex items-center justify-center font-bold\">S</div>\r\n                        <span className=\"font-bold text-lg tracking-tight\">SchoolManager</span>\r\n                    </div>\r\n                    <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n                        {navItems.map(item => (\r\n                            <button key={item.id} onClick={() => setView(item.id as Types.ViewState)} className={`w-full flex items-center gap-3 px-3 py-2 rounded-md transition-colors ${view === item.id ? 'bg-brand-600 text-white' : 'text-gray-400 hover:text-white hover:bg-gray-800'}`}>\r\n                                <item.icon className=\"h-5 w-5\" />\r\n                                <span className=\"text-sm font-medium\">{item.label}</span>\r\n                            </button>\r\n                        ))}\r\n                    </nav>\r\n                </div>\r\n                <div className=\"flex-1 overflow-auto\">\r\n                    <header className=\"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-8 sticky top-0 z-10 no-print\">\r\n                        <h2 className=\"font-semibold text-gray-800 capitalize\">{view.replace('_', ' ')}</h2>\r\n                        <div className=\"flex items-center gap-4\"><span className=\"text-sm text-gray-500\">{Utils.getTodayString()}</span></div>\r\n                    </header>\r\n                    <main className=\"p-8 max-w-7xl mx-auto print:p-0 print:w-full print:max-w-none\">{renderView()}</main>\r\n                </div>\r\n            </div>\r\n        </ToastProvider>\r\n    );\r\n};\r\n\r\nexport default function Page() {\r\n    return <App />;\r\n}"],"names":[],"mappings":"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"}}]
}