{"version":3,"sources":["../../../../components/features/bursary/StudentInvoiceView.tsx","../../../../app/%28dashboard%29/bursary/page.tsx","../../../../components/features/bursary/ExpenseManagement.tsx","../../../../components/features/bursary/FeeManagement.tsx","../../../../components/features/bursary/BursaryModals.tsx","../../../../components/features/bursary/FinancialDashboard.tsx","../../../../components/features/bursary/DebtorReport.tsx","../../../../components/features/BursaryView.tsx","../../../../lib/pdf-utils.ts","../../../../node_modules/lucide-react/src/icons/circle-check.ts","../../../../components/features/bursary/ReceiptTemplate.tsx","../../../../components/features/bursary/InvoiceTemplate.tsx","../../../../components/features/bursary/FeeStructureManagement.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useMemo, useState } from 'react';\r\nimport {\r\n    CreditCard, FileText, Download, Printer,\r\n    CheckCircle2, Clock, AlertCircle\r\n} from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { downloadPDF } from '@/lib/pdf-utils';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { InvoiceTemplate } from './InvoiceTemplate';\r\n\r\ninterface StudentInvoiceViewProps {\r\n    student: Types.Student;\r\n    cls?: Types.Class;\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const StudentInvoiceView: React.FC<StudentInvoiceViewProps> = ({\r\n    student,\r\n    cls,\r\n    fees,\r\n    payments,\r\n    settings\r\n}) => {\r\n    // Calculate totals\r\n    const { totalBill, totalPaid, balance } = Utils.getStudentBalance(\r\n        student, fees, payments, settings.current_session, settings.current_term\r\n    );\r\n\r\n    // Get student's fees\r\n    const studentFees = fees.filter(f =>\r\n        f.session === settings.current_session &&\r\n        f.term === settings.current_term &&\r\n        (f.class_id === null || f.class_id === student.class_id)\r\n    );\r\n\r\n    // Get student's payments\r\n    const studentPayments = payments.filter(p =>\r\n        p.student_id === student.id &&\r\n        p.session === settings.current_session &&\r\n        p.term === settings.current_term\r\n    ).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n    const handlePrint = () => {\r\n        const printWindow = window.open('', '_blank', 'width=800,height=800');\r\n        if (!printWindow) {\r\n            alert('Please allow popups to print the invoice');\r\n            return;\r\n        }\r\n\r\n        printWindow.document.write('<html><head><title>Print Invoice</title>');\r\n        printWindow.document.write('<style>');\r\n        printWindow.document.write('@page { margin: 20mm; }'); // Set print margins\r\n        printWindow.document.write('body { margin: 0; padding: 20px 40px; }'); // Visual padding on screen + extra print padding\r\n        printWindow.document.write('</style>');\r\n        printWindow.document.write('</head><body>');\r\n        printWindow.document.write('<div id=\"print-root\"></div>');\r\n        printWindow.document.write('</body></html>');\r\n        printWindow.document.close();\r\n\r\n        import('react-dom/client').then(({ createRoot }) => {\r\n            const root = createRoot(printWindow.document.getElementById('print-root')!);\r\n            root.render(\r\n                <InvoiceTemplate\r\n                    student={student}\r\n                    cls={cls}\r\n                    fees={studentFees}\r\n                    payments={studentPayments}\r\n                    settings={settings}\r\n                />\r\n            );\r\n\r\n            // Wait for content to render then print\r\n            setTimeout(() => {\r\n                printWindow.focus();\r\n                printWindow.print();\r\n            }, 500);\r\n        });\r\n    };\r\n\r\n    const handleDownloadPDF = async () => {\r\n        await downloadPDF(\r\n            'student-invoice-container',\r\n            `Invoice-${student.student_no}-${settings.current_term.replace(/\\s+/g, '_')}`,\r\n            { logoUrl: settings.logo_media, title: `Fee Invoice - ${settings.school_name}` }\r\n        );\r\n    };\r\n\r\n    const paymentStatus = balance <= 0 ? 'paid' : balance < totalBill ? 'partial' : 'unpaid';\r\n\r\n    // Original return with updated Print Button handler\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Fee Statement</h1>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">\r\n                        {settings.current_term} • {settings.current_session}\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <Button onClick={handleDownloadPDF} variant=\"outline\" className=\"flex gap-2\">\r\n                        <Download size={16} />\r\n                        Save PDF\r\n                    </Button>\r\n                    <Button onClick={handlePrint} className=\"flex gap-2\">\r\n                        <Printer size={16} />\r\n                        Print\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Card className=\"p-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"h-12 w-12 bg-blue-100 rounded-xl flex items-center justify-center\">\r\n                            <FileText className=\"h-6 w-6 text-blue-600\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Total Bill</p>\r\n                            <p className=\"text-2xl font-black text-gray-900\">₦{totalBill.toLocaleString()}</p>\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className=\"p-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center\">\r\n                            <CheckCircle2 className=\"h-6 w-6 text-green-600\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Amount Paid</p>\r\n                            <p className=\"text-2xl font-black text-green-600\">₦{totalPaid.toLocaleString()}</p>\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className={`p-6 ${balance > 0 ? 'bg-red-50 border-red-200' : 'bg-green-50 border-green-200'}`}>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className={`h-12 w-12 rounded-xl flex items-center justify-center ${balance > 0 ? 'bg-red-100' : 'bg-green-100'}`}>\r\n                            {balance > 0 ? (\r\n                                <AlertCircle className=\"h-6 w-6 text-red-600\" />\r\n                            ) : (\r\n                                <CheckCircle2 className=\"h-6 w-6 text-green-600\" />\r\n                            )}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">\r\n                                {balance > 0 ? 'Balance Due' : 'Status'}\r\n                            </p>\r\n                            <p className={`text-2xl font-black ${balance > 0 ? 'text-red-600' : 'text-green-600'}`}>\r\n                                {balance > 0 ? `₦${balance.toLocaleString()}` : 'Fully Paid'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Student Info */}\r\n            <Card className=\"p-6\">\r\n                <h2 className=\"text-lg font-bold text-gray-900 mb-4\">Student Information</h2>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                    <div>\r\n                        <p className=\"text-gray-400 text-xs uppercase font-medium\">Name</p>\r\n                        <p className=\"font-semibold text-gray-900\">{student.names}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-gray-400 text-xs uppercase font-medium\">Admission No</p>\r\n                        <p className=\"font-semibold text-brand-600\">{student.student_no}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-gray-400 text-xs uppercase font-medium\">Class</p>\r\n                        <p className=\"font-semibold text-gray-900\">{cls?.name || '-'}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-gray-400 text-xs uppercase font-medium\">Status</p>\r\n                        <span className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold uppercase ${paymentStatus === 'paid'\r\n                            ? 'bg-green-100 text-green-700'\r\n                            : paymentStatus === 'partial'\r\n                                ? 'bg-yellow-100 text-yellow-700'\r\n                                : 'bg-red-100 text-red-700'\r\n                            }`}>\r\n                            {paymentStatus === 'paid' ? <CheckCircle2 size={12} /> : <Clock size={12} />}\r\n                            {paymentStatus === 'paid' ? 'Paid' : paymentStatus === 'partial' ? 'Partial' : 'Unpaid'}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Fee Breakdown */}\r\n                <Card className=\"p-6\">\r\n                    <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                        <FileText size={18} className=\"text-brand-500\" />\r\n                        Fee Breakdown\r\n                    </h2>\r\n                    {studentFees.length > 0 ? (\r\n                        <div className=\"space-y-2\">\r\n                            {studentFees.map((fee, i) => (\r\n                                <div key={fee.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded-xl\">\r\n                                    <span className=\"text-sm font-medium text-gray-700\">{fee.name}</span>\r\n                                    <span className=\"text-sm font-bold text-gray-900\">₦{fee.amount.toLocaleString()}</span>\r\n                                </div>\r\n                            ))}\r\n                            <div className=\"flex justify-between items-center p-3 bg-brand-50 rounded-xl border border-brand-100 mt-4\">\r\n                                <span className=\"text-sm font-bold text-brand-700\">Total</span>\r\n                                <span className=\"text-lg font-black text-brand-700\">₦{totalBill.toLocaleString()}</span>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-8 text-gray-400 italic text-sm\">\r\n                            No fees set for this term.\r\n                        </div>\r\n                    )}\r\n                </Card>\r\n\r\n                {/* Payment History Timeline */}\r\n                <Card className=\"p-6\">\r\n                    <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                        <CreditCard size={18} className=\"text-green-500\" />\r\n                        Payment History\r\n                    </h2>\r\n\r\n                    {/* Progress Bar */}\r\n                    <div className=\"mb-6\">\r\n                        <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                            <span>Payment Progress</span>\r\n                            <span>{Math.min(100, Math.round((totalPaid / totalBill) * 100))}%</span>\r\n                        </div>\r\n                        <div className=\"h-3 bg-gray-100 rounded-full overflow-hidden\">\r\n                            <div\r\n                                className={`h-full rounded-full transition-all duration-500 ${totalPaid >= totalBill ? 'bg-green-500' :\r\n                                    totalPaid > 0 ? 'bg-yellow-500' : 'bg-gray-300'\r\n                                    }`}\r\n                                style={{ width: `${Math.min(100, (totalPaid / totalBill) * 100)}%` }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex justify-between text-xs mt-1\">\r\n                            <span className=\"text-green-600 font-medium\">₦{totalPaid.toLocaleString()}</span>\r\n                            <span className=\"text-gray-400\">of ₦{totalBill.toLocaleString()}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {studentPayments.length > 0 ? (\r\n                        <div className=\"relative\">\r\n                            {/* Timeline line */}\r\n                            <div className=\"absolute left-3 top-2 bottom-2 w-0.5 bg-green-200\" />\r\n\r\n                            <div className=\"space-y-4\">\r\n                                {studentPayments.map((payment, i) => (\r\n                                    <div key={payment.id} className=\"relative pl-8\">\r\n                                        {/* Timeline dot */}\r\n                                        <div className=\"absolute left-1.5 top-2 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow\" />\r\n\r\n                                        <div className=\"p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors\">\r\n                                            <div className=\"flex justify-between items-start\">\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-bold text-gray-900\">₦{payment.amount.toLocaleString()}</p>\r\n                                                    <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                                                        {new Date(payment.date).toLocaleDateString('en-GB', {\r\n                                                            weekday: 'short',\r\n                                                            day: '2-digit',\r\n                                                            month: 'short',\r\n                                                            year: 'numeric'\r\n                                                        })}\r\n                                                    </p>\r\n                                                    {payment.lineItems && payment.lineItems.length > 0 && (\r\n                                                        <p className=\"text-xs text-gray-400 mt-1\">\r\n                                                            {payment.lineItems.map(li => li.purpose).join(', ')}\r\n                                                        </p>\r\n                                                    )}\r\n                                                </div>\r\n                                                <div className=\"text-right\">\r\n                                                    <span className=\"px-2 py-1 bg-green-100 text-green-700 rounded-full text-[10px] font-bold uppercase\">\r\n                                                        {payment.method}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center p-3 bg-green-50 rounded-xl border border-green-100 mt-4 ml-8\">\r\n                                <span className=\"text-sm font-bold text-green-700\">Total Paid</span>\r\n                                <span className=\"text-lg font-black text-green-700\">₦{totalPaid.toLocaleString()}</span>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-8 text-gray-400 italic text-sm\">\r\n                            No payments recorded yet.\r\n                        </div>\r\n                    )}\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Bank Details */}\r\n            {settings.show_bank_details && balance > 0 && (\r\n                <Card className=\"p-6 bg-amber-50 border-amber-200\">\r\n                    <h2 className=\"text-lg font-bold text-amber-800 mb-4\">Payment Information</h2>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                        <div>\r\n                            <p className=\"text-amber-600 text-xs uppercase font-medium\">Bank Name</p>\r\n                            <p className=\"font-semibold text-amber-900\">{settings.bank_name}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-amber-600 text-xs uppercase font-medium\">Account Name</p>\r\n                            <p className=\"font-semibold text-amber-900\">{settings.bank_account_name}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-amber-600 text-xs uppercase font-medium\">Account Number</p>\r\n                            <p className=\"font-bold text-amber-900 text-lg\">{settings.bank_account_number}</p>\r\n                        </div>\r\n                        {settings.bank_sort_code && (\r\n                            <div>\r\n                                <p className=\"text-amber-600 text-xs uppercase font-medium\">Sort Code</p>\r\n                                <p className=\"font-semibold text-amber-900\">{settings.bank_sort_code}</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {settings.invoice_notes && (\r\n                        <p className=\"text-sm text-amber-700 mt-4 italic\">{settings.invoice_notes}</p>\r\n                    )}\r\n                </Card>\r\n            )}\r\n\r\n            {/* Hidden container for PDF generation */}\r\n            <div id=\"student-invoice-container\" style={{ position: 'absolute', left: '-9999px', top: 0, width: '210mm', background: 'white' }}>\r\n                <InvoiceTemplate\r\n                    student={student}\r\n                    cls={cls}\r\n                    fees={studentFees}\r\n                    payments={studentPayments}\r\n                    settings={settings}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","'use client';\r\nimport { useMemo } from 'react';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { BursaryView } from '@/components/features/BursaryView';\r\nimport { StudentInvoiceView } from '@/components/features/bursary/StudentInvoiceView';\r\nimport {\r\n    useStudents, useClasses, useFees, usePayments, useExpenses, useSettings,\r\n    useCreatePayment, useCreateFee, useCreateExpense,\r\n    useDeletePayment, useDeleteFee, useDeleteExpense\r\n} from '@/lib/hooks/use-data';\r\nimport * as Utils from '@/lib/utils';\r\nimport * as Types from '@/lib/types';\r\n\r\nexport default function BursaryPage() {\r\n    const { currentRole, currentUser } = useSchoolStore();\r\n\r\n    const { data: students = [] } = useStudents();\r\n    const { data: classes = [] } = useClasses();\r\n    const { data: fees = [] } = useFees();\r\n    const { data: payments = [] } = usePayments();\r\n    const { data: expenses = [] } = useExpenses();\r\n    const { data: settings = Utils.INITIAL_SETTINGS } = useSettings();\r\n\r\n    const { mutate: addPayment } = useCreatePayment();\r\n    const { mutate: addFee } = useCreateFee();\r\n    const { mutate: addExpense } = useCreateExpense();\r\n    const { mutate: deletePayment } = useDeletePayment();\r\n    const { mutate: deleteFee } = useDeleteFee();\r\n    const { mutate: deleteExpense } = useDeleteExpense();\r\n\r\n    // For students/parents, show simplified invoice view\r\n    const isStudentOrParent = currentRole === 'student' || currentRole === 'parent';\r\n\r\n    // Get the student for student/parent roles\r\n    const student = useMemo(() => {\r\n        if (!isStudentOrParent) return null;\r\n        const studentId = currentUser?.student_id || students[0]?.id;\r\n        return students.find((s: Types.Student) => s.id === studentId) || students[0];\r\n    }, [isStudentOrParent, currentUser, students]);\r\n\r\n    const studentClass = useMemo(() => {\r\n        if (!student) return undefined;\r\n        return classes.find((c: Types.Class) => c.id === student.class_id);\r\n    }, [student, classes]);\r\n\r\n    if (isStudentOrParent && student) {\r\n        return (\r\n            <StudentInvoiceView\r\n                student={student}\r\n                cls={studentClass}\r\n                fees={fees}\r\n                payments={payments}\r\n                settings={settings}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <BursaryView\r\n            students={students} classes={classes} fees={fees} payments={payments}\r\n            expenses={expenses} settings={settings}\r\n            onAddPayment={addPayment} onAddFee={addFee} onAddExpense={addExpense}\r\n            onDeletePayment={deletePayment} onDeleteFee={deleteFee} onDeleteExpense={deleteExpense}\r\n        />\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Plus, Trash2, Filter, Calendar } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface ExpenseManagementProps {\r\n    expenses: Types.Expense[];\r\n    settings: Types.Settings;\r\n    onAddExpense: () => void;\r\n    onDeleteExpense?: (id: string) => void;\r\n}\r\n\r\nexport const ExpenseManagement: React.FC<ExpenseManagementProps> = ({\r\n    expenses,\r\n    settings,\r\n    onAddExpense,\r\n    onDeleteExpense\r\n}) => {\r\n    const [filterCategory, setFilterCategory] = useState('all');\r\n    const [filterSession, setFilterSession] = useState('current');\r\n\r\n    // Filter expenses\r\n    let filteredExpenses = [...expenses];\r\n\r\n    if (filterSession === 'current') {\r\n        filteredExpenses = filteredExpenses.filter(e =>\r\n            e.session === settings.current_session && e.term === settings.current_term\r\n        );\r\n    }\r\n\r\n    if (filterCategory !== 'all') {\r\n        filteredExpenses = filteredExpenses.filter(e => e.category === filterCategory);\r\n    }\r\n\r\n    // Sort by date descending\r\n    filteredExpenses.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n    // Calculate totals\r\n    const totalExpenses = filteredExpenses.reduce((sum, e) => sum + e.amount, 0);\r\n\r\n    // Category totals for current filter\r\n    const categoryTotals = filteredExpenses.reduce((acc, e) => {\r\n        acc[e.category] = (acc[e.category] || 0) + e.amount;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    const categories = ['salary', 'maintenance', 'supplies', 'utilities', 'other'];\r\n    const categoryColors: Record<string, string> = {\r\n        salary: 'bg-blue-100 text-blue-700',\r\n        maintenance: 'bg-orange-100 text-orange-700',\r\n        supplies: 'bg-green-100 text-green-700',\r\n        utilities: 'bg-purple-100 text-purple-700',\r\n        other: 'bg-gray-100 text-gray-700',\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Summary Cards */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n                <Card className=\"p-4 bg-red-50 border-red-100 col-span-2 md:col-span-1\">\r\n                    <p className=\"text-sm text-red-600\">Total Expenses</p>\r\n                    <p className=\"text-xl font-bold text-red-700\">{Utils.formatCurrency(totalExpenses)}</p>\r\n                    <p className=\"text-xs text-red-500\">{filteredExpenses.length} records</p>\r\n                </Card>\r\n                {categories.slice(0, 4).map(cat => (\r\n                    <Card key={cat} className=\"p-4\">\r\n                        <p className=\"text-sm text-gray-600 capitalize\">{cat}</p>\r\n                        <p className=\"text-lg font-bold text-gray-900\">{Utils.formatCurrency(categoryTotals[cat] || 0)}</p>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Filters and Actions */}\r\n            <Card className=\"p-4\">\r\n                <div className=\"flex flex-wrap items-end gap-4\">\r\n                    <div className=\"flex-1 min-w-[150px]\">\r\n                        <Select\r\n                            label=\"Category\"\r\n                            value={filterCategory}\r\n                            onChange={e => setFilterCategory(e.target.value)}\r\n                        >\r\n                            <option value=\"all\">All Categories</option>\r\n                            {categories.map(cat => (\r\n                                <option key={cat} value={cat} className=\"capitalize\">{cat}</option>\r\n                            ))}\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-[150px]\">\r\n                        <Select\r\n                            label=\"Period\"\r\n                            value={filterSession}\r\n                            onChange={e => setFilterSession(e.target.value)}\r\n                        >\r\n                            <option value=\"current\">Current Term</option>\r\n                            <option value=\"all\">All Time</option>\r\n                        </Select>\r\n                    </div>\r\n                    <Button onClick={onAddExpense}>\r\n                        <Plus className=\"h-4 w-4 mr-2\" /> Record Expense\r\n                    </Button>\r\n                </div>\r\n            </Card>\r\n\r\n            {/* Expenses Table */}\r\n            <Card>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"bg-gray-50 text-gray-700\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-3\">Date</th>\r\n                                <th className=\"px-4 py-3\">Title</th>\r\n                                <th className=\"px-4 py-3\">Category</th>\r\n                                <th className=\"px-4 py-3\">Session/Term</th>\r\n                                <th className=\"px-4 py-3 text-right\">Amount</th>\r\n                                <th className=\"px-4 py-3 w-16\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {filteredExpenses.map(e => (\r\n                                <tr key={e.id} className=\"hover:bg-gray-50\">\r\n                                    <td className=\"px-4 py-3\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Calendar className=\"h-4 w-4 text-gray-400\" />\r\n                                            {e.date}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 font-medium text-gray-900\">\r\n                                        {e.title}\r\n                                        {e.description && (\r\n                                            <p className=\"text-xs text-gray-500 font-normal\">{e.description}</p>\r\n                                        )}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3\">\r\n                                        <span className={`px-2 py-1 rounded text-xs capitalize ${categoryColors[e.category] || categoryColors.other}`}>\r\n                                            {e.category}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-gray-500 text-xs\">\r\n                                        {e.session} - {e.term}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono text-red-600 font-semibold\">\r\n                                        -{Utils.formatCurrency(e.amount)}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3\">\r\n                                        {onDeleteExpense && (\r\n                                            <button\r\n                                                onClick={() => onDeleteExpense(e.id)}\r\n                                                className=\"text-gray-400 hover:text-red-600 p-1\"\r\n                                                title=\"Delete expense\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                            {filteredExpenses.length === 0 && (\r\n                                <tr>\r\n                                    <td colSpan={6} className=\"px-4 py-8 text-center text-gray-500\">\r\n                                        No expenses recorded for the selected filters.\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                        {filteredExpenses.length > 0 && (\r\n                            <tfoot className=\"bg-red-50\">\r\n                                <tr className=\"font-bold\">\r\n                                    <td colSpan={4} className=\"px-4 py-3 text-right text-red-700\">TOTAL:</td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono text-red-700\">\r\n                                        -{Utils.formatCurrency(totalExpenses)}\r\n                                    </td>\r\n                                    <td></td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        )}\r\n                    </table>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Plus, Printer, Trash2, User, Search, FileText } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface FeeManagementProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    settings: Types.Settings;\r\n    selectedClass: string;\r\n    setSelectedClass: (id: string) => void;\r\n    selectedStudent: string | null;\r\n    setSelectedStudent: (id: string | null) => void;\r\n    onRecordPayment: () => void;\r\n    onPrintReceipt: (p: Types.Payment) => void;\r\n    onDeletePayment: (id: string) => void;\r\n    onPrintInvoice?: (student: Types.Student) => void;\r\n}\r\n\r\nexport const FeeManagement: React.FC<FeeManagementProps> = ({\r\n    students, classes, fees, payments, settings, selectedClass, setSelectedClass, selectedStudent, setSelectedStudent, onRecordPayment, onPrintReceipt, onDeletePayment, onPrintInvoice\r\n}) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n\r\n    // Apply search filter\r\n    const filteredStudents = searchTerm\r\n        ? activeStudents.filter(s =>\r\n            s.names.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            s.student_no.toLowerCase().includes(searchTerm.toLowerCase())\r\n        )\r\n        : activeStudents;\r\n\r\n    const student = students.find(s => s.id === selectedStudent);\r\n    const studentPayments = selectedStudent\r\n        ? payments.filter(p => p.student_id === selectedStudent && p.session === settings.current_session && p.term === settings.current_term)\r\n        : [];\r\n    const applicableFees = student ? fees.filter(f => f.session === settings.current_session && f.term === settings.current_term && (f.class_id === null || f.class_id === student.class_id)) : [];\r\n    const { totalBill, totalPaid, balance } = student ? Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term) : { totalBill: 0, totalPaid: 0, balance: 0 };\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6\">\r\n            <div className=\"lg:col-span-1 space-y-4\">\r\n                <Card className=\"h-full\">\r\n                    <div className=\"mb-4\">\r\n                        <Select label=\"Select Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>\r\n                            {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                        </Select>\r\n                    </div>\r\n\r\n                    {/* Search */}\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search student...\"\r\n                                value={searchTerm}\r\n                                onChange={e => setSearchTerm(e.target.value)}\r\n                                className=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-brand-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-1 max-h-[300px] lg:h-[550px] overflow-y-auto\">\r\n                        {filteredStudents.map(s => {\r\n                            const bal = Utils.getStudentBalance(s, fees, payments, settings.current_session, settings.current_term).balance;\r\n                            return (\r\n                                <div\r\n                                    key={s.id}\r\n                                    onClick={() => setSelectedStudent(s.id)}\r\n                                    className={`p-2 lg:p-3 rounded-md cursor-pointer flex justify-between items-center text-sm transition-colors ${selectedStudent === s.id\r\n                                            ? 'bg-brand-50 border-brand-200 border'\r\n                                            : 'hover:bg-gray-50'\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"min-w-0 flex-1\">\r\n                                        <div className=\"font-medium truncate\">{s.names}</div>\r\n                                        <div className=\"text-xs text-gray-500\">{s.student_no}</div>\r\n                                    </div>\r\n                                    <div className={`font-mono text-xs lg:text-sm shrink-0 ml-2 ${bal > 0 ? 'text-red-600' : 'text-green-600'}`}>\r\n                                        {bal > 0 ? `-${Utils.formatCurrency(bal)}` : '✓'}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {filteredStudents.length === 0 && (\r\n                            <div className=\"text-center py-8 text-gray-400 text-sm\">\r\n                                {searchTerm ? 'No students match your search' : 'No students in this class'}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n            <div className=\"lg:col-span-2\">\r\n                {selectedStudent && student ? (\r\n                    <div className=\"space-y-4 lg:space-y-6\">\r\n                        {/* Summary Cards */}\r\n                        <div className=\"grid grid-cols-3 gap-2 lg:gap-4\">\r\n                            <Card className=\"bg-blue-50 border-blue-100 p-3 lg:p-4\">\r\n                                <div className=\"text-xs lg:text-sm text-blue-600\">Total Bill</div>\r\n                                <div className=\"text-base lg:text-xl font-bold text-blue-900\">{Utils.formatCurrency(totalBill)}</div>\r\n                            </Card>\r\n                            <Card className=\"bg-green-50 border-green-100 p-3 lg:p-4\">\r\n                                <div className=\"text-xs lg:text-sm text-green-600\">Total Paid</div>\r\n                                <div className=\"text-base lg:text-xl font-bold text-green-900\">{Utils.formatCurrency(totalPaid)}</div>\r\n                            </Card>\r\n                            <Card className={`p-3 lg:p-4 ${balance > 0 ? 'bg-red-50 border-red-100' : 'bg-green-50 border-green-100'}`}>\r\n                                <div className={`text-xs lg:text-sm ${balance > 0 ? 'text-red-600' : 'text-green-600'}`}>\r\n                                    {balance > 0 ? 'Outstanding' : 'Status'}\r\n                                </div>\r\n                                <div className={`text-base lg:text-xl font-bold ${balance > 0 ? 'text-red-900' : 'text-green-900'}`}>\r\n                                    {balance > 0 ? Utils.formatCurrency(balance) : '✓ Paid'}\r\n                                </div>\r\n                            </Card>\r\n                        </div>\r\n\r\n                        {/* Bill Breakdown */}\r\n                        <Card title=\"Bill Breakdown\" action={\r\n                            onPrintInvoice && (\r\n                                <Button size=\"sm\" variant=\"secondary\" onClick={() => onPrintInvoice(student)}>\r\n                                    <FileText className=\"h-4 w-4 mr-1 lg:mr-2\" /> <span className=\"hidden sm:inline\">Print</span> Invoice\r\n                                </Button>\r\n                            )\r\n                        }>\r\n                            <div className=\"overflow-x-auto -mx-4 lg:mx-0\">\r\n                                <table className=\"w-full text-xs lg:text-sm text-left min-w-[280px]\">\r\n                                    <thead className=\"bg-gray-50 text-gray-700\">\r\n                                        <tr>\r\n                                            <th className=\"px-3 lg:px-4 py-2\">Fee Head</th>\r\n                                            <th className=\"px-3 lg:px-4 py-2 text-right\">Amount</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-gray-100\">\r\n                                        {applicableFees.map(fee => (\r\n                                            <tr key={fee.id}>\r\n                                                <td className=\"px-3 lg:px-4 py-2\">{fee.name}</td>\r\n                                                <td className=\"px-3 lg:px-4 py-2 text-right font-mono\">{Utils.formatCurrency(fee.amount)}</td>\r\n                                            </tr>\r\n                                        ))}\r\n                                        <tr className=\"bg-gray-50 font-bold\">\r\n                                            <td className=\"px-3 lg:px-4 py-2\">Total Billed</td>\r\n                                            <td className=\"px-3 lg:px-4 py-2 text-right\">{Utils.formatCurrency(totalBill)}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </Card>\r\n\r\n                        {/* Payment History */}\r\n                        <Card title=\"Payment History\" action={\r\n                            <Button size=\"sm\" onClick={onRecordPayment}>\r\n                                <Plus className=\"h-4 w-4 mr-2\" /> Record Payment\r\n                            </Button>\r\n                        }>\r\n                            <div className=\"space-y-3 mt-2\">\r\n                                {studentPayments.length === 0 && (\r\n                                    <div className=\"text-center py-4 text-gray-500\">No payments recorded for this term.</div>\r\n                                )}\r\n                                {studentPayments.map(p => {\r\n                                    // Get line items description\r\n                                    const lineItemsDesc = p.lineItems?.map(item => item.purpose).join(', ') || 'Payment';\r\n                                    return (\r\n                                        <div key={p.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100\">\r\n                                            <div>\r\n                                                <div className=\"font-medium text-gray-900\">{Utils.formatCurrency(p.amount)}</div>\r\n                                                <div className=\"text-xs text-gray-500\">{p.date} • {p.method}</div>\r\n                                                <div className=\"text-xs text-brand-600 capitalize\">{lineItemsDesc}</div>\r\n                                                {p.remark && <div className=\"text-xs text-gray-500 italic\">\"{p.remark}\"</div>}\r\n                                            </div>\r\n                                            <div className=\"flex gap-2\">\r\n                                                <button onClick={() => onPrintReceipt(p)} title=\"Print Receipt\" className=\"p-1 text-gray-400 hover:text-blue-600\">\r\n                                                    <Printer className=\"h-4 w-4\" />\r\n                                                </button>\r\n                                                <button onClick={() => onDeletePayment(p.id)} title=\"Delete\" className=\"p-1 text-gray-400 hover:text-red-600\">\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"h-full flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-200 rounded-lg p-12\">\r\n                        <User className=\"h-12 w-12 mb-4 opacity-50\" />\r\n                        <p>Select a student to view fees and payments</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Printer, Check, Plus, Trash2, Download } from 'lucide-react';\r\nimport { Modal } from '@/components/ui/modal';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { ReceiptTemplate } from './ReceiptTemplate';\r\nimport { InvoiceTemplate } from './InvoiceTemplate';\r\nimport { downloadPDF } from '@/lib/pdf-utils';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface BursaryModalsProps {\r\n    settings: Types.Settings;\r\n    classes: Types.Class[];\r\n    students: Types.Student[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n\r\n    showPayModal: boolean;\r\n    setShowPayModal: (show: boolean) => void;\r\n    showExpenseModal: boolean;\r\n    setShowExpenseModal: (show: boolean) => void;\r\n    showFeeModal: boolean;\r\n    setShowFeeModal: (show: boolean) => void;\r\n    receiptPayment: Types.Payment | null;\r\n    setReceiptPayment: (p: Types.Payment | null) => void;\r\n    invoiceStudent: Types.Student | null;\r\n    setInvoiceStudent: (s: Types.Student | null) => void;\r\n\r\n    selectedStudent: string | null;\r\n    onAddPayment: (p: Types.Payment) => void;\r\n    onAddExpense: (e: Types.Expense) => void;\r\n    onAddFee: (f: Types.FeeStructure) => void;\r\n    addToast: (msg: string, type: 'success' | 'error') => void;\r\n}\r\n\r\nconst PAYMENT_PURPOSES = [\r\n    { value: 'tuition', label: 'Tuition Fees' },\r\n    { value: 'registration', label: 'Registration Fee' },\r\n    { value: 'books', label: 'Books & Materials' },\r\n    { value: 'uniform', label: 'School Uniform' },\r\n    { value: 'transport', label: 'Transport/Bus Fee' },\r\n    { value: 'exam', label: 'Examination Fee' },\r\n    { value: 'excursion', label: 'Excursion/Field Trip' },\r\n    { value: 'other', label: 'Other' },\r\n];\r\n\r\ninterface LineItem {\r\n    purpose: string;\r\n    amount: string;\r\n}\r\n\r\nexport const BursaryModals: React.FC<BursaryModalsProps> = ({\r\n    settings, classes, students, fees, payments,\r\n    showPayModal, setShowPayModal, showExpenseModal, setShowExpenseModal, showFeeModal, setShowFeeModal,\r\n    receiptPayment, setReceiptPayment, invoiceStudent, setInvoiceStudent,\r\n    selectedStudent, onAddPayment, onAddExpense, onAddFee, addToast\r\n}) => {\r\n    // Payment form with line items\r\n    const [lineItems, setLineItems] = useState<LineItem[]>([{ purpose: 'tuition', amount: '' }]);\r\n    const [payMethod, setPayMethod] = useState('cash');\r\n    const [payRemark, setPayRemark] = useState('');\r\n\r\n    const [expTitle, setExpTitle] = useState('');\r\n    const [expAmount, setExpAmount] = useState('');\r\n    const [expCat, setExpCat] = useState('supplies');\r\n    const [expDate, setExpDate] = useState(Utils.getTodayString());\r\n    const [expDesc, setExpDesc] = useState('');\r\n\r\n    const [feeName, setFeeName] = useState('');\r\n    const [feeAmount, setFeeAmount] = useState('');\r\n    const [feeClass, setFeeClass] = useState('');\r\n\r\n    // Invoice discount\r\n    const [invoiceDiscount, setInvoiceDiscount] = useState('');\r\n    const [discountReason, setDiscountReason] = useState('');\r\n\r\n    const addLineItem = () => {\r\n        setLineItems([...lineItems, { purpose: 'tuition', amount: '' }]);\r\n    };\r\n\r\n    const removeLineItem = (index: number) => {\r\n        if (lineItems.length > 1) {\r\n            setLineItems(lineItems.filter((_, i) => i !== index));\r\n        }\r\n    };\r\n\r\n    const updateLineItem = (index: number, field: 'purpose' | 'amount', value: string) => {\r\n        const updated = [...lineItems];\r\n        updated[index][field] = value;\r\n        setLineItems(updated);\r\n    };\r\n\r\n    const getTotalAmount = () => {\r\n        return lineItems.reduce((sum, item) => sum + (Number(item.amount) || 0), 0);\r\n    };\r\n\r\n    const handlePaymentSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedStudent) return;\r\n\r\n        const validLineItems = lineItems.filter(item => item.amount && Number(item.amount) > 0);\r\n        if (validLineItems.length === 0) {\r\n            addToast('Please add at least one payment item with an amount', 'error');\r\n            return;\r\n        }\r\n\r\n        const totalAmount = getTotalAmount();\r\n\r\n        onAddPayment({\r\n            id: Utils.generateId(),\r\n            student_id: selectedStudent,\r\n            amount: totalAmount,\r\n            method: payMethod as any,\r\n            lineItems: validLineItems.map(item => ({\r\n                purpose: item.purpose,\r\n                amount: Number(item.amount)\r\n            })),\r\n            remark: payRemark,\r\n            date: Utils.getTodayString(),\r\n            session: settings.current_session,\r\n            term: settings.current_term,\r\n            created_at: Date.now(),\r\n            updated_at: Date.now()\r\n        });\r\n        addToast('Payment recorded successfully', 'success');\r\n        setShowPayModal(false);\r\n        setLineItems([{ purpose: 'tuition', amount: '' }]);\r\n        setPayRemark('');\r\n    };\r\n\r\n    const handleExpenseSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddExpense({\r\n            id: Utils.generateId(),\r\n            title: expTitle,\r\n            amount: Number(expAmount),\r\n            category: expCat as any,\r\n            date: expDate,\r\n            description: expDesc || undefined,\r\n            session: settings.current_session,\r\n            term: settings.current_term,\r\n            created_at: Date.now(),\r\n            updated_at: Date.now()\r\n        });\r\n        addToast('Expense recorded', 'success');\r\n        setShowExpenseModal(false);\r\n        setExpTitle('');\r\n        setExpAmount('');\r\n        setExpDesc('');\r\n    };\r\n\r\n    const handleFeeSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onAddFee({\r\n            id: Utils.generateId(), name: feeName, amount: Number(feeAmount), class_id: feeClass || null, session: settings.current_session, term: settings.current_term, created_at: Date.now(), updated_at: Date.now()\r\n        });\r\n        addToast('Fee structure added', 'success'); setShowFeeModal(false); setFeeName(''); setFeeAmount(''); setFeeClass('');\r\n    };\r\n\r\n    const receiptStudent = receiptPayment ? students.find(s => s.id === receiptPayment.student_id) : null;\r\n\r\n    const handlePrintReceipt = () => {\r\n        const printContent = document.getElementById('receipt-print');\r\n        if (!printContent) return;\r\n\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        const logoUrl = settings.logo_media || '';\r\n\r\n        printWindow.document.write(`\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <title>Payment Receipt - ${settings.school_name}</title>\r\n                <style>\r\n                    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n                    body { font-family: 'Segoe UI', Arial, sans-serif; padding: 20px; background: white; }\r\n                    .receipt { max-width: 600px; margin: 0 auto; border: 2px solid #1A3A5C; border-radius: 8px; padding: 24px; position: relative; overflow: hidden; }\r\n                    .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.06; width: 280px; height: 280px; pointer-events: none; z-index: 0; }\r\n                    .watermark img { width: 100%; height: 100%; object-fit: contain; }\r\n                    .content { position: relative; z-index: 1; }\r\n                    @media print { body { padding: 0; } .receipt { border: none; } }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"receipt\">\r\n                    ${logoUrl ? `<div class=\"watermark\"><img src=\"${logoUrl}\" alt=\"Watermark\" /></div>` : ''}\r\n                    <div class=\"content\">\r\n                        ${printContent.innerHTML}\r\n                    </div>\r\n                </div>\r\n            </body>\r\n            </html>\r\n        `);\r\n\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        setTimeout(() => { printWindow.print(); printWindow.close(); }, 250);\r\n    };\r\n\r\n    const handlePrintInvoice = () => {\r\n        const printContent = document.getElementById('invoice-print');\r\n        if (!printContent) return;\r\n\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        const logoUrl = settings.logo_media || '';\r\n\r\n        printWindow.document.write(`\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <title>Fee Invoice - ${settings.school_name}</title>\r\n                <style>\r\n                    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }\r\n                    body { font-family: 'Segoe UI', Arial, sans-serif; padding: 15px; background: white; }\r\n                    .invoice { max-width: 700px; margin: 0 auto; padding: 20px; position: relative; overflow: hidden; }\r\n                    .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.05; width: 350px; height: 350px; pointer-events: none; z-index: 0; }\r\n                    .watermark img { width: 100%; height: 100%; object-fit: contain; }\r\n                    .content { position: relative; z-index: 1; }\r\n                    @media print { \r\n                        * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }\r\n                        body { padding: 0; } \r\n                        .invoice { max-width: 100%; padding: 10px; }\r\n                    }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"invoice\">\r\n                    ${logoUrl ? `<div class=\"watermark\"><img src=\"${logoUrl}\" alt=\"Watermark\" /></div>` : ''}\r\n                    <div class=\"content\">\r\n                        ${printContent.innerHTML}\r\n                    </div>\r\n                </div>\r\n            </body>\r\n            </html>\r\n        `);\r\n\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        setTimeout(() => { printWindow.print(); printWindow.close(); }, 250);\r\n    };\r\n\r\n    const handleDownloadReceipt = async () => {\r\n        if (!receiptPayment || !receiptStudent) return;\r\n        await downloadPDF(\r\n            'receipt-print',\r\n            `Receipt-${receiptStudent.student_no}-${receiptPayment.date}`,\r\n            { logoUrl: settings.logo_media }\r\n        );\r\n    };\r\n\r\n    const handleDownloadInvoice = async () => {\r\n        if (!invoiceStudent) return;\r\n        await downloadPDF(\r\n            'invoice-print',\r\n            `Invoice-${invoiceStudent.student_no}-${settings.current_term.replace(/\\s+/g, '_')}`,\r\n            { logoUrl: settings.logo_media }\r\n        );\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Payment Modal */}\r\n            <Modal isOpen={showPayModal} onClose={() => setShowPayModal(false)} title=\"Record Payment\">\r\n                <form onSubmit={handlePaymentSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                            <label className=\"block text-sm font-medium text-gray-700\">Payment Items</label>\r\n                            <button type=\"button\" onClick={addLineItem} className=\"text-xs flex items-center gap-1 text-brand-600 hover:text-brand-700\">\r\n                                <Plus size={14} /> Add Item\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                            {lineItems.map((item, index) => (\r\n                                <div key={index} className=\"flex items-center gap-2 bg-gray-50 p-2 rounded-lg\">\r\n                                    <select\r\n                                        value={item.purpose}\r\n                                        onChange={(e) => updateLineItem(index, 'purpose', e.target.value)}\r\n                                        className=\"flex-1 px-2 py-1.5 text-sm border border-gray-200 rounded-md focus:ring-1 focus:ring-brand-500 focus:border-brand-500\"\r\n                                    >\r\n                                        {PAYMENT_PURPOSES.map(p => (\r\n                                            <option key={p.value} value={p.value}>{p.label}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        placeholder=\"Amount\"\r\n                                        value={item.amount}\r\n                                        onChange={(e) => updateLineItem(index, 'amount', e.target.value)}\r\n                                        className=\"w-28 px-2 py-1.5 text-sm border border-gray-200 rounded-md focus:ring-1 focus:ring-brand-500 focus:border-brand-500\"\r\n                                    />\r\n                                    {lineItems.length > 1 && (\r\n                                        <button type=\"button\" onClick={() => removeLineItem(index)} className=\"p-1 text-red-500 hover:bg-red-50 rounded\">\r\n                                            <Trash2 size={16} />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"mt-2 text-right text-sm font-semibold text-brand-600\">\r\n                            Total: {Utils.formatCurrency(getTotalAmount())}\r\n                        </div>\r\n                    </div>\r\n                    <Select label=\"Payment Method\" value={payMethod} onChange={e => setPayMethod(e.target.value)}>\r\n                        <option value=\"cash\">Cash</option>\r\n                        <option value=\"transfer\">Bank Transfer</option>\r\n                        <option value=\"pos\">POS</option>\r\n                    </Select>\r\n                    <Input label=\"Remark/Note (Optional)\" value={payRemark} onChange={e => setPayRemark(e.target.value)} />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Payment</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            {/* Receipt Modal */}\r\n            <Modal isOpen={!!receiptPayment} onClose={() => setReceiptPayment(null)} title=\"Print Receipt\">\r\n                {receiptPayment && receiptStudent && (\r\n                    <div className=\"overflow-y-auto max-h-[80vh]\">\r\n                        <ReceiptTemplate\r\n                            payment={receiptPayment}\r\n                            student={receiptStudent}\r\n                            cls={classes.find(c => c.id === receiptStudent.class_id)}\r\n                            settings={settings}\r\n                        />\r\n                        <div className=\"mt-4 flex justify-end gap-2\">\r\n                            <Button variant=\"secondary\" onClick={() => setReceiptPayment(null)}>Close</Button>\r\n                            <Button variant=\"outline\" onClick={handleDownloadReceipt}>\r\n                                <Download className=\"h-4 w-4 mr-2\" /> Save PDF\r\n                            </Button>\r\n                            <Button onClick={handlePrintReceipt}>\r\n                                <Printer className=\"h-4 w-4 mr-2\" /> Print\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            {/* Invoice Modal */}\r\n            <Modal isOpen={!!invoiceStudent} onClose={() => { setInvoiceStudent(null); setInvoiceDiscount(''); setDiscountReason(''); }} title=\"Fee Invoice\">\r\n                {invoiceStudent && (\r\n                    <div className=\"space-y-4\">\r\n                        {/* Discount Options */}\r\n                        <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\r\n                            <p className=\"text-sm font-medium text-amber-800 mb-3\">Apply Discount (Optional)</p>\r\n                            <div className=\"grid grid-cols-2 gap-3\">\r\n                                <div>\r\n                                    <label className=\"block text-xs text-amber-700 mb-1\">Discount Amount (₦)</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        placeholder=\"0\"\r\n                                        value={invoiceDiscount}\r\n                                        onChange={e => setInvoiceDiscount(e.target.value)}\r\n                                        className=\"w-full px-3 py-2 text-sm border border-amber-200 rounded-md focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs text-amber-700 mb-1\">Reason</label>\r\n                                    <select\r\n                                        value={discountReason}\r\n                                        onChange={e => setDiscountReason(e.target.value)}\r\n                                        className=\"w-full px-3 py-2 text-sm border border-amber-200 rounded-md focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white\"\r\n                                    >\r\n                                        <option value=\"\">Select reason</option>\r\n                                        <option value=\"Scholarship\">Scholarship</option>\r\n                                        <option value=\"Staff Ward\">Staff Ward</option>\r\n                                        <option value=\"Sibling Discount\">Sibling Discount</option>\r\n                                        <option value=\"Early Payment\">Early Payment</option>\r\n                                        <option value=\"Financial Aid\">Financial Aid</option>\r\n                                        <option value=\"Special Arrangement\">Special Arrangement</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Invoice Preview */}\r\n                        <div className=\"overflow-y-auto max-h-[60vh] border rounded-lg p-2 bg-gray-50\">\r\n                            <InvoiceTemplate\r\n                                student={invoiceStudent}\r\n                                cls={classes.find(c => c.id === invoiceStudent.class_id)}\r\n                                fees={fees}\r\n                                payments={payments}\r\n                                settings={settings}\r\n                                discount={Number(invoiceDiscount) || 0}\r\n                                discountReason={discountReason}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end gap-2 pt-2 border-t\">\r\n                            <Button variant=\"secondary\" onClick={() => { setInvoiceStudent(null); setInvoiceDiscount(''); setDiscountReason(''); }}>Close</Button>\r\n                            <Button variant=\"outline\" onClick={handleDownloadInvoice}>\r\n                                <Download className=\"h-4 w-4 mr-2\" /> Save PDF\r\n                            </Button>\r\n                            <Button onClick={handlePrintInvoice}>\r\n                                <Printer className=\"h-4 w-4 mr-2\" /> Print\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Modal>\r\n\r\n            {/* Expense Modal */}\r\n            <Modal isOpen={showExpenseModal} onClose={() => setShowExpenseModal(false)} title=\"Record Expense\">\r\n                <form onSubmit={handleExpenseSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Title\" required value={expTitle} onChange={e => setExpTitle(e.target.value)} placeholder=\"e.g. Classroom repairs\" />\r\n                    <Input label=\"Amount\" type=\"number\" required value={expAmount} onChange={e => setExpAmount(e.target.value)} />\r\n                    <Select label=\"Category\" value={expCat} onChange={e => setExpCat(e.target.value)}>\r\n                        <option value=\"supplies\">Supplies</option>\r\n                        <option value=\"maintenance\">Maintenance</option>\r\n                        <option value=\"salary\">Salary</option>\r\n                        <option value=\"utilities\">Utilities</option>\r\n                        <option value=\"other\">Other</option>\r\n                    </Select>\r\n                    <Input label=\"Date\" type=\"date\" value={expDate} onChange={e => setExpDate(e.target.value)} />\r\n                    <Input label=\"Description (Optional)\" value={expDesc} onChange={e => setExpDesc(e.target.value)} placeholder=\"Additional details...\" />\r\n                    <Button type=\"submit\" className=\"w-full\">Save Expense</Button>\r\n                </form>\r\n            </Modal>\r\n\r\n            {/* Fee Structure Modal */}\r\n            <Modal isOpen={showFeeModal} onClose={() => setShowFeeModal(false)} title=\"Add Fee Structure\">\r\n                <form onSubmit={handleFeeSubmit} className=\"space-y-4\">\r\n                    <Input label=\"Fee Name\" required value={feeName} onChange={e => setFeeName(e.target.value)} placeholder=\"e.g. Tuition Fee\" />\r\n                    <Input label=\"Amount\" type=\"number\" required value={feeAmount} onChange={e => setFeeAmount(e.target.value)} />\r\n                    <Select label=\"Applicable Class\" value={feeClass} onChange={e => setFeeClass(e.target.value)}>\r\n                        <option value=\"\">All Classes</option>\r\n                        {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </Select>\r\n                    <Button type=\"submit\" className=\"w-full\">Create Fee</Button>\r\n                </form>\r\n            </Modal>\r\n        </>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { TrendingUp, TrendingDown, DollarSign, Users, AlertTriangle, FileText, Download } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface FinancialDashboardProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    expenses: Types.Expense[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const FinancialDashboard: React.FC<FinancialDashboardProps> = ({\r\n    students, classes, fees, payments, expenses, settings\r\n}) => {\r\n    // Filter for current session/term\r\n    const currentPayments = payments.filter(p => p.session === settings.current_session && p.term === settings.current_term);\r\n    const currentExpenses = expenses.filter(e => e.session === settings.current_session && e.term === settings.current_term);\r\n    const currentFees = fees.filter(f => f.session === settings.current_session && f.term === settings.current_term);\r\n\r\n    // Calculate totals\r\n    const totalIncome = currentPayments.reduce((sum, p) => sum + p.amount, 0);\r\n    const totalExpenses = currentExpenses.reduce((sum, e) => sum + e.amount, 0);\r\n    const netBalance = totalIncome - totalExpenses;\r\n\r\n    // Calculate expected vs collected\r\n    const expectedIncome = students.reduce((sum, student) => {\r\n        const applicableFees = currentFees.filter(f => f.class_id === null || f.class_id === student.class_id);\r\n        return sum + applicableFees.reduce((feeSum, fee) => feeSum + fee.amount, 0);\r\n    }, 0);\r\n    const collectionRate = expectedIncome > 0 ? (totalIncome / expectedIncome) * 100 : 0;\r\n\r\n    // Debtors analysis\r\n    const debtors = students.map(student => {\r\n        const { balance } = Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term);\r\n        return { student, balance };\r\n    }).filter(d => d.balance > 0).sort((a, b) => b.balance - a.balance);\r\n\r\n    const totalOutstanding = debtors.reduce((sum, d) => sum + d.balance, 0);\r\n\r\n    // Payment method breakdown\r\n    const paymentsByMethod = currentPayments.reduce((acc, p) => {\r\n        acc[p.method] = (acc[p.method] || 0) + p.amount;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    // Expense by category\r\n    const expensesByCategory = currentExpenses.reduce((acc, e) => {\r\n        acc[e.category] = (acc[e.category] || 0) + e.amount;\r\n        return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    // Recent transactions\r\n    const recentPayments = [...currentPayments].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).slice(0, 5);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Summary Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <Card className=\"bg-gradient-to-br from-green-500 to-green-600 text-white p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-green-100 text-sm font-medium\">Total Income</p>\r\n                            <p className=\"text-2xl font-bold mt-1\">{Utils.formatCurrency(totalIncome)}</p>\r\n                            <p className=\"text-green-200 text-xs mt-1\">{currentPayments.length} payments</p>\r\n                        </div>\r\n                        <div className=\"h-12 w-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <TrendingUp size={24} />\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className=\"bg-gradient-to-br from-red-500 to-red-600 text-white p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-red-100 text-sm font-medium\">Total Expenses</p>\r\n                            <p className=\"text-2xl font-bold mt-1\">{Utils.formatCurrency(totalExpenses)}</p>\r\n                            <p className=\"text-red-200 text-xs mt-1\">{currentExpenses.length} records</p>\r\n                        </div>\r\n                        <div className=\"h-12 w-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <TrendingDown size={24} />\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className={`bg-gradient-to-br ${netBalance >= 0 ? 'from-blue-500 to-blue-600' : 'from-orange-500 to-orange-600'} text-white p-5`}>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white/80 text-sm font-medium\">Net Balance</p>\r\n                            <p className=\"text-2xl font-bold mt-1\">{Utils.formatCurrency(netBalance)}</p>\r\n                            <p className=\"text-white/60 text-xs mt-1\">{netBalance >= 0 ? 'Profit' : 'Loss'}</p>\r\n                        </div>\r\n                        <div className=\"h-12 w-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <DollarSign size={24} />\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className=\"bg-gradient-to-br from-amber-500 to-amber-600 text-white p-5\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-amber-100 text-sm font-medium\">Outstanding Fees</p>\r\n                            <p className=\"text-2xl font-bold mt-1\">{Utils.formatCurrency(totalOutstanding)}</p>\r\n                            <p className=\"text-amber-200 text-xs mt-1\">{debtors.length} debtors</p>\r\n                        </div>\r\n                        <div className=\"h-12 w-12 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                            <AlertTriangle size={24} />\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Collection Rate */}\r\n            <Card className=\"p-5\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                    <h3 className=\"font-semibold text-gray-900\">Fee Collection Progress</h3>\r\n                    <span className=\"text-sm text-gray-500\">{settings.current_session} - {settings.current_term}</span>\r\n                </div>\r\n                <div className=\"mb-2\">\r\n                    <div className=\"flex justify-between text-sm mb-1\">\r\n                        <span className=\"text-gray-600\">Collected: {Utils.formatCurrency(totalIncome)}</span>\r\n                        <span className=\"text-gray-600\">Expected: {Utils.formatCurrency(expectedIncome)}</span>\r\n                    </div>\r\n                    <div className=\"h-4 bg-gray-200 rounded-full overflow-hidden\">\r\n                        <div\r\n                            className=\"h-full bg-gradient-to-r from-green-500 to-green-600 rounded-full transition-all duration-500\"\r\n                            style={{ width: `${Math.min(collectionRate, 100)}%` }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <p className=\"text-sm text-gray-500\">{collectionRate.toFixed(1)}% collection rate</p>\r\n            </Card>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Payment Methods Breakdown */}\r\n                <Card className=\"p-5\">\r\n                    <h3 className=\"font-semibold text-gray-900 mb-4\">Payment Methods</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {Object.entries(paymentsByMethod).map(([method, amount]) => {\r\n                            const percentage = totalIncome > 0 ? (amount / totalIncome) * 100 : 0;\r\n                            return (\r\n                                <div key={method}>\r\n                                    <div className=\"flex justify-between text-sm mb-1\">\r\n                                        <span className=\"capitalize text-gray-700\">{method}</span>\r\n                                        <span className=\"font-medium\">{Utils.formatCurrency(amount)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-brand-500 rounded-full\"\r\n                                            style={{ width: `${percentage}%` }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {Object.keys(paymentsByMethod).length === 0 && (\r\n                            <p className=\"text-gray-400 text-sm text-center py-4\">No payments recorded</p>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n\r\n                {/* Expense Categories */}\r\n                <Card className=\"p-5\">\r\n                    <h3 className=\"font-semibold text-gray-900 mb-4\">Expense Categories</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {Object.entries(expensesByCategory).map(([category, amount]) => {\r\n                            const percentage = totalExpenses > 0 ? (amount / totalExpenses) * 100 : 0;\r\n                            return (\r\n                                <div key={category}>\r\n                                    <div className=\"flex justify-between text-sm mb-1\">\r\n                                        <span className=\"capitalize text-gray-700\">{category}</span>\r\n                                        <span className=\"font-medium text-red-600\">-{Utils.formatCurrency(amount)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-red-400 rounded-full\"\r\n                                            style={{ width: `${percentage}%` }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {Object.keys(expensesByCategory).length === 0 && (\r\n                            <p className=\"text-gray-400 text-sm text-center py-4\">No expenses recorded</p>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Recent Transactions & Top Debtors */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                <Card className=\"p-5\">\r\n                    <h3 className=\"font-semibold text-gray-900 mb-4\">Recent Payments</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {recentPayments.map(p => {\r\n                            const student = students.find(s => s.id === p.student_id);\r\n                            return (\r\n                                <div key={p.id} className=\"flex items-center justify-between py-2 border-b border-gray-100 last:border-0\">\r\n                                    <div>\r\n                                        <p className=\"font-medium text-gray-900 text-sm\">{student?.names || 'Unknown'}</p>\r\n                                        <p className=\"text-xs text-gray-500\">{p.date} • {p.method}</p>\r\n                                    </div>\r\n                                    <span className=\"font-semibold text-green-600\">{Utils.formatCurrency(p.amount)}</span>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {recentPayments.length === 0 && (\r\n                            <p className=\"text-gray-400 text-sm text-center py-4\">No recent payments</p>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n\r\n                <Card className=\"p-5\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <h3 className=\"font-semibold text-gray-900\">Top Debtors</h3>\r\n                        <span className=\"text-xs text-gray-500\">{debtors.length} students owing</span>\r\n                    </div>\r\n                    <div className=\"space-y-3\">\r\n                        {debtors.slice(0, 5).map(({ student, balance }) => {\r\n                            const cls = classes.find(c => c.id === student.class_id);\r\n                            return (\r\n                                <div key={student.id} className=\"flex items-center justify-between py-2 border-b border-gray-100 last:border-0\">\r\n                                    <div>\r\n                                        <p className=\"font-medium text-gray-900 text-sm\">{student.names}</p>\r\n                                        <p className=\"text-xs text-gray-500\">{cls?.name} • {student.student_no}</p>\r\n                                    </div>\r\n                                    <span className=\"font-semibold text-red-600\">{Utils.formatCurrency(balance)}</span>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {debtors.length === 0 && (\r\n                            <p className=\"text-green-600 text-sm text-center py-4\">🎉 No outstanding fees!</p>\r\n                        )}\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Search, Download, Printer, Phone, Mail, Filter } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface DebtorReportProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const DebtorReport: React.FC<DebtorReportProps> = ({\r\n    students, classes, fees, payments, settings\r\n}) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedClass, setSelectedClass] = useState('all');\r\n    const [sortBy, setSortBy] = useState<'balance' | 'name'>('balance');\r\n    const [minAmount, setMinAmount] = useState('');\r\n\r\n    // Calculate debtors\r\n    const allDebtors = students.map(student => {\r\n        const cls = classes.find(c => c.id === student.class_id);\r\n        const { totalBill, totalPaid, balance } = Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term);\r\n        return { student, cls, totalBill, totalPaid, balance };\r\n    }).filter(d => d.balance > 0);\r\n\r\n    // Apply filters\r\n    let filteredDebtors = [...allDebtors];\r\n\r\n    if (searchTerm) {\r\n        filteredDebtors = filteredDebtors.filter(d =>\r\n            d.student.names.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            d.student.student_no.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            d.student.parent_name.toLowerCase().includes(searchTerm.toLowerCase())\r\n        );\r\n    }\r\n\r\n    if (selectedClass !== 'all') {\r\n        filteredDebtors = filteredDebtors.filter(d => d.student.class_id === selectedClass);\r\n    }\r\n\r\n    if (minAmount) {\r\n        filteredDebtors = filteredDebtors.filter(d => d.balance >= Number(minAmount));\r\n    }\r\n\r\n    // Sort\r\n    if (sortBy === 'balance') {\r\n        filteredDebtors.sort((a, b) => b.balance - a.balance);\r\n    } else {\r\n        filteredDebtors.sort((a, b) => a.student.names.localeCompare(b.student.names));\r\n    }\r\n\r\n    const totalOutstanding = filteredDebtors.reduce((sum, d) => sum + d.balance, 0);\r\n\r\n    const handlePrint = () => {\r\n        const printWindow = window.open('', '_blank');\r\n        if (!printWindow) return;\r\n\r\n        printWindow.document.write(`\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n                <title>Debtor Report - ${settings.school_name}</title>\r\n                <style>\r\n                    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n                    body { font-family: 'Segoe UI', Arial, sans-serif; padding: 20px; }\r\n                    .header { text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #1A3A5C; }\r\n                    .school-name { font-size: 20px; font-weight: 800; color: #1A3A5C; }\r\n                    .report-title { font-size: 14px; color: #666; margin-top: 5px; }\r\n                    .summary { display: flex; justify-content: space-between; margin-bottom: 20px; padding: 10px; background: #f5f5f5; border-radius: 4px; }\r\n                    table { width: 100%; border-collapse: collapse; font-size: 11px; }\r\n                    th { background: #1A3A5C; color: white; padding: 8px; text-align: left; }\r\n                    td { padding: 8px; border-bottom: 1px solid #ddd; }\r\n                    tr:nth-child(even) { background: #f9f9f9; }\r\n                    .amount { text-align: right; font-weight: 600; }\r\n                    .total-row { background: #1A3A5C !important; color: white; font-weight: bold; }\r\n                    .footer { margin-top: 20px; text-align: center; font-size: 10px; color: #999; }\r\n                </style>\r\n            </head>\r\n            <body>\r\n                <div class=\"header\">\r\n                    <div class=\"school-name\">${settings.school_name}</div>\r\n                    <div class=\"report-title\">DEBTOR REPORT - ${settings.current_session} (${settings.current_term})</div>\r\n                    <div class=\"report-title\">Generated: ${new Date().toLocaleDateString()}</div>\r\n                </div>\r\n                <div class=\"summary\">\r\n                    <span>Total Debtors: ${filteredDebtors.length}</span>\r\n                    <span>Total Outstanding: ${Utils.formatCurrency(totalOutstanding)}</span>\r\n                </div>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>S/N</th>\r\n                            <th>Student Name</th>\r\n                            <th>Student ID</th>\r\n                            <th>Class</th>\r\n                            <th>Parent/Guardian</th>\r\n                            <th>Phone</th>\r\n                            <th class=\"amount\">Total Bill</th>\r\n                            <th class=\"amount\">Paid</th>\r\n                            <th class=\"amount\">Balance</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        ${filteredDebtors.map((d, i) => `\r\n                            <tr>\r\n                                <td>${i + 1}</td>\r\n                                <td>${d.student.names}</td>\r\n                                <td>${d.student.student_no}</td>\r\n                                <td>${d.cls?.name || 'N/A'}</td>\r\n                                <td>${d.student.parent_name}</td>\r\n                                <td>${d.student.parent_phone}</td>\r\n                                <td class=\"amount\">${Utils.formatCurrency(d.totalBill)}</td>\r\n                                <td class=\"amount\">${Utils.formatCurrency(d.totalPaid)}</td>\r\n                                <td class=\"amount\" style=\"color: #c53030;\">${Utils.formatCurrency(d.balance)}</td>\r\n                            </tr>\r\n                        `).join('')}\r\n                        <tr class=\"total-row\">\r\n                            <td colspan=\"6\">TOTAL</td>\r\n                            <td class=\"amount\">${Utils.formatCurrency(filteredDebtors.reduce((s, d) => s + d.totalBill, 0))}</td>\r\n                            <td class=\"amount\">${Utils.formatCurrency(filteredDebtors.reduce((s, d) => s + d.totalPaid, 0))}</td>\r\n                            <td class=\"amount\">${Utils.formatCurrency(totalOutstanding)}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <div class=\"footer\">${settings.school_tagline}</div>\r\n            </body>\r\n            </html>\r\n        `);\r\n\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        setTimeout(() => { printWindow.print(); printWindow.close(); }, 250);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Filters */}\r\n            <Card className=\"p-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\r\n                    <div className=\"md:col-span-2\">\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Search</label>\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search by name, ID, or parent...\"\r\n                                value={searchTerm}\r\n                                onChange={e => setSearchTerm(e.target.value)}\r\n                                className=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-brand-500\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <Select label=\"Class\" value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>\r\n                        <option value=\"all\">All Classes</option>\r\n                        {classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </Select>\r\n                    <Input\r\n                        label=\"Min Amount\"\r\n                        type=\"number\"\r\n                        placeholder=\"0\"\r\n                        value={minAmount}\r\n                        onChange={e => setMinAmount(e.target.value)}\r\n                    />\r\n                    <Button onClick={handlePrint} className=\"h-10\">\r\n                        <Printer className=\"h-4 w-4 mr-2\" /> Print Report\r\n                    </Button>\r\n                </div>\r\n            </Card>\r\n\r\n            {/* Summary */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Card className=\"p-4 bg-red-50 border-red-100\">\r\n                    <p className=\"text-sm text-red-600\">Total Outstanding</p>\r\n                    <p className=\"text-2xl font-bold text-red-700\">{Utils.formatCurrency(totalOutstanding)}</p>\r\n                </Card>\r\n                <Card className=\"p-4 bg-amber-50 border-amber-100\">\r\n                    <p className=\"text-sm text-amber-600\">Number of Debtors</p>\r\n                    <p className=\"text-2xl font-bold text-amber-700\">{filteredDebtors.length}</p>\r\n                </Card>\r\n                <Card className=\"p-4 bg-blue-50 border-blue-100\">\r\n                    <p className=\"text-sm text-blue-600\">Average Debt</p>\r\n                    <p className=\"text-2xl font-bold text-blue-700\">\r\n                        {filteredDebtors.length > 0 ? Utils.formatCurrency(totalOutstanding / filteredDebtors.length) : '₦0'}\r\n                    </p>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Debtors Table */}\r\n            <Card>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm\">\r\n                        <thead className=\"bg-gray-50 text-gray-700\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-3 text-left\">S/N</th>\r\n                                <th className=\"px-4 py-3 text-left\">Student</th>\r\n                                <th className=\"px-4 py-3 text-left\">Class</th>\r\n                                <th className=\"px-4 py-3 text-left\">Parent/Guardian</th>\r\n                                <th className=\"px-4 py-3 text-left\">Contact</th>\r\n                                <th className=\"px-4 py-3 text-right\">Total Bill</th>\r\n                                <th className=\"px-4 py-3 text-right\">Paid</th>\r\n                                <th className=\"px-4 py-3 text-right\">Balance</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {filteredDebtors.map((d, index) => (\r\n                                <tr key={d.student.id} className=\"hover:bg-gray-50\">\r\n                                    <td className=\"px-4 py-3 text-gray-500\">{index + 1}</td>\r\n                                    <td className=\"px-4 py-3\">\r\n                                        <div className=\"font-medium text-gray-900\">{d.student.names}</div>\r\n                                        <div className=\"text-xs text-gray-500\">{d.student.student_no}</div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3\">\r\n                                        <span className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs\">\r\n                                            {d.cls?.name || 'N/A'}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-gray-700\">{d.student.parent_name}</td>\r\n                                    <td className=\"px-4 py-3\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <a href={`tel:${d.student.parent_phone}`} className=\"text-brand-600 hover:text-brand-700\">\r\n                                                <Phone size={14} />\r\n                                            </a>\r\n                                            <span className=\"text-xs text-gray-500\">{d.student.parent_phone}</span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono\">{Utils.formatCurrency(d.totalBill)}</td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono text-green-600\">{Utils.formatCurrency(d.totalPaid)}</td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono font-bold text-red-600\">{Utils.formatCurrency(d.balance)}</td>\r\n                                </tr>\r\n                            ))}\r\n                            {filteredDebtors.length === 0 && (\r\n                                <tr>\r\n                                    <td colSpan={8} className=\"px-4 py-8 text-center text-gray-500\">\r\n                                        {allDebtors.length === 0 ? '🎉 No outstanding fees - all students are up to date!' : 'No debtors match your filter criteria.'}\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                        {filteredDebtors.length > 0 && (\r\n                            <tfoot className=\"bg-gray-100 font-bold\">\r\n                                <tr>\r\n                                    <td colSpan={5} className=\"px-4 py-3 text-right\">TOTAL:</td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono\">\r\n                                        {Utils.formatCurrency(filteredDebtors.reduce((s, d) => s + d.totalBill, 0))}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono text-green-600\">\r\n                                        {Utils.formatCurrency(filteredDebtors.reduce((s, d) => s + d.totalPaid, 0))}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono text-red-600\">\r\n                                        {Utils.formatCurrency(totalOutstanding)}\r\n                                    </td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        )}\r\n                    </table>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport * as Types from '@/lib/types';\r\nimport { useToast } from '@/components/providers/toast-provider';\r\n\r\n// Bursary sub-components\r\nimport { FeeManagement } from './bursary/FeeManagement';\r\nimport { ExpenseManagement } from './bursary/ExpenseManagement';\r\nimport { FeeStructureManagement } from './bursary/FeeStructureManagement';\r\nimport { BursaryModals } from './bursary/BursaryModals';\r\nimport { FinancialDashboard } from './bursary/FinancialDashboard';\r\nimport { DebtorReport } from './bursary/DebtorReport';\r\n\r\ninterface BursaryViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    expenses: Types.Expense[];\r\n    settings: Types.Settings;\r\n    onAddPayment: (p: Types.Payment) => void;\r\n    onAddFee: (f: Types.FeeStructure) => void;\r\n    onAddExpense: (e: Types.Expense) => void;\r\n    onDeletePayment: (id: string) => void;\r\n    onDeleteFee: (id: string) => void;\r\n    onDeleteExpense?: (id: string) => void;\r\n}\r\n\r\ntype TabType = 'dashboard' | 'fees' | 'debtors' | 'expenses' | 'structure';\r\n\r\nexport const BursaryView: React.FC<BursaryViewProps> = ({\r\n    students, classes, fees, payments, expenses, settings, onAddPayment, onAddFee, onAddExpense, onDeletePayment, onDeleteFee, onDeleteExpense\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState<TabType>('dashboard');\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const [selectedStudent, setSelectedStudent] = useState<string | null>(null);\r\n\r\n    // Modal Visibility State\r\n    const [showPayModal, setShowPayModal] = useState(false);\r\n    const [showExpenseModal, setShowExpenseModal] = useState(false);\r\n    const [showFeeModal, setShowFeeModal] = useState(false);\r\n    const [receiptPayment, setReceiptPayment] = useState<Types.Payment | null>(null);\r\n    const [invoiceStudent, setInvoiceStudent] = useState<Types.Student | null>(null);\r\n    const { addToast } = useToast();\r\n\r\n    const tabs: { key: TabType; label: string }[] = [\r\n        { key: 'dashboard', label: 'Dashboard' },\r\n        { key: 'fees', label: 'Fee Collection' },\r\n        { key: 'debtors', label: 'Debtors' },\r\n        { key: 'expenses', label: 'Expenses' },\r\n        { key: 'structure', label: 'Fee Structure' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Bursary & Finance</h1>\r\n                <div className=\"w-full sm:w-auto overflow-x-auto scrollbar-hide -mx-1 px-1\">\r\n                    <div className=\"flex bg-gray-100 p-1 rounded-lg w-max min-w-full sm:min-w-0\">\r\n                        {tabs.map(tab => (\r\n                            <button\r\n                                key={tab.key}\r\n                                onClick={() => setActiveTab(tab.key)}\r\n                                className={`px-3 py-2 text-sm font-medium rounded-md whitespace-nowrap transition-colors ${activeTab === tab.key\r\n                                        ? 'bg-white shadow-sm text-brand-700'\r\n                                        : 'text-gray-600 hover:text-gray-900'\r\n                                    }`}\r\n                            >\r\n                                {tab.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {activeTab === 'dashboard' && (\r\n                <FinancialDashboard\r\n                    students={students}\r\n                    classes={classes}\r\n                    fees={fees}\r\n                    payments={payments}\r\n                    expenses={expenses}\r\n                    settings={settings}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'fees' && (\r\n                <FeeManagement\r\n                    students={students}\r\n                    classes={classes}\r\n                    fees={fees}\r\n                    payments={payments}\r\n                    settings={settings}\r\n                    selectedClass={selectedClass}\r\n                    setSelectedClass={setSelectedClass}\r\n                    selectedStudent={selectedStudent}\r\n                    setSelectedStudent={setSelectedStudent}\r\n                    onRecordPayment={() => setShowPayModal(true)}\r\n                    onPrintReceipt={(p) => setReceiptPayment(p)}\r\n                    onDeletePayment={onDeletePayment}\r\n                    onPrintInvoice={(student) => setInvoiceStudent(student)}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'debtors' && (\r\n                <DebtorReport\r\n                    students={students}\r\n                    classes={classes}\r\n                    fees={fees}\r\n                    payments={payments}\r\n                    settings={settings}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'expenses' && (\r\n                <ExpenseManagement\r\n                    expenses={expenses}\r\n                    settings={settings}\r\n                    onAddExpense={() => setShowExpenseModal(true)}\r\n                    onDeleteExpense={onDeleteExpense}\r\n                />\r\n            )}\r\n\r\n            {activeTab === 'structure' && (\r\n                <FeeStructureManagement\r\n                    fees={fees}\r\n                    classes={classes}\r\n                    settings={settings}\r\n                    onAddFeeHead={() => setShowFeeModal(true)}\r\n                    onDeleteFee={onDeleteFee}\r\n                />\r\n            )}\r\n\r\n            <BursaryModals\r\n                settings={settings}\r\n                classes={classes}\r\n                students={students}\r\n                fees={fees}\r\n                payments={payments}\r\n                showPayModal={showPayModal}\r\n                setShowPayModal={setShowPayModal}\r\n                showExpenseModal={showExpenseModal}\r\n                setShowExpenseModal={setShowExpenseModal}\r\n                showFeeModal={showFeeModal}\r\n                setShowFeeModal={setShowFeeModal}\r\n                receiptPayment={receiptPayment}\r\n                setReceiptPayment={setReceiptPayment}\r\n                invoiceStudent={invoiceStudent}\r\n                setInvoiceStudent={setInvoiceStudent}\r\n                selectedStudent={selectedStudent}\r\n                onAddPayment={onAddPayment}\r\n                onAddExpense={onAddExpense}\r\n                onAddFee={onAddFee}\r\n                addToast={addToast}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","'use client';\r\n\r\n/**\r\n * Generates and downloads a PDF from an HTML element\r\n * Works on both desktop and mobile devices\r\n */\r\nexport const downloadPDF = async (\r\n    elementId: string,\r\n    filename: string,\r\n    options?: {\r\n        logoUrl?: string | null;\r\n        title?: string;\r\n    }\r\n): Promise<void> => {\r\n    const element = document.getElementById(elementId);\r\n    if (!element) {\r\n        console.error(`Element with id \"${elementId}\" not found`);\r\n        return;\r\n    }\r\n\r\n    // Dynamically import html2pdf to avoid SSR issues\r\n    const html2pdf = (await import('html2pdf.js')).default;\r\n\r\n    // Clone the element to avoid modifying the original\r\n    const clone = element.cloneNode(true) as HTMLElement;\r\n    clone.style.width = '210mm'; // A4 width\r\n    clone.style.padding = '15px';\r\n    clone.style.background = 'white';\r\n\r\n    // Configure html2pdf options - optimized for speed\r\n    const pdfOptions = {\r\n        margin: [5, 5, 5, 5] as [number, number, number, number],\r\n        filename: `${filename}.pdf`,\r\n        image: { type: 'jpeg' as const, quality: 0.85 },\r\n        html2canvas: {\r\n            scale: 1.5, // Reduced from 2 for faster rendering\r\n            useCORS: true,\r\n            logging: false,\r\n            windowWidth: 800,\r\n        },\r\n        jsPDF: {\r\n            unit: 'mm' as const,\r\n            format: 'a4' as const,\r\n            orientation: 'portrait' as const,\r\n        },\r\n    };\r\n\r\n    try {\r\n        await html2pdf().set(pdfOptions).from(clone).save();\r\n    } catch (error) {\r\n        console.error('Error generating PDF:', error);\r\n        alert('Failed to generate PDF. Please try the Print option instead.');\r\n    }\r\n};\r\n\r\n/**\r\n * Check if device is mobile\r\n */\r\nexport const isMobileDevice = (): boolean => {\r\n    if (typeof window === 'undefined') return false;\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm9 12 2 2 4-4', key: 'dzmm74' }],\n];\n\n/**\n * @component @name CircleCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtOSAxMiAyIDIgNC00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheck = createLucideIcon('circle-check', __iconNode);\n\nexport default CircleCheck;\n","import React from 'react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface ReceiptTemplateProps {\r\n    payment: Types.Payment;\r\n    student: Types.Student;\r\n    cls?: Types.Class;\r\n    settings: Types.Settings;\r\n}\r\n\r\nconst PURPOSE_LABELS: Record<string, string> = {\r\n    tuition: 'Tuition Fees',\r\n    registration: 'Registration Fee',\r\n    books: 'Books & Materials',\r\n    uniform: 'School Uniform',\r\n    transport: 'Transport/Bus Fee',\r\n    exam: 'Examination Fee',\r\n    excursion: 'Excursion/Field Trip',\r\n    other: 'Other Payment',\r\n};\r\n\r\nexport const ReceiptTemplate: React.FC<ReceiptTemplateProps> = ({ payment, student, cls, settings }) => {\r\n    // Use lineItems, or fallback to a single item with the total amount\r\n    const lineItems = payment.lineItems?.length > 0\r\n        ? payment.lineItems\r\n        : [{ purpose: 'payment', amount: payment.amount }];\r\n\r\n    return (\r\n        <div id=\"receipt-print\" style={{ padding: '0 8px' }}>\r\n            {/* Header Section - Compact Professional Layout */}\r\n            <div style={{ textAlign: 'center', marginBottom: '10px', paddingBottom: '8px', borderBottom: '2px solid #1A3A5C' }}>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                    {settings.logo_media && (\r\n                        <img src={settings.logo_media} alt=\"Logo\" style={{ height: '45px', width: '45px', objectFit: 'contain', flexShrink: 0 }} />\r\n                    )}\r\n                    <div style={{ textAlign: 'left', minWidth: 0 }}>\r\n                        <div style={{ fontSize: '15px', fontWeight: 800, color: '#1A3A5C', textTransform: 'uppercase', lineHeight: 1.2, wordWrap: 'break-word' }}>\r\n                            {settings.school_name}\r\n                        </div>\r\n                        <div style={{ color: '#555', fontSize: '9px', lineHeight: 1.4, wordWrap: 'break-word' }}>\r\n                            {settings.school_address}\r\n                        </div>\r\n                        <div style={{ color: '#555', fontSize: '9px', lineHeight: 1.4 }}>\r\n                            {settings.school_phone} | {settings.school_email}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Receipt Title */}\r\n            <div style={{ background: '#1A3A5C', color: 'white', textAlign: 'center', padding: '5px', borderRadius: '4px', marginBottom: '10px' }}>\r\n                <h2 style={{ fontSize: '11px', letterSpacing: '2px', margin: 0 }}>PAYMENT RECEIPT</h2>\r\n            </div>\r\n\r\n            {/* Receipt Details Row */}\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', gap: '6px', marginBottom: '10px', fontSize: '10px' }}>\r\n                <div style={{ flex: '1 1 120px', minWidth: 0 }}>\r\n                    <p style={{ margin: '2px 0' }}><span style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase' }}>Receipt No:</span> <span style={{ fontWeight: 600, color: '#1A3A5C' }}>#{payment.id.substring(0, 8).toUpperCase()}</span></p>\r\n                    <p style={{ margin: '2px 0' }}><span style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase' }}>Date:</span> <span style={{ fontWeight: 600, color: '#333' }}>{payment.date}</span></p>\r\n                </div>\r\n                <div style={{ flex: '1 1 120px', minWidth: 0, textAlign: 'right' }}>\r\n                    <p style={{ margin: '2px 0' }}><span style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase' }}>Session:</span> <span style={{ fontWeight: 600, color: '#333' }}>{payment.session}</span></p>\r\n                    <p style={{ margin: '2px 0' }}><span style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase' }}>Term:</span> <span style={{ fontWeight: 600, color: '#333' }}>{payment.term}</span></p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Student Info */}\r\n            <div style={{ background: '#f5f5f5', padding: '8px', borderRadius: '4px', marginBottom: '10px' }}>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', gap: '6px' }}>\r\n                    <div style={{ flex: '1 1 140px', minWidth: 0 }}>\r\n                        <p style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase', margin: '0 0 2px 0' }}>Received From</p>\r\n                        <p style={{ fontWeight: 600, color: '#333', fontSize: '11px', margin: '0 0 2px 0', wordWrap: 'break-word' }}>{student.names}</p>\r\n                        <p style={{ fontSize: '9px', color: '#666', margin: 0 }}>ID: {student.student_no}</p>\r\n                    </div>\r\n                    <div style={{ flex: '0 0 auto', textAlign: 'right' }}>\r\n                        <p style={{ fontSize: '8px', color: '#888', textTransform: 'uppercase', margin: '0 0 2px 0' }}>Class</p>\r\n                        <p style={{ fontWeight: 600, color: '#333', fontSize: '11px', margin: 0 }}>{cls?.name || 'N/A'}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Payment Table with Individual Line Items */}\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '10px' }}>\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{ background: '#f0f4f8', color: '#1A3A5C', padding: '6px', textAlign: 'left', border: '1px solid #d9e2ec', fontSize: '9px', width: '30px' }}>S/N</th>\r\n                        <th style={{ background: '#f0f4f8', color: '#1A3A5C', padding: '6px', textAlign: 'left', border: '1px solid #d9e2ec', fontSize: '9px' }}>Description</th>\r\n                        <th style={{ background: '#f0f4f8', color: '#1A3A5C', padding: '6px', textAlign: 'right', border: '1px solid #d9e2ec', fontSize: '9px', width: '80px' }}>Amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {lineItems.map((item, index) => (\r\n                        <tr key={index}>\r\n                            <td style={{ padding: '6px', border: '1px solid #ddd', fontSize: '10px', textAlign: 'center' }}>{index + 1}</td>\r\n                            <td style={{ padding: '6px', border: '1px solid #ddd', fontSize: '10px' }}>\r\n                                {PURPOSE_LABELS[item.purpose] || item.purpose}\r\n                            </td>\r\n                            <td style={{ padding: '6px', border: '1px solid #ddd', fontSize: '10px', textAlign: 'right', fontWeight: 600, color: '#1A3A5C' }}>\r\n                                {Utils.formatCurrency(item.amount)}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    {/* Total Row */}\r\n                    <tr style={{ background: '#f0f4f8' }}>\r\n                        <td colSpan={2} style={{ padding: '6px', border: '1px solid #d9e2ec', fontSize: '10px', fontWeight: 700, textAlign: 'right' }}>\r\n                            TOTAL {payment.method && <span style={{ fontWeight: 400, color: '#666', fontSize: '9px' }}>(via {payment.method.toUpperCase()})</span>}\r\n                        </td>\r\n                        <td style={{ padding: '6px', border: '1px solid #d9e2ec', fontSize: '12px', textAlign: 'right', fontWeight: 800, color: '#1A3A5C' }}>\r\n                            {Utils.formatCurrency(payment.amount)}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Remark if exists */}\r\n            {payment.remark && (\r\n                <div style={{ fontSize: '9px', color: '#666', marginBottom: '10px', fontStyle: 'italic' }}>\r\n                    Note: {payment.remark}\r\n                </div>\r\n            )}\r\n\r\n            {/* Footer with Signature */}\r\n            <div style={{ borderTop: '2px solid #1A3A5C', paddingTop: '12px', marginTop: '16px' }}>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', alignItems: 'flex-end', gap: '12px' }}>\r\n                    <div style={{ textAlign: 'center', flex: '0 0 auto' }}>\r\n                        <div style={{ width: '120px', borderBottom: '2px solid #333', height: '30px', marginBottom: '3px', display: 'flex', alignItems: 'flex-end', justifyContent: 'center' }}>\r\n                            {settings.head_of_school_signature && (\r\n                                <img src={settings.head_of_school_signature} alt=\"Signature\" style={{ height: '28px', objectFit: 'contain' }} />\r\n                            )}\r\n                        </div>\r\n                        <p style={{ fontWeight: 600, fontSize: '10px', margin: 0 }}>{settings.head_of_school_name || 'Head of School'}</p>\r\n                        <p style={{ fontSize: '8px', color: '#666', margin: 0 }}>{settings.head_teacher_label || 'Head of School'}</p>\r\n                    </div>\r\n                    <div style={{ textAlign: 'right', flex: '1 1 auto', minWidth: 0 }}>\r\n                        <p style={{ color: '#8FC31F', fontStyle: 'italic', fontSize: '10px', margin: '0 0 3px 0', wordWrap: 'break-word' }}>{settings.school_tagline}</p>\r\n                        <span style={{ fontSize: '8px', color: '#999' }}>© {new Date().getFullYear()} {settings.school_name}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface InvoiceTemplateProps {\r\n    student: Types.Student;\r\n    cls?: Types.Class;\r\n    fees: Types.FeeStructure[];\r\n    payments: Types.Payment[];\r\n    settings: Types.Settings;\r\n    discount?: number;\r\n    discountReason?: string;\r\n}\r\n\r\nexport const InvoiceTemplate: React.FC<InvoiceTemplateProps> = ({\r\n    student,\r\n    cls,\r\n    fees,\r\n    payments,\r\n    settings,\r\n    discount = 0,\r\n    discountReason = ''\r\n}) => {\r\n    const { totalBill, totalPaid } = Utils.getStudentBalance(student, fees, payments, settings.current_session, settings.current_term);\r\n\r\n    const discountedTotal = Math.max(0, totalBill - discount);\r\n    const balance = Math.max(0, discountedTotal - totalPaid);\r\n\r\n    const applicableFees = fees.filter(f =>\r\n        f.session === settings.current_session &&\r\n        f.term === settings.current_term &&\r\n        (f.class_id === null || f.class_id === student.class_id)\r\n    );\r\n\r\n    const studentPayments = payments.filter(p =>\r\n        p.student_id === student.id &&\r\n        p.session === settings.current_session &&\r\n        p.term === settings.current_term\r\n    );\r\n\r\n    const dueDate = new Date();\r\n    dueDate.setDate(dueDate.getDate() + (settings.invoice_due_days || 14));\r\n    const formattedDueDate = dueDate.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });\r\n\r\n    const invoiceNo = `INV-${settings.current_session.replace('/', '')}-${student.student_no.slice(-4)}-${Date.now().toString().slice(-6)}`;\r\n\r\n    return (\r\n        <div id=\"invoice-print\" style={{ fontFamily: \"'Segoe UI', Arial, sans-serif\", fontSize: '12px', color: '#333', background: '#fff', maxWidth: '800px', margin: '0 auto', padding: '0 8px' }}>\r\n            {/* Header */}\r\n            <div style={{ borderBottom: '2px solid #1A3A5C', paddingBottom: '16px', marginBottom: '20px' }}>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', alignItems: 'flex-start', gap: '12px' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', flex: '1 1 280px', minWidth: 0 }}>\r\n                        {settings.logo_media && (\r\n                            <img src={settings.logo_media} alt=\"Logo\" style={{ height: '55px', width: '55px', objectFit: 'contain', flexShrink: 0 }} />\r\n                        )}\r\n                        <div style={{ minWidth: 0 }}>\r\n                            <h1 style={{ fontSize: '16px', fontWeight: 700, color: '#1A3A5C', margin: 0, textTransform: 'uppercase', wordWrap: 'break-word' }}>\r\n                                {settings.school_name}\r\n                            </h1>\r\n                            <p style={{ color: '#666', fontSize: '10px', margin: '3px 0 0 0', wordWrap: 'break-word' }}>{settings.school_address}</p>\r\n                            <p style={{ color: '#666', fontSize: '10px', margin: '2px 0 0 0' }}>Tel: {settings.school_phone} | {settings.school_email}</p>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div style={{ textAlign: 'right', flex: '0 0 auto' }}>\r\n                        <h2 style={{ fontSize: '22px', fontWeight: 700, color: '#1A3A5C', margin: 0 }}>INVOICE</h2>\r\n                        <p style={{ fontSize: '10px', color: '#666', margin: '3px 0 0 0' }}>#{invoiceNo}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bill To & Invoice Details */}\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', gap: '12px', marginBottom: '18px' }}>\r\n                <div style={{ display: 'flex', gap: '10px', flex: '1 1 220px', minWidth: 0 }}>\r\n                    {student.passport_url ? (\r\n                        <img src={student.passport_url} alt={student.names} style={{ width: '48px', height: '48px', borderRadius: '4px', objectFit: 'cover', border: '1px solid #ddd', flexShrink: 0 }} />\r\n                    ) : (\r\n                        <div style={{ width: '48px', height: '48px', borderRadius: '4px', background: '#1A3A5C', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white', fontSize: '16px', fontWeight: 700, flexShrink: 0 }}>\r\n                            {student.names.charAt(0)}\r\n                        </div>\r\n                    )}\r\n                    <div style={{ minWidth: 0 }}>\r\n                        <p style={{ fontSize: '9px', color: '#888', textTransform: 'uppercase', margin: 0 }}>Bill To</p>\r\n                        <p style={{ fontSize: '13px', fontWeight: 700, color: '#1A3A5C', margin: '2px 0', textTransform: 'uppercase', wordWrap: 'break-word' }}>{student.names}</p>\r\n                        <p style={{ fontSize: '10px', color: '#555', margin: '1px 0' }}>ID: {student.student_no} | Class: {cls?.name || 'N/A'}</p>\r\n                        <p style={{ fontSize: '10px', color: '#555', margin: '1px 0', wordWrap: 'break-word' }}>Guardian: {student.parent_name} ({student.parent_phone})</p>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div style={{ flex: '0 0 auto' }}>\r\n                    <table style={{ fontSize: '10px' }}>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td style={{ padding: '2px 8px 2px 0', color: '#666' }}>Invoice Date:</td>\r\n                                <td style={{ padding: '2px 0', fontWeight: 600 }}>{new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' })}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td style={{ padding: '2px 8px 2px 0', color: '#666' }}>Due Date:</td>\r\n                                <td style={{ padding: '2px 0', fontWeight: 600, color: '#DC2626' }}>{formattedDueDate}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td style={{ padding: '2px 8px 2px 0', color: '#666' }}>Session:</td>\r\n                                <td style={{ padding: '2px 0', fontWeight: 600 }}>{settings.current_session}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td style={{ padding: '2px 8px 2px 0', color: '#666' }}>Term:</td>\r\n                                <td style={{ padding: '2px 0', fontWeight: 600 }}>{settings.current_term}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Fee Items Table */}\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '16px' }}>\r\n                <thead>\r\n                    <tr style={{ background: '#1A3A5C' }}>\r\n                        <th style={{ color: 'white', padding: '8px 6px', textAlign: 'center', fontSize: '10px', fontWeight: 600, width: '35px' }}>S/N</th>\r\n                        <th style={{ color: 'white', padding: '8px 6px', textAlign: 'left', fontSize: '10px', fontWeight: 600 }}>Description</th>\r\n                        <th style={{ color: 'white', padding: '8px 6px', textAlign: 'right', fontSize: '10px', fontWeight: 600, width: '90px' }}>Amount (₦)</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {applicableFees.map((fee, index) => (\r\n                        <tr key={fee.id} style={{ borderBottom: '1px solid #e5e7eb' }}>\r\n                            <td style={{ padding: '8px 6px', textAlign: 'center', fontSize: '10px', color: '#555' }}>{index + 1}</td>\r\n                            <td style={{ padding: '8px 6px', fontSize: '11px', color: '#333' }}>{fee.name}</td>\r\n                            <td style={{ padding: '8px 6px', textAlign: 'right', fontSize: '11px', fontWeight: 600, fontFamily: 'monospace' }}>\r\n                                {Utils.formatCurrency(fee.amount).replace('₦', '')}\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                    {applicableFees.length === 0 && (\r\n                        <tr>\r\n                            <td colSpan={3} style={{ padding: '16px', textAlign: 'center', color: '#888', fontStyle: 'italic', fontSize: '11px' }}>\r\n                                No fees available for this term\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Totals */}\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '18px' }}>\r\n                <table style={{ width: '100%', maxWidth: '240px', fontSize: '11px' }}>\r\n                    <tbody>\r\n                        <tr style={{ borderBottom: '1px solid #e5e7eb' }}>\r\n                            <td style={{ padding: '6px 0', color: '#666' }}>Subtotal</td>\r\n                            <td style={{ padding: '6px 0', textAlign: 'right', fontWeight: 600 }}>{Utils.formatCurrency(totalBill)}</td>\r\n                        </tr>\r\n                        {discount > 0 && (\r\n                            <tr style={{ borderBottom: '1px solid #e5e7eb' }}>\r\n                                <td style={{ padding: '6px 0', color: '#059669', fontSize: '10px' }}>\r\n                                    Discount {discountReason && <span>({discountReason})</span>}\r\n                                </td>\r\n                                <td style={{ padding: '6px 0', textAlign: 'right', fontWeight: 600, color: '#059669' }}>-{Utils.formatCurrency(discount)}</td>\r\n                            </tr>\r\n                        )}\r\n                        {studentPayments.length > 0 && (\r\n                            <tr style={{ borderBottom: '1px solid #e5e7eb' }}>\r\n                                <td style={{ padding: '6px 0', color: '#059669' }}>Amount Paid</td>\r\n                                <td style={{ padding: '6px 0', textAlign: 'right', fontWeight: 600, color: '#059669' }}>-{Utils.formatCurrency(totalPaid)}</td>\r\n                            </tr>\r\n                        )}\r\n                        <tr style={{ background: '#1A3A5C' }}>\r\n                            <td style={{ padding: '8px 6px', color: 'white', fontWeight: 600 }}>Balance Due</td>\r\n                            <td style={{ padding: '8px 6px', textAlign: 'right', color: 'white', fontSize: '13px', fontWeight: 700, fontFamily: 'monospace' }}>\r\n                                {Utils.formatCurrency(balance)}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Payment History */}\r\n            {studentPayments.length > 0 && (\r\n                <div style={{ marginBottom: '18px' }}>\r\n                    <h3 style={{ fontSize: '11px', fontWeight: 700, color: '#1A3A5C', marginBottom: '6px', borderBottom: '1px solid #ddd', paddingBottom: '4px' }}>\r\n                        Payment History\r\n                    </h3>\r\n                    <table style={{ width: '100%', fontSize: '10px' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f3f4f6' }}>\r\n                                <th style={{ padding: '6px', textAlign: 'left', fontWeight: 600, color: '#555' }}>Date</th>\r\n                                <th style={{ padding: '6px', textAlign: 'left', fontWeight: 600, color: '#555' }}>Method</th>\r\n                                <th style={{ padding: '6px', textAlign: 'right', fontWeight: 600, color: '#555' }}>Amount</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {studentPayments.map((p) => (\r\n                                <tr key={p.id} style={{ borderBottom: '1px solid #e5e7eb' }}>\r\n                                    <td style={{ padding: '6px', color: '#333' }}>{p.date}</td>\r\n                                    <td style={{ padding: '6px', color: '#333', textTransform: 'capitalize' }}>{p.method}</td>\r\n                                    <td style={{ padding: '6px', textAlign: 'right', fontWeight: 600, color: '#059669' }}>\r\n                                        {Utils.formatCurrency(p.amount)}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Bank Details */}\r\n            {settings.show_bank_details && balance > 0 && (\r\n                <div style={{ background: '#fef3c7', border: '1px solid #fbbf24', borderRadius: '4px', padding: '10px', marginBottom: '18px' }}>\r\n                    <h3 style={{ fontSize: '10px', fontWeight: 700, color: '#92400E', margin: '0 0 8px 0' }}>Bank Payment Details</h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))', gap: '6px', fontSize: '10px' }}>\r\n                        <div>\r\n                            <span style={{ color: '#78350F', fontSize: '9px' }}>Bank: </span>\r\n                            <strong style={{ color: '#92400E' }}>{settings.bank_name}</strong>\r\n                        </div>\r\n                        <div>\r\n                            <span style={{ color: '#78350F', fontSize: '9px' }}>Account No: </span>\r\n                            <strong style={{ color: '#92400E', fontFamily: 'monospace' }}>{settings.bank_account_number}</strong>\r\n                        </div>\r\n                        <div>\r\n                            <span style={{ color: '#78350F', fontSize: '9px' }}>Account Name: </span>\r\n                            <strong style={{ color: '#92400E' }}>{settings.bank_account_name}</strong>\r\n                        </div>\r\n                    </div>\r\n                    <p style={{ color: '#92400E', fontSize: '9px', margin: '6px 0 0 0' }}>\r\n                        Use student ID <strong>{student.student_no}</strong> as payment reference\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Notes */}\r\n            {settings.invoice_notes && (\r\n                <div style={{ background: '#f9fafb', borderLeft: '3px solid #1A3A5C', padding: '8px 12px', marginBottom: '18px' }}>\r\n                    <p style={{ fontSize: '9px', fontWeight: 700, color: '#1A3A5C', margin: '0 0 3px 0' }}>Note</p>\r\n                    <p style={{ fontSize: '10px', color: '#555', lineHeight: 1.4, margin: 0 }}>{settings.invoice_notes}</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Footer with Signatures */}\r\n            <div style={{ borderTop: '1px solid #ddd', paddingTop: '16px', marginTop: '16px' }}>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between', alignItems: 'flex-end', gap: '12px' }}>\r\n                    <div style={{ textAlign: 'center', flex: '0 0 auto' }}>\r\n                        <div style={{ width: '100px', borderBottom: '1px solid #333', height: '32px', marginBottom: '3px' }}></div>\r\n                        <p style={{ fontSize: '9px', fontWeight: 600, color: '#333', margin: 0 }}>Bursar&apos;s Signature</p>\r\n                    </div>\r\n                    \r\n                    <div style={{ textAlign: 'center', flex: '0 0 auto' }}>\r\n                        <p style={{ margin: '0 0 6px 0' }}>\r\n                            {balance > 0 ? (\r\n                                <span style={{ background: '#fef2f2', color: '#DC2626', padding: '4px 10px', borderRadius: '4px', fontSize: '10px', fontWeight: 700 }}>\r\n                                    PAYMENT DUE\r\n                                </span>\r\n                            ) : (\r\n                                <span style={{ background: '#ecfdf5', color: '#059669', padding: '4px 10px', borderRadius: '4px', fontSize: '10px', fontWeight: 700 }}>\r\n                                    PAID IN FULL\r\n                                </span>\r\n                            )}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div style={{ textAlign: 'center', flex: '0 0 auto' }}>\r\n                        <div style={{ width: '100px', borderBottom: '1px solid #333', height: '32px', marginBottom: '3px' }}></div>\r\n                        <p style={{ fontSize: '9px', fontWeight: 600, color: '#333', margin: 0 }}>{settings.head_of_school_name || 'Head of School'}</p>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div style={{ textAlign: 'center', marginTop: '14px', paddingTop: '8px', borderTop: '1px solid #eee' }}>\r\n                    <p style={{ fontSize: '10px', color: '#888', fontStyle: 'italic', margin: 0 }}>&quot;{settings.school_tagline}&quot;</p>\r\n                    <p style={{ fontSize: '8px', color: '#aaa', margin: '4px 0 0 0' }}>\r\n                        Generated: {new Date().toLocaleString()} | © {new Date().getFullYear()} {settings.school_name}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Plus, Trash2 } from 'lucide-react';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\n\r\ninterface FeeStructureManagementProps {\r\n    fees: Types.FeeStructure[];\r\n    classes: Types.Class[];\r\n    settings: Types.Settings;\r\n    onAddFeeHead: () => void;\r\n    onDeleteFee: (id: string) => void;\r\n}\r\n\r\nexport const FeeStructureManagement: React.FC<FeeStructureManagementProps> = ({\r\n    fees, classes, settings, onAddFeeHead, onDeleteFee\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex justify-end\"><Button onClick={onAddFeeHead}><Plus className=\"h-4 w-4 mr-2\" /> Add Fee Head</Button></div>\r\n            <Card title=\"Current Session Fee Structure\">\r\n                <table className=\"w-full text-sm text-left\">\r\n                    <thead className=\"bg-gray-50 text-gray-700\"><tr><th className=\"px-4 py-3\">Fee Name</th><th className=\"px-4 py-3\">Class Scope</th><th className=\"px-4 py-3 text-right\">Amount</th><th className=\"px-4 py-3\"></th></tr></thead>\r\n                    <tbody className=\"divide-y divide-gray-100\">\r\n                        {fees.filter(f => f.session === settings.current_session && f.term === settings.current_term).map(f => {\r\n                            const clsName = f.class_id ? classes.find(c => c.id === f.class_id)?.name : 'All Classes';\r\n                            return (\r\n                                <tr key={f.id}>\r\n                                    <td className=\"px-4 py-3 font-medium\">{f.name}</td>\r\n                                    <td className=\"px-4 py-3\"><span className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs\">{clsName}</span></td>\r\n                                    <td className=\"px-4 py-3 text-right font-mono\">{Utils.formatCurrency(f.amount)}</td>\r\n                                    <td className=\"px-4 py-3 text-right\"><button onClick={() => onDeleteFee(f.id)} className=\"text-gray-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button></td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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","ignoreList":[9]}