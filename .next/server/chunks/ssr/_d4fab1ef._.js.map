{"version":3,"sources":["../../../../components/ui/button.tsx","../../../../components/ui/select.tsx","../../../../node_modules/lucide-react/src/icons/printer.ts","../../../../app/%28dashboard%29/broadsheet/page.tsx","../../../../components/features/BroadsheetView.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'danger' | 'ghost';\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({ className, variant = 'primary', size = 'md', ...props }) => {\r\n    const base = \"inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none\";\r\n    const variants = {\r\n        primary: \"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm\",\r\n        secondary: \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500\",\r\n        danger: \"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm\",\r\n        ghost: \"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500\"\r\n    };\r\n    const sizes = {\r\n        sm: \"h-8 px-3 text-sm\",\r\n        md: \"h-10 px-4 py-2\"\r\n    };\r\n    return <button className={`${base} ${variants[variant]} ${sizes[size]} ${className || ''}`} {...props} />;\r\n};\r\n","import React from 'react';\r\n\r\ninterface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {\r\n    label?: string;\r\n}\r\n\r\nexport const Select: React.FC<SelectProps> = ({ label, className, children, ...props }) => (\r\n    <div className=\"flex flex-col gap-1.5\">\r\n        {label && <label className=\"text-sm font-medium text-gray-700\">{label}</label>}\r\n        <select className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`} {...props}>\r\n            {children}\r\n        </select>\r\n    </div>\r\n);\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2',\n      key: '143wyd',\n    },\n  ],\n  ['path', { d: 'M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6', key: '1itne7' }],\n  ['rect', { x: '6', y: '14', width: '12', height: '8', rx: '1', key: '1ue0tg' }],\n];\n\n/**\n * @component @name Printer\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAxOEg0YTIgMiAwIDAgMS0yLTJ2LTVhMiAyIDAgMCAxIDItMmgxNmEyIDIgMCAwIDEgMiAydjVhMiAyIDAgMCAxLTIgMmgtMiIgLz4KICA8cGF0aCBkPSJNNiA5VjNhMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxdjYiIC8+CiAgPHJlY3QgeD0iNiIgeT0iMTQiIHdpZHRoPSIxMiIgaGVpZ2h0PSI4IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/printer\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Printer = createLucideIcon('printer', __iconNode);\n\nexport default Printer;\n","'use client';\r\nimport { useSchoolStore } from '@/lib/store';\r\nimport { BroadsheetView } from '@/components/features/BroadsheetView';\r\n\r\nexport default function BroadsheetPage() {\r\n    const { students, classes, scores, settings } = useSchoolStore();\r\n    return <BroadsheetView students={students} classes={classes} scores={scores} settings={settings} />;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Printer, LayoutList } from 'lucide-react';\r\nimport * as Types from '@/lib/types';\r\nimport * as Utils from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Select } from '@/components/ui/select';\r\n\r\ninterface BroadsheetViewProps {\r\n    students: Types.Student[];\r\n    classes: Types.Class[];\r\n    scores: Types.Score[];\r\n    settings: Types.Settings;\r\n}\r\n\r\nexport const BroadsheetView: React.FC<BroadsheetViewProps> = ({ students, classes, scores, settings }) => {\r\n    const [selectedClass, setSelectedClass] = useState(classes[0]?.id || '');\r\n    const currentClass = classes.find(c => c.id === selectedClass);\r\n    const activeStudents = students.filter(s => s.class_id === selectedClass);\r\n    const subjects = Utils.getSubjectsForClass(currentClass);\r\n\r\n    const sheetData = activeStudents.map(s => {\r\n        const studentScore = scores.find(sc => sc.student_id === s.id && sc.session === settings.current_session && sc.term === settings.current_term);\r\n        const subjectScores: Record<string, number> = {};\r\n        let total = 0;\r\n        subjects.forEach(subj => {\r\n            const row = studentScore?.rows.find(r => r.subject === subj);\r\n            const val = row ? row.total : 0;\r\n            subjectScores[subj] = val;\r\n            total += val;\r\n        });\r\n        return { ...s, scores: subjectScores, total, average: subjects.length > 0 ? total / subjects.length : 0 };\r\n    }).sort((a, b) => b.average - a.average);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center no-print\">\r\n                <div><h1 className=\"text-2xl font-bold text-gray-900\">Master Broadsheet</h1><p className=\"text-gray-500\">Class-wide results analysis</p></div>\r\n                <div className=\"flex gap-4\"><Select value={selectedClass} onChange={e => setSelectedClass(e.target.value)}>{classes.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</Select><Button onClick={() => window.print()}><Printer className=\"h-4 w-4 mr-2\" /> Print Sheet</Button></div>\r\n            </div>\r\n            <div className=\"overflow-x-auto bg-white border rounded-lg shadow-sm print:shadow-none print:border-none\">\r\n                <div className=\"p-4 border-b bg-gray-50 text-center print:block hidden\">\r\n                    <h2 className=\"text-xl font-bold uppercase\">{settings.school_name}</h2>\r\n                    <p>Broadsheet Report • {currentClass?.name} • {settings.current_session} {settings.current_term}</p>\r\n                </div>\r\n                <table className=\"w-full text-xs text-left border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"bg-gray-100 text-gray-700\">\r\n                            <th className=\"px-2 py-3 border sticky left-0 bg-gray-100 w-48\">Student Name</th>\r\n                            {subjects.map(subj => <th key={subj} className=\"px-2 py-3 border text-center w-16 rotate-45 h-32 align-bottom pb-2\">{subj.substring(0, 15)}</th>)}\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Total</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Avg</th>\r\n                            <th className=\"px-2 py-3 border text-center font-bold bg-gray-200\">Pos</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {sheetData.map((s, idx) => (\r\n                            <tr key={s.id} className=\"hover:bg-gray-50\">\r\n                                <td className=\"px-2 py-2 border font-medium sticky left-0 bg-white\">{s.names}</td>\r\n                                {subjects.map(subj => <td key={subj} className={`px-2 py-2 border text-center ${s.scores[subj] < 40 ? 'text-red-600 font-bold' : ''}`}>{s.scores[subj] || '-'}</td>)}\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.total}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{s.average.toFixed(1)}</td>\r\n                                <td className=\"px-2 py-2 border text-center font-bold bg-gray-50\">{Utils.ordinalSuffix(idx + 1)}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"wEAO6C,CAAC,WAAE,CAAS,SAAE,EAAU,SAAS,MAAE,EAAO,IAAI,CAAE,GAAG,EAAO,GAY5F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAW,GAAG,KAAK,CAAC,gLAVlB,AAUoB,CATjC,QAAS,4EACT,UAAW,sFACX,OAAQ,sEACR,MAAO,oEACX,CAK6C,CAAC,EAAQ,CAAC,CAAC,EAAE,AAJ5C,CACV,GAAI,mBACJ,GAAI,gBACR,CAC+D,CAAC,EAAK,CAAC,CAAC,EAAE,GAAa,IAAI,CAAG,GAAG,CAAK,8DCb5D,CAAC,OAAE,CAAK,WAAE,CAAS,UAAE,CAAQ,CAAE,GAAG,EAAO,GAClF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACV,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,6CAAqC,IAChE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAW,CAAC,mLAAmL,EAAE,GAAa,GAAA,CAAI,CAAG,GAAG,CAAK,UAChO,iCCgBb,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,CAAM,CAAA,EAAU,CAAA,CAAV,AAAU,CAAV,AAAU,CAAV,AAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAvBG,CAClC,AAsB0C,CArBxC,AAqBwC,CArBxC,AAqBwC,CArBxC,AAqBwC,CAAA,AArBxC,CAAA,AAqBwC,CArBxC,AAqBwC,CArBxC,AAqBwC,CApBxC,AAoBwC,CAnBtC,AAmBsC,CAnBtC,AAmBgD,CAnB7C,AAmB6C,CAnB7C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACH,GAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAET,CACA,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAA2C,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACxE,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,CAAA,CAAA,AAAG,CAAA,CAAA,EAAK,CAAA,CAAA,AAAG,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,AAAI,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAChF,wECZA,EAAA,EAAA,CAAA,CAAA,OCDA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OASO,IAAM,EAAgD,CAAC,UAAE,CAAQ,SAAE,CAAO,QAAE,CAAM,CAAE,UAAQ,CAAE,IACjG,GAAM,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAO,CAAC,EAAE,EAAE,IAAM,IAC/D,EAAe,EAAQ,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,GAC1C,EAAiB,EAAS,MAAM,CAAC,GAAK,EAAE,QAAQ,GAAK,GACrD,EAAW,EAAA,mBAAyB,CAAC,GAErC,EAAY,EAAe,GAAG,CAAC,IACjC,IAAM,EAAe,EAAO,IAAI,CAAC,GAAM,EAAG,UAAU,GAAK,EAAE,EAAE,EAAI,EAAG,OAAO,GAAK,EAAS,eAAe,EAAI,EAAG,IAAI,GAAK,EAAS,YAAY,EACvI,EAAwC,CAAC,EAC3C,EAAQ,EAOZ,OANA,EAAS,OAAO,CAAC,IACb,IAAM,EAAM,GAAc,KAAK,KAAK,GAAK,EAAE,OAAO,GAAK,GACjD,EAAM,EAAM,EAAI,KAAK,CAAG,EAC9B,CAAa,CAAC,EAAK,CAAG,EACtB,GAAS,CACb,GACO,CAAE,GAAG,CAAC,CAAE,OAAQ,QAAe,EAAO,QAAS,EAAS,MAAM,CAAG,EAAI,EAAQ,EAAS,MAAM,CAAG,CAAE,CAC5G,GAAG,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,OAAO,CAAG,EAAE,OAAO,EAEvC,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CAAmC,sBAAsB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,mCACzG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBAAa,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAe,SAAU,GAAK,EAAiB,EAAE,MAAM,CAAC,KAAK,WAAI,EAAQ,GAAG,CAAC,GAAK,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,EAAE,EAAE,UAAG,EAAE,IAAI,EAA1B,EAAE,EAAE,KAA2C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,OAAO,KAAK,aAAI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,iBAAiB,wBAExQ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qGACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA+B,EAAS,WAAW,GACjE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,uBAAqB,GAAc,KAAK,MAAI,EAAS,eAAe,CAAC,IAAE,EAAS,YAAY,OAEnG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,sCACV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2DAAkD,iBAC/D,EAAS,GAAG,CAAC,GAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAc,UAAU,8EAAsE,EAAK,SAAS,CAAC,EAAG,KAAxG,IAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DAAqD,UACnE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DAAqD,QACnE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DAAqD,aAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACI,EAAU,GAAG,CAAC,CAAC,EAAG,IACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAc,UAAU,6BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAuD,EAAE,KAAK,GAC3E,EAAS,GAAG,CAAC,GAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAc,UAAW,CAAC,6BAA6B,EAAE,EAAE,MAAM,CAAC,EAAK,CAAG,GAAK,yBAA2B,GAAA,CAAI,UAAG,EAAE,MAAM,CAAC,EAAK,EAAI,KAA3H,IAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DAAqD,EAAE,KAAK,GAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DAAqD,EAAE,OAAO,CAAC,OAAO,CAAC,KACrF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DAAqD,EAAA,aAAmB,CAAC,EAAM,OALxF,EAAE,EAAE,aAazC,EDjEe,SAAS,IACpB,GAAM,UAAE,CAAQ,SAAE,CAAO,QAAE,CAAM,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IAC9D,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAe,SAAU,EAAU,QAAS,EAAS,OAAQ,EAAQ,SAAU,GAC3F","ignoreList":[2]}