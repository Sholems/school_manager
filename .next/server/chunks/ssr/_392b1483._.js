module.exports=[5522,a=>{"use strict";var b=a.i(87924);a.s(["Input",0,({label:a,className:c,...d})=>(0,b.jsxs)("div",{className:"flex flex-col gap-1.5",children:[a&&(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,b.jsx)("input",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${c||""}`,...d})]})])},87682,a=>{"use strict";var b=a.i(87924);a.s(["Select",0,({label:a,className:c,children:d,...e})=>(0,b.jsxs)("div",{className:"flex flex-col gap-1.5",children:[a&&(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,b.jsx)("select",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${c||""}`,...e,children:d})]})])},40695,a=>{"use strict";var b=a.i(87924);a.s(["Button",0,({className:a,variant:c="primary",size:d="md",...e})=>(0,b.jsx)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${{primary:"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500"}[c]} ${{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2"}[d]} ${a||""}`,...e})])},3130,a=>{"use strict";var b=a.i(87924);a.s(["Card",0,({children:a,title:c,className:d,action:e})=>(0,b.jsxs)("div",{className:`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${d||""}`,children:[(c||e)&&(0,b.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[c&&(0,b.jsx)("h3",{className:"font-semibold leading-none tracking-tight",children:c}),e&&(0,b.jsx)("div",{children:e})]})}),(0,b.jsx)("div",{className:"p-6 pt-2",children:a})]})])},14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},5427,a=>{"use strict";var b=a.i(87924),c=a.i(68515),d=a.i(72131),e=a.i(14548),f=a.i(97895),g=a.i(40695),h=a.i(3130),i=a.i(5522),j=a.i(87682),k=a.i(49679);let l=({students:a,classes:c,attendance:l,settings:m,onSave:n})=>{let[o,p]=(0,d.useState)(c[0]?.id||""),[q,r]=(0,d.useState)(f.getTodayString()),{addToast:s}=(0,k.useToast)(),t=a.filter(a=>a.class_id===o),u=l.find(a=>a.class_id===o&&a.date===q&&a.session===m.current_session&&a.term===m.current_term),[v,w]=(0,d.useState)({});(0,d.useEffect)(()=>{let a={};t.forEach(b=>{let c=u?.records.find(a=>a.student_id===b.id);a[b.id]=c?c.status:"present"}),w(a)},[o,q,u,t.length]);let x=a=>{let b={...v};t.forEach(c=>b[c.id]=a),w(b)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Register"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Daily roll call management"})]}),(0,b.jsxs)(g.Button,{onClick:()=>{let a=t.map(a=>({student_id:a.id,status:v[a.id]||"present"})),b={id:u?.id||f.generateId(),date:q,class_id:o,session:m.current_session,term:m.current_term,records:a,created_at:u?.created_at||Date.now(),updated_at:Date.now()};n([...l.filter(a=>a.id!==b.id),b]),s("Attendance saved successfully","success")},children:[(0,b.jsx)(e.Save,{className:"h-4 w-4 mr-2"})," Save Register"]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-6 items-end border-b pb-4",children:[(0,b.jsx)("div",{className:"w-64",children:(0,b.jsx)(j.Select,{label:"Class",value:o,onChange:a=>p(a.target.value),children:c.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})}),(0,b.jsx)("div",{className:"w-64",children:(0,b.jsx)(i.Input,{label:"Date",type:"date",value:q,onChange:a=>r(a.target.value)})}),(0,b.jsxs)("div",{className:"flex-1 flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"secondary",onClick:()=>x("present"),children:"Mark All Present"}),(0,b.jsx)(g.Button,{size:"sm",variant:"secondary",onClick:()=>x("absent"),children:"Mark All Absent"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-gray-900",children:a.names}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.student_no})]}),(0,b.jsx)("div",{className:"flex bg-gray-100 rounded-md p-1",children:["present","late","absent"].map(c=>(0,b.jsx)("button",{onClick:()=>w(b=>({...b,[a.id]:c})),className:`px-3 py-1 text-xs font-medium rounded capitalize transition-colors ${v[a.id]===c?"present"===c?"bg-green-500 text-white":"late"===c?"bg-yellow-500 text-white":"bg-red-500 text-white":"text-gray-500 hover:bg-gray-200"}`,children:c},c))})]},a.id)),0===t.length&&(0,b.jsx)("p",{className:"text-gray-500 italic col-span-3 text-center py-8",children:"No students in this class."})]})]})]})};function m(){let{students:a,classes:d,attendance:e,settings:f,setAttendance:g}=(0,c.useSchoolStore)();return(0,b.jsx)(l,{students:a,classes:d,attendance:e,settings:f,onSave:g})}a.s(["default",()=>m],5427)}];

//# sourceMappingURL=_392b1483._.js.map