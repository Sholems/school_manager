(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62870,e=>{"use strict";var s=e.i(43476);e.s(["Select",0,({label:e,className:t,children:r,...a})=>(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[e&&(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e}),(0,s.jsx)("select",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,...a,children:r})]})])},67881,e=>{"use strict";var s=e.i(43476);e.s(["Button",0,({className:e,variant:t="primary",size:r="md",...a})=>(0,s.jsx)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${{primary:"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500"}[t]} ${{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2"}[r]} ${e||""}`,...a})])},70065,e=>{"use strict";var s=e.i(43476);e.s(["Card",0,({children:e,title:t,className:r,action:a})=>(0,s.jsxs)("div",{className:`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${r||""}`,children:[(t||a)&&(0,s.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,s.jsx)("h3",{className:"font-semibold leading-none tracking-tight",children:t}),a&&(0,s.jsx)("div",{children:a})]})}),(0,s.jsx)("div",{className:"p-6 pt-2",children:e})]})])},2957,e=>{"use strict";var s=e.i(43476),t=e.i(37727);e.s(["Modal",0,({isOpen:e,onClose:r,title:a,children:l,size:n="md"})=>e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200 overflow-y-auto backdrop-blur-sm",children:(0,s.jsxs)("div",{className:`relative w-full ${{sm:"max-w-md",md:"max-w-lg sm:max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"}[n]} rounded-xl bg-white shadow-2xl my-8 flex flex-col max-h-[90vh]`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b p-4 bg-gray-50 rounded-t-xl shrink-0",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:a}),(0,s.jsx)("button",{onClick:r,className:"rounded-full p-1 hover:bg-gray-200 transition-colors",children:(0,s.jsx)(t.X,{className:"h-5 w-5 text-gray-500"})})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto",children:l})]})}):null])},84614,e=>{"use strict";let s=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],84614)},55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},56754,e=>{"use strict";var s=e.i(43476),t=e.i(4421),r=e.i(71645),a=e.i(10980),l=e.i(84614);let n=(0,e.i(75254).default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var i=e.i(55436),d=e.i(47163),c=e.i(67881),o=e.i(70065),u=e.i(62870),x=e.i(2957),m=e.i(79050);let h=({classes:e,teachers:t,onUpdate:h})=>{let[b,g]=(0,r.useState)(null),[p,f]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),{addToast:v}=(0,m.useToast)(),N=Array.from(new Set([...d.PRESET_PRESCHOOL_SUBJECTS,...d.PRESET_PRIMARY_SUBJECTS,"French","Music","Phonics","Handwriting","Diction","Home Economics","Agricultural Science","History","Geography","Literature","Coding/Robotics"])).sort(),w=e=>{if(!b)return;let s=b.subjects||[];s.includes(e)?g({...b,subjects:s.filter(s=>s!==e)}):g({...b,subjects:[...s,e]})},C=e=>{if(!b)return;let s="nursery"===e?d.PRESET_PRESCHOOL_SUBJECTS:d.PRESET_PRIMARY_SUBJECTS;g({...b,subjects:[...s]})},S=()=>{if(!b||!j.trim())return;let e=j.trim(),s=b.subjects||[];s.includes(e)||(g({...b,subjects:[...s,e]}),v(`Added ${e}`,"success")),y("")},k=b?.subjects||[],E=N.filter(e=>e.toLowerCase().includes(p.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Class & Subject Configuration"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Assign teachers and manage subjects for each class."})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>{let r=t.find(s=>s.id===e.class_teacher_id),n=(e.subjects??d.getSubjectsForClass(e)).length;return(0,s.jsx)(o.Card,{className:"hover:border-brand-400 transition-all cursor-pointer group",children:(0,s.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-xl text-gray-800",children:e.name}),(0,s.jsx)("div",{className:"bg-gray-100 p-2 rounded-full group-hover:bg-brand-50 transition-colors",children:(0,s.jsx)(a.BookOpen,{className:"h-5 w-5 text-gray-500 group-hover:text-brand-600"})})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-4 flex items-center gap-2",children:[(0,s.jsx)(l.User,{className:"h-4 w-4 text-gray-400"}),r?(0,s.jsx)("span",{className:"font-medium text-brand-700",children:r.name}):(0,s.jsx)("span",{className:"italic text-gray-400",children:"No Class Teacher"})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4 flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-xs font-medium bg-gray-100 px-2 py-1 rounded text-gray-600",children:[n," Subjects"]}),(0,s.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:()=>{let s;return s=e.subjects??d.getSubjectsForClass(e),void g({...e,subjects:s})},children:"Configure"})]})]})},e.id)})}),(0,s.jsx)(x.Modal,{isOpen:!!b,onClose:()=>g(null),title:`Configure ${b?.name}`,size:"lg",children:b&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b&&(h({...b,updated_at:Date.now()}),v("Class configuration updated","success"),g(null))},className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:(0,s.jsxs)(u.Select,{label:"Class Teacher",value:b.class_teacher_id||"",onChange:e=>g({...b,class_teacher_id:e.target.value||null}),children:[(0,s.jsx)("option",{value:"",children:"-- Select Teacher --"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(n,{className:"h-4 w-4"})," Assigned Subjects"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>C("nursery"),className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200 font-medium",children:"Reset to Nursery"}),(0,s.jsx)("button",{type:"button",onClick:()=>C("primary"),className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 font-medium",children:"Reset to Primary"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("input",{className:"flex-1 h-9 rounded-md border border-gray-300 px-3 text-sm focus:ring-brand-500 focus:outline-none",placeholder:"Add custom subject...",value:j,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S())}}),(0,s.jsx)(c.Button,{type:"button",size:"sm",onClick:S,children:"Add"})]}),(0,s.jsxs)("div",{className:"mb-2 relative",children:[(0,s.jsx)(i.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{className:"w-full h-9 pl-9 rounded-md border border-gray-300 text-sm focus:ring-brand-500 focus:outline-none",placeholder:"Filter subjects...",value:p,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-[300px] overflow-y-auto border rounded-md p-4 bg-gray-50/50",children:[E.map(e=>{let t=k.includes(e);return(0,s.jsxs)("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm ${t?"bg-brand-50 text-brand-900 font-medium border border-brand-200":"hover:bg-gray-100 text-gray-600 border border-transparent"}`,children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded text-brand-600 focus:ring-brand-500 h-4 w-4",checked:t,onChange:()=>w(e)}),e]},e)}),k.filter(e=>!N.includes(e)&&!e.toLowerCase().includes(p.toLowerCase())).map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors text-sm bg-brand-50 text-brand-900 font-medium border border-brand-200",children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded text-brand-600 focus:ring-brand-500 h-4 w-4",checked:!0,onChange:()=>w(e)}),e," (Custom)"]},e))]}),(0,s.jsxs)("div",{className:"mt-2 text-right text-xs text-gray-500",children:[k.length," subjects selected"]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)(c.Button,{type:"button",variant:"secondary",onClick:()=>g(null),children:"Cancel"}),(0,s.jsx)(c.Button,{type:"submit",children:"Save Changes"})]})]})})]})};function b(){let{classes:e,teachers:r,updateClass:a}=(0,t.useSchoolStore)();return(0,s.jsx)(h,{classes:e,teachers:r,onUpdate:a})}e.s(["default",()=>b],56754)}]);