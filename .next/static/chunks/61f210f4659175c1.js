(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var s=e.i(43476);e.s(["Input",0,({label:e,className:t,...a})=>(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[e&&(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e}),(0,s.jsx)("input",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,...a})]})])},62870,e=>{"use strict";var s=e.i(43476);e.s(["Select",0,({label:e,className:t,children:a,...r})=>(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[e&&(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e}),(0,s.jsx)("select",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 disabled:cursor-not-allowed disabled:opacity-50 ${t||""}`,...r,children:a})]})])},67881,e=>{"use strict";var s=e.i(43476);e.s(["Button",0,({className:e,variant:t="primary",size:a="md",...r})=>(0,s.jsx)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${{primary:"bg-brand-600 text-white hover:bg-brand-700 focus:ring-brand-500 shadow-sm",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-brand-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500"}[t]} ${{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2"}[a]} ${e||""}`,...r})])},70065,e=>{"use strict";var s=e.i(43476);e.s(["Card",0,({children:e,title:t,className:a,action:r})=>(0,s.jsxs)("div",{className:`rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm transition-all hover:shadow-md ${a||""}`,children:[(t||r)&&(0,s.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,s.jsx)("h3",{className:"font-semibold leading-none tracking-tight",children:t}),r&&(0,s.jsx)("div",{children:r})]})}),(0,s.jsx)("div",{className:"p-6 pt-2",children:e})]})])},56909,e=>{"use strict";let s=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],56909)},73307,e=>{"use strict";var s=e.i(43476),t=e.i(4421),a=e.i(71645),r=e.i(56909),i=e.i(47163),d=e.i(67881),l=e.i(70065),n=e.i(23750),c=e.i(62870),o=e.i(79050);let x=({students:e,classes:t,attendance:x,settings:u,onSave:g})=>{let[h,m]=(0,a.useState)(t[0]?.id||""),[b,f]=(0,a.useState)(i.getTodayString()),{addToast:p}=(0,o.useToast)(),y=e.filter(e=>e.class_id===h),v=x.find(e=>e.class_id===h&&e.date===b&&e.session===u.current_session&&e.term===u.current_term),[j,N]=(0,a.useState)({});(0,a.useEffect)(()=>{let e={};y.forEach(s=>{let t=v?.records.find(e=>e.student_id===s.id);e[s.id]=t?t.status:"present"}),N(e)},[h,b,v,y.length]);let w=e=>{let s={...j};y.forEach(t=>s[t.id]=e),N(s)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Register"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Daily roll call management"})]}),(0,s.jsxs)(d.Button,{onClick:()=>{let e=y.map(e=>({student_id:e.id,status:j[e.id]||"present"})),s={id:v?.id||i.generateId(),date:b,class_id:h,session:u.current_session,term:u.current_term,records:e,created_at:v?.created_at||Date.now(),updated_at:Date.now()};g([...x.filter(e=>e.id!==s.id),s]),p("Attendance saved successfully","success")},children:[(0,s.jsx)(r.Save,{className:"h-4 w-4 mr-2"})," Save Register"]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6 items-end border-b pb-4",children:[(0,s.jsx)("div",{className:"w-64",children:(0,s.jsx)(c.Select,{label:"Class",value:h,onChange:e=>m(e.target.value),children:t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})}),(0,s.jsx)("div",{className:"w-64",children:(0,s.jsx)(n.Input,{label:"Date",type:"date",value:b,onChange:e=>f(e.target.value)})}),(0,s.jsxs)("div",{className:"flex-1 flex justify-end gap-2",children:[(0,s.jsx)(d.Button,{size:"sm",variant:"secondary",onClick:()=>w("present"),children:"Mark All Present"}),(0,s.jsx)(d.Button,{size:"sm",variant:"secondary",onClick:()=>w("absent"),children:"Mark All Absent"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-gray-900",children:e.names}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.student_no})]}),(0,s.jsx)("div",{className:"flex bg-gray-100 rounded-md p-1",children:["present","late","absent"].map(t=>(0,s.jsx)("button",{onClick:()=>N(s=>({...s,[e.id]:t})),className:`px-3 py-1 text-xs font-medium rounded capitalize transition-colors ${j[e.id]===t?"present"===t?"bg-green-500 text-white":"late"===t?"bg-yellow-500 text-white":"bg-red-500 text-white":"text-gray-500 hover:bg-gray-200"}`,children:t},t))})]},e.id)),0===y.length&&(0,s.jsx)("p",{className:"text-gray-500 italic col-span-3 text-center py-8",children:"No students in this class."})]})]})]})};function u(){let{students:e,classes:a,attendance:r,settings:i,setAttendance:d}=(0,t.useSchoolStore)();return(0,s.jsx)(x,{students:e,classes:a,attendance:r,settings:i,onSave:d})}e.s(["default",()=>u],73307)}]);